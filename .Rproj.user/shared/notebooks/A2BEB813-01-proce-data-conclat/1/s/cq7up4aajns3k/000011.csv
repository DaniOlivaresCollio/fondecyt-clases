"0","# Chequeo COMPLETO de códigos ciuo08 con api INE"
"0",""
"0","## Enviar la consulta al servidor"
"0","request <-  httr::POST(""https://rapps.ine.cl:9292/predict"", "
"0","                       encode = ""json"","
"0","                       body =  list(text = data$glosa_ciuo08,"
"0","                                    classification = ""ciuo"","
"0","                                    digits = 2))"
"0",""
"0","## Extraer el contenido"
"0","ciuo08_ine <- httr::content(request)"
"0",""
"0","## Agregar como nueva columna a la base original"
"0","data$ciuo08_ine <- unlist(ciuo08_ine$cod_final)"
"0",""
"0","## Volver NA en ciuo08_ine los NA de ciuo08_clio_2d"
"0","data <- data %>%"
"0","  mutate("
"0","    ciuo08_ine = ifelse(is.na(ciuo08_clio_2d), NA, ciuo08_ine)"
"0","  )"
"0",""
"0","## Buscar los códigos diferentes"
"0","diferente_ciuo <- data %>%"
"0","  filter(ciuo08_ine != ciuo08_clio_2d | (is.na(ciuo08_ine) != is.na(ciuo08_clio_2d))) %>%"
"0","  select(glosa_ciuo08, ciuo08_clio_2d, ciuo08_ine)"
"0",""
"0","diferente_ciuo"
