{
  "hash": "7887039b15bc3a005d9105f5c4a54ef4",
  "result": {
    "engine": "knitr",
    "markdown": "# Procesamiento Data Conclat Argentina\n\n## Preparación\n\n\n\n\n\n\n::: {.cell}\n\n:::\n\n\n\n\n\n\n### Cargar datos\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_arg <- read_dta(\"input/data/Base edit 13.8 con a27.dta\")\ndata_arg_raw <- data_arg\n\ndata_arg <- data_arg %>%\n  rename(\n    sexo = e01_sexo,\n    edad = e02_edad\n  )\n```\n:::\n\n\n\n\n\n\n## Procesamiento\n\n### relation_mop\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data_arg$a07)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nx <numeric> \n# total N=1405 valid N=1405 mean=3.18 sd=1.17\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    1 |  50 |  3.56 |    3.56 |   3.56\n    2 | 436 | 31.03 |   31.03 |  34.59\n    3 | 298 | 21.21 |   21.21 |  55.80\n    4 | 528 | 37.58 |   37.58 |  93.38\n    5 |  51 |  3.63 |    3.63 |  97.01\n    6 |  11 |  0.78 |    0.78 |  97.79\n    7 |  31 |  2.21 |    2.21 | 100.00\n <NA> |   0 |  0.00 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\n# Situación empleo\ndata_arg <- data_arg %>%\n  mutate(\n    a07 = factor(\n      as.numeric(a07),\n      levels = 1:7,\n      labels = c(\n        \"1. Patrón(a) o empleador(a)\",\n        \"2. Trabajador(a) por cuenta propia\",\n        \"3. Empleado(a) u obrero(a) del sector público\",\n        \"4. Empleado(a) u obrero(a) del sector privado\",\n        \"5. Servicio doméstico fijo o por horas\",\n        \"6. FF.AA. y de seguridad\",\n        \"7. Para el negocio, empresa, actividad de un familiar\"\n      )\n    )\n  ) %>%\n  set_variable_labels(a07 = \"Employment situation (a07)\")\n\nfrq(data_arg$a07)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nEmployment situation (a07) (x) <categorical> \n# total N=1405 valid N=1405 mean=3.18 sd=1.17\n\nValue                                                 |   N | Raw % | Valid % | Cum. %\n--------------------------------------------------------------------------------------\n1. Patrón(a) o empleador(a)                           |  50 |  3.56 |    3.56 |   3.56\n2. Trabajador(a) por cuenta propia                    | 436 | 31.03 |   31.03 |  34.59\n3. Empleado(a) u obrero(a) del sector público         | 298 | 21.21 |   21.21 |  55.80\n4. Empleado(a) u obrero(a) del sector privado         | 528 | 37.58 |   37.58 |  93.38\n5. Servicio doméstico fijo o por horas                |  51 |  3.63 |    3.63 |  97.01\n6. FF.AA. y de seguridad                              |  11 |  0.78 |    0.78 |  97.79\n7. Para el negocio, empresa, actividad de un familiar |  31 |  2.21 |    2.21 | 100.00\n<NA>                                                  |   0 |  0.00 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\ndata_arg <- data_arg %>%\n  mutate(\n    relation_mop = case_when(\n      as_numeric(a07) == 1 ~ 1,\n      as_numeric(a07) == 2 ~ 2,\n      as_numeric(a07) >= 3 ~ 3,\n      TRUE ~ NA_real_\n      ),\n    relation_mop = factor(\n      relation_mop,\n      levels = 1:3,\n      labels = c(\n        \"1. Employers\",\n        \"2. Self-Employed\",\n        \"3. Salaried\"\n      )\n    )\n  ) %>%\n  set_variable_labels(relation_mop = \"Relation with Means of Production\")\n\nfrq(data_arg$relation_mop)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRelation with Means of Production (x) <categorical> \n# total N=1405 valid N=1405 mean=2.62 sd=0.55\n\nValue            |   N | Raw % | Valid % | Cum. %\n-------------------------------------------------\n1. Employers     |  50 |  3.56 |    3.56 |   3.56\n2. Self-Employed | 436 | 31.03 |   31.03 |  34.59\n3. Salaried      | 919 | 65.41 |   65.41 | 100.00\n<NA>             |   0 |  0.00 |    <NA> |   <NA>\n```\n\n\n:::\n:::\n\n\n\n\n\n\n### company_size\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data_arg$a26)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nx <numeric> \n# total N=1405 valid N=1405 mean=109.21 sd=286.15\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    1 | 322 | 22.92 |   22.92 |  22.92\n    2 | 248 | 17.65 |   17.65 |  40.57\n    3 | 109 |  7.76 |    7.76 |  48.33\n    4 |  75 |  5.34 |    5.34 |  53.67\n    5 |  94 |  6.69 |    6.69 |  60.36\n    6 |  51 |  3.63 |    3.63 |  63.99\n    7 |  42 |  2.99 |    2.99 |  66.98\n    8 |  48 |  3.42 |    3.42 |  70.39\n    9 | 249 | 17.72 |   17.72 |  88.11\n  888 | 167 | 11.89 |   11.89 | 100.00\n <NA> |   0 |  0.00 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\ndata_arg <- data_arg %>%\n  mutate(\n    company_size = case_when(\n      a26 %in% c(1) ~ 1,\n      a26 %in% c(2, 3) ~ 2,\n      a26 %in% c(4, 5) ~ 3,\n      a26 %in% c(6, 7) ~ 4,\n      a26 %in% c(8, 9) ~ 5,\n      TRUE ~ NA_real_\n    ),\n    company_size = factor(\n      company_size, \n      levels = 1:5, \n      labels = c(\n        \"Solo\",\n        \"2-9\",\n        \"10-49\",\n        \"50-199\",\n        \"200 or more\"),\n      ordered = TRUE\n    )\n  ) %>%\n  set_variable_labels(company_size = \"Company Size\")\n\nfrq(data_arg$company_size)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCompany Size (x) <ordinal> \n# total N=1405 valid N=1238 mean=2.75 sd=1.52\n\nValue       |   N | Raw % | Valid % | Cum. %\n--------------------------------------------\nSolo        | 322 | 22.92 |   26.01 |  26.01\n2-9         | 357 | 25.41 |   28.84 |  54.85\n10-49       | 169 | 12.03 |   13.65 |  68.50\n50-199      |  93 |  6.62 |    7.51 |  76.01\n200 or more | 297 | 21.14 |   23.99 | 100.00\n<NA>        | 167 | 11.89 |    <NA> |   <NA>\n```\n\n\n:::\n:::\n\n\n\n\n\n\n### workplace_size \n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data_arg$a27)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nx <numeric> \n# total N=1405 valid N=1372 mean=3.49 sd=2.45\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    1 | 355 | 25.27 |   25.87 |  25.87\n    2 | 308 | 21.92 |   22.45 |  48.32\n    3 | 150 | 10.68 |   10.93 |  59.26\n    4 | 125 |  8.90 |    9.11 |  68.37\n    5 | 155 | 11.03 |   11.30 |  79.66\n    6 |  81 |  5.77 |    5.90 |  85.57\n    7 |  57 |  4.06 |    4.15 |  89.72\n    8 |  57 |  4.06 |    4.15 |  93.88\n    9 |  84 |  5.98 |    6.12 | 100.00\n <NA> |  33 |  2.35 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\ndata_arg <- data_arg %>%\n  mutate(\n    workplace_size = case_when(\n      a27 %in% c(1) ~ 1,\n      a27 %in% c(2, 3) ~ 2,\n      a27 %in% c(4, 5) ~ 3,\n      a27 %in% c(6, 7) ~ 4,\n      a27 %in% c(8, 9) ~ 5,\n      TRUE ~ NA_real_\n    ),\n    workplace_size = factor(\n      workplace_size,\n      levels = 1:5,\n      labels = c(\n        \"Solo\",\n        \"2-9\",\n        \"10-49\",\n        \"50-199\",\n        \"200 or more\"),\n      ordered = TRUE\n    )\n  ) %>%\n  set_variable_labels(workplace_size = \"Workplace Size\")\n\nfrq(data_arg$workplace_size)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nWorkplace Size (x) <ordinal> \n# total N=1405 valid N=1372 mean=2.45 sd=1.26\n\nValue       |   N | Raw % | Valid % | Cum. %\n--------------------------------------------\nSolo        | 355 | 25.27 |   25.87 |  25.87\n2-9         | 458 | 32.60 |   33.38 |  59.26\n10-49       | 280 | 19.93 |   20.41 |  79.66\n50-199      | 138 |  9.82 |   10.06 |  89.72\n200 or more | 141 | 10.04 |   10.28 | 100.00\n<NA>        |  33 |  2.35 |    <NA> |   <NA>\n```\n\n\n:::\n:::\n\n\n\n\n\n\n### owners\n\n-   1 == employers o self employed sin empleados\n-   2 == employers o self employed con 2-9 empleados\n-   3 == employers o self employed com \\>= 10 empleados\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(data_arg$relation_mop,data_arg$company_size)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                  \n                   Solo 2-9 10-49 50-199 200 or more\n  1. Employers        2  38     9      0           0\n  2. Self-Employed  255 119    13      4          19\n  3. Salaried        65 200   147     89         278\n```\n\n\n:::\n\n```{.r .cell-code}\ntable(data_arg$relation_mop,data_arg$workplace_size)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                  \n                   Solo 2-9 10-49 50-199 200 or more\n  1. Employers        4  40     6      0           0\n  2. Self-Employed  274 137    15      2           4\n  3. Salaried        77 281   259    136         137\n```\n\n\n:::\n\n```{.r .cell-code}\ndata_arg <- data_arg %>%\n  mutate(\n    owners = case_when(\n      as.numeric(relation_mop) %in% 1:2 & (as.numeric(company_size) == 1 | (is.na(company_size) & as.numeric(workplace_size) == 1)) ~ 1,\n      as.numeric(relation_mop) %in% 1:2 & (as.numeric(company_size) == 2 | (is.na(company_size) & as.numeric(workplace_size) == 2)) ~ 2,\n      as.numeric(relation_mop) %in% 1:2 & (as.numeric(company_size) >= 3 | (is.na(company_size) & as.numeric(workplace_size) >= 3)) ~ 3,\n      TRUE ~ NA_real_\n    ),\n    owners = factor(\n      owners,\n      levels = 1:3,\n      labels = c(\n        \"1. Solo Self-Employed\",\n        \"2. Small employers\",\n        \"3. Employers\"\n      )\n    )\n  ) %>%\n  set_variable_labels(owners = \"Owners\")\n\nfrq(data_arg$owners)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nOwners (x) <categorical> \n# total N=1405 valid N=483 mean=1.53 sd=0.66\n\nValue                 |   N | Raw % | Valid % | Cum. %\n------------------------------------------------------\n1. Solo Self-Employed | 271 | 19.29 |   56.11 |  56.11\n2. Small employers    | 166 | 11.81 |   34.37 |  90.48\n3. Employers          |  46 |  3.27 |    9.52 | 100.00\n<NA>                  | 922 | 65.62 |    <NA> |   <NA>\n```\n\n\n:::\n:::\n\n\n\n\n\n\n### owners2\n\n-   1 == employers o self employed sin empleados\n-   2 == employers o self employed con 2-49 empleados\n-   3 == employers o self employed com \\>= 50 empleados\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_arg <- data_arg %>%\n  mutate(\n    owners2 = case_when(\n      as.numeric(relation_mop) %in% 1:2 & (as.numeric(company_size) == 1 | (is.na(company_size) & as.numeric(workplace_size) == 1)) ~ 1,\n      as.numeric(relation_mop) %in% 1:2 & (as.numeric(company_size) %in% 2:3 | (is.na(company_size) & as.numeric(workplace_size) %in% 2:3)) ~ 2,\n      as.numeric(relation_mop) %in% 1:2 & (as.numeric(company_size) >= 4 | (is.na(company_size) & as.numeric(workplace_size) >= 4)) ~ 3,\n      TRUE ~ NA_real_\n    ),\n    owners2 = factor(\n      owners2,\n      levels = 1:3,\n      labels = c(\n        \"1. Solo Self-Employed\",\n        \"2. Small employers\",\n        \"3. Capitalists\"\n      )\n    )\n  ) %>%\n  set_variable_labels(owners2 = \"Owners 2\")\n\nfrq(data_arg$owners2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nOwners 2 (x) <categorical> \n# total N=1405 valid N=483 mean=1.49 sd=0.59\n\nValue                 |   N | Raw % | Valid % | Cum. %\n------------------------------------------------------\n1. Solo Self-Employed | 271 | 19.29 |   56.11 |  56.11\n2. Small employers    | 189 | 13.45 |   39.13 |  95.24\n3. Capitalists        |  23 |  1.64 |    4.76 | 100.00\n<NA>                  | 922 | 65.62 |    <NA> |   <NA>\n```\n\n\n:::\n:::\n\n\n\n\n\n\n### educ\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data_arg$e05)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nx <numeric> \n# total N=1405 valid N=1405 mean=6.45 sd=2.11\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    1 |  13 |  0.93 |    0.93 |   0.93\n    2 |  14 |  1.00 |    1.00 |   1.92\n    3 |  54 |  3.84 |    3.84 |   5.77\n    4 | 177 | 12.60 |   12.60 |  18.36\n    5 | 372 | 26.48 |   26.48 |  44.84\n    6 |  67 |  4.77 |    4.77 |  49.61\n    7 | 163 | 11.60 |   11.60 |  61.21\n    8 | 221 | 15.73 |   15.73 |  76.94\n    9 | 260 | 18.51 |   18.51 |  95.44\n   10 |  64 |  4.56 |    4.56 | 100.00\n <NA> |   0 |  0.00 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\ndata_arg <- data_arg %>%\n  mutate(\n    educ = ifelse(e05 %in% c(-999, -888), NA, e05)\n  ) %>%\n  set_variable_labels(educ = \"Educational level\")\n\nfrq(data_arg$educ)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nEducational level (x) <numeric> \n# total N=1405 valid N=1405 mean=6.45 sd=2.11\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    1 |  13 |  0.93 |    0.93 |   0.93\n    2 |  14 |  1.00 |    1.00 |   1.92\n    3 |  54 |  3.84 |    3.84 |   5.77\n    4 | 177 | 12.60 |   12.60 |  18.36\n    5 | 372 | 26.48 |   26.48 |  44.84\n    6 |  67 |  4.77 |    4.77 |  49.61\n    7 | 163 | 11.60 |   11.60 |  61.21\n    8 | 221 | 15.73 |   15.73 |  76.94\n    9 | 260 | 18.51 |   18.51 |  95.44\n   10 |  64 |  4.56 |    4.56 | 100.00\n <NA> |   0 |  0.00 |    <NA> |   <NA>\n```\n\n\n:::\n:::\n\n\n\n\n\n\n### glosa_ciuo08\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Preparar variables necesarias\n\n## Crear la glosa concatenada\ndata_arg$glosa_ciuo08 <- paste(data_arg$a02, data_arg$a03, sep = \" \")\n```\n:::\n\n\n\n\n\n \n### ciuo08_ine\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Chequeo COMPLETO de códigos ciuo08 con api INE\n\n## Enviar la consulta al servidor\nrequest <-  httr::POST(\"https://rapps.ine.cl:9292/predict\", \n                       encode = \"json\",\n                       body =  list(text = data_arg$glosa_ciuo08,\n                                    classification = \"ciuo\",\n                                    digits = 2))\n\n## Extraer el contenido\nciuo08_ine <- httr::content(request)\n\n## Agregar como nueva columna a la base original\ndata_arg$ciuo08_ine <- unlist(ciuo08_ine$cod_final)\n\ndata_arg <- data_arg %>% \n  set_variable_labels(\n    ciuo08_ine = \"ISCO-08 (Coded with INE's API)\"\n  )\n\nfrq(data_arg$ciuo08_ine)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nISCO-08 (Coded with INE's API) (x) <character> \n# total N=1405 valid N=1405 mean=48.43 sd=22.35\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n   12 |   7 |  0.50 |    0.50 |   0.50\n   13 |  21 |  1.49 |    1.49 |   1.99\n   14 |   4 |  0.28 |    0.28 |   2.28\n   21 |  30 |  2.14 |    2.14 |   4.41\n   22 |  45 |  3.20 |    3.20 |   7.62\n   23 | 157 | 11.17 |   11.17 |  18.79\n   24 |  38 |  2.70 |    2.70 |  21.49\n   25 |  22 |  1.57 |    1.57 |  23.06\n   26 |  68 |  4.84 |    4.84 |  27.90\n   31 |  25 |  1.78 |    1.78 |  29.68\n   32 |  12 |  0.85 |    0.85 |  30.53\n   33 |  76 |  5.41 |    5.41 |  35.94\n   34 |  15 |  1.07 |    1.07 |  37.01\n   35 |  11 |  0.78 |    0.78 |  37.79\n   41 |  31 |  2.21 |    2.21 |  40.00\n   42 |  35 |  2.49 |    2.49 |  42.49\n   43 |  29 |  2.06 |    2.06 |  44.56\n   44 |   1 |  0.07 |    0.07 |  44.63\n   51 |  89 |  6.33 |    6.33 |  50.96\n   52 | 255 | 18.15 |   18.15 |  69.11\n   53 |  36 |  2.56 |    2.56 |  71.67\n   54 |  34 |  2.42 |    2.42 |  74.09\n   61 |  22 |  1.57 |    1.57 |  75.66\n   71 |  50 |  3.56 |    3.56 |  79.22\n   72 |  34 |  2.42 |    2.42 |  81.64\n   73 |  14 |  1.00 |    1.00 |  82.63\n   74 |  21 |  1.49 |    1.49 |  84.13\n   75 |  54 |  3.84 |    3.84 |  87.97\n   81 |  10 |  0.71 |    0.71 |  88.68\n   83 |  44 |  3.13 |    3.13 |  91.81\n   91 |  71 |  5.05 |    5.05 |  96.87\n   92 |   2 |  0.14 |    0.14 |  97.01\n   93 |  17 |  1.21 |    1.21 |  98.22\n   94 |   4 |  0.28 |    0.28 |  98.51\n   95 |   7 |  0.50 |    0.50 |  99.00\n   96 |  14 |  1.00 |    1.00 | 100.00\n <NA> |   0 |  0.00 |    <NA> |   <NA>\n```\n\n\n:::\n:::\n\n\n\n\n\n\n### skills\n\n- Experts: ciuo08 == 11 a 34 con universitaria completa o más (educ \\>= 9) ---\\> experts\n- Experts: ciuo08 == 11 a 34 sin información educ (educ == NA)\n\n- Skilled: ciuo08 == 11 a 34 con universitaria incompleta o menos (educ \\< 9)\n- Skilled: ciuo08 == 35, 36, 41:44, 53\n- Skilled: ciuo08 == 51, 54, 61, 62, 71:75, 81 con media completa o más (educ \\>= 5)\n- Skilled: ciuo08 == 61, 62, 71:75 sin información educ (educ == NA)\n\n- Unskilled: ciuo08 == 51, 54, 61, 62, 71:75, 81 con media incompleta o menos, y\n- Unskilled: ciuo08 == 52, 63, 82, 83, 90+\n- Unskilled: ciuo08 == 51, 54, 81 sin información educ (educ == NA)\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_arg <- data_arg %>% \n  mutate(\n    skills = case_when(\n      ciuo08_ine <= 34 & educ >= 9 ~ 1,\n      ciuo08_ine <= 34 & is.na(educ)~ 1,  \n      \n      ciuo08_ine <= 34 & educ < 9 ~ 2,\n      ciuo08_ine %in% c(35, 36, 41:44, 53) ~ 2,\n      ciuo08_ine %in% c(51, 54, 61, 62, 71:75, 81) & educ >= 5 ~ 2,\n      ciuo08_ine %in% c(61, 62, 71:75) & is.na(educ) ~ 2,\n      \n      ciuo08_ine %in% c(51, 54, 61, 62, 71:75, 81) & educ <= 4 ~ 3,\n      ciuo08_ine %in% c(52, 63, 82, 83, 91:99) ~ 3,\n      ciuo08_ine %in% c(51, 54, 81) & is.na(educ) ~ 3     \n    ),\n    skills = factor(\n      skills, \n      levels = 1:3,\n      labels = c(\n        \"1. Experts\",\n        \"2. Skilled\",\n        \"3. Unskilled\"\n      )\n    )\n  ) %>%\n  set_variable_labels(skills = \"Skills\")\n\nfrq(data_arg$skills)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSkills (x) <categorical> \n# total N=1405 valid N=1405 mean=2.19 sd=0.72\n\nValue        |   N | Raw % | Valid % | Cum. %\n---------------------------------------------\n1. Experts   | 252 | 17.94 |   17.94 |  17.94\n2. Skilled   | 636 | 45.27 |   45.27 |  63.20\n3. Unskilled | 517 | 36.80 |   36.80 | 100.00\n<NA>         |   0 |  0.00 |    <NA> |   <NA>\n```\n\n\n:::\n:::\n\n\n\n\n\n\n### formal_position_auth\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data_arg$a15)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nx <numeric> \n# total N=1405 valid N=904 mean=3.80 sd=0.59\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    1 |  15 |  1.07 |    1.66 |   1.66\n    2 |  41 |  2.92 |    4.54 |   6.19\n    3 |  54 |  3.84 |    5.97 |  12.17\n    4 | 794 | 56.51 |   87.83 | 100.00\n <NA> | 501 | 35.66 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\ndata_arg <- data_arg %>%\n  mutate(\n    formal_position_auth = case_when(\n      as.numeric(relation_mop) %in% c(1, 2) ~ NA_real_,\n      TRUE ~ as.numeric(a15)\n    ),\n    formal_position_auth = factor(\n      formal_position_auth,\n      levels = 1:4,\n      labels = c(\n        \"1. Senior manager or executive\",\n        \"2. Middle manager (e.g., sector, office or branch head)\",\n        \"3. Supervisor or foreperson\",\n        \"4. Regular employee or worker (no supervisory role)\"\n      )\n    )\n  ) %>%\n  set_variable_labels(formal_position_auth = \"Formal position of authority (a15)\")\n\nfrq(data_arg$formal_position_auth)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nFormal position of authority (a15) (x) <categorical> \n# total N=1405 valid N=904 mean=3.80 sd=0.59\n\nValue                                                   |   N | Raw % | Valid % | Cum. %\n----------------------------------------------------------------------------------------\n1. Senior manager or executive                          |  15 |  1.07 |    1.66 |   1.66\n2. Middle manager (e.g., sector, office or branch head) |  41 |  2.92 |    4.54 |   6.19\n3. Supervisor or foreperson                             |  54 |  3.84 |    5.97 |  12.17\n4. Regular employee or worker (no supervisory role)     | 794 | 56.51 |   87.83 | 100.00\n<NA>                                                    | 501 | 35.66 |    <NA> |   <NA>\n```\n\n\n:::\n:::\n\n\n\n\n\n\n### supervision\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data_arg$a16)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nx <numeric> \n# total N=1405 valid N=904 mean=1.85 sd=0.36\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    1 | 138 |  9.82 |   15.27 |  15.27\n    2 | 766 | 54.52 |   84.73 | 100.00\n <NA> | 501 | 35.66 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\ndata_arg <- data_arg %>%\n  mutate(\n    supervision = case_when(\n      as.numeric(relation_mop) %in% 1:2 ~ NA,\n      a16 == 1 ~ 1,\n      a16 %in% c(2, -888, -999) ~ 0,\n      TRUE ~ NA_real_\n    )\n  ) %>%\n  set_variable_labels(supervision = \"Supervises other workers (a16)\")\n\nfrq(data_arg$supervision)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSupervises other workers (a16) (x) <numeric> \n# total N=1405 valid N=904 mean=0.15 sd=0.36\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    0 | 766 | 54.52 |   84.73 |  84.73\n    1 | 138 |  9.82 |   15.27 | 100.00\n <NA> | 501 | 35.66 |    <NA> |   <NA>\n```\n\n\n:::\n:::\n\n\n\n\n\n\n### decisionmaking_typology\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data_arg$a17_01)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nx <numeric> \n# total N=1405 valid N=874 mean=19.90 sd=122.34\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    1 |  59 |  4.20 |    6.75 |   6.75\n    2 | 157 | 11.17 |   17.96 |  24.71\n    3 | 641 | 45.62 |   73.34 |  98.05\n  888 |  17 |  1.21 |    1.95 | 100.00\n <NA> | 531 | 37.79 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\nfrq(data_arg$a17_02)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nx <numeric> \n# total N=1405 valid N=874 mean=22.15 sd=129.15\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    1 |  14 |  1.00 |    1.60 |   1.60\n    2 |  54 |  3.84 |    6.18 |   7.78\n    3 | 787 | 56.01 |   90.05 |  97.83\n  888 |  19 |  1.35 |    2.17 | 100.00\n <NA> | 531 | 37.79 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\nfrq(data_arg$a17_03)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nx <numeric> \n# total N=1405 valid N=874 mean=21.06 sd=125.79\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    1 |  27 |  1.92 |    3.09 |   3.09\n    2 |  95 |  6.76 |   10.87 |  13.96\n    3 | 734 | 52.24 |   83.98 |  97.94\n  888 |  18 |  1.28 |    2.06 | 100.00\n <NA> | 531 | 37.79 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\nfrq(data_arg$a17_04)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nx <numeric> \n# total N=1405 valid N=874 mean=24.05 sd=135.64\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    1 |  26 |  1.85 |    2.97 |   2.97\n    2 | 135 |  9.61 |   15.45 |  18.42\n    3 | 692 | 49.25 |   79.18 |  97.60\n  888 |  21 |  1.49 |    2.40 | 100.00\n <NA> | 531 | 37.79 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\nfrq(data_arg$a17_05)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nx <numeric> \n# total N=1405 valid N=874 mean=14.52 sd=103.12\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    1 | 106 |  7.54 |   12.13 |  12.13\n    2 | 338 | 24.06 |   38.67 |  50.80\n    3 | 418 | 29.75 |   47.83 |  98.63\n  888 |  12 |  0.85 |    1.37 | 100.00\n <NA> | 531 | 37.79 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\nfrq(data_arg$a17_06)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nx <numeric> \n# total N=1405 valid N=874 mean=22.07 sd=129.16\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    1 |  29 |  2.06 |    3.32 |   3.32\n    2 |  93 |  6.62 |   10.64 |  13.96\n    3 | 733 | 52.17 |   83.87 |  97.83\n  888 |  19 |  1.35 |    2.17 | 100.00\n <NA> | 531 | 37.79 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\n# Función de recodificación\nrecode_dm <- function(x) case_when(\n  x == 1 ~ 3,\n  x == 2 ~ 2,\n  x %in% 3:888 ~ 1,\n  TRUE ~ NA_real_\n)\n\ndata_arg <- data_arg %>%\n  mutate(\n    across(a17_01:a17_06, recode_dm, .names = \"rec_{.col}\"),                    # Crear versiones recodificadas temporales\n    decisionmaking_typology = if_else(                                          # Suma y promedio, NA solo si todas son NA\n      if_all(starts_with(\"rec_\"), is.na),\n      NA_real_,\n      rowSums(across(starts_with(\"rec_\")), na.rm = TRUE)\n    ),\n    decisionmaking_typology_mean = if_else(\n      if_all(starts_with(\"rec_\"), is.na),\n      NA_real_,\n      rowMeans(across(starts_with(\"rec_\")), na.rm = TRUE)\n    )\n  ) %>%\n  set_variable_labels(\n    decisionmaking_typology = \"Decision-making typology (sum, inverted)\",\n    decisionmaking_typology_mean = \"Decision-making typology (mean, inverted)\"\n  ) %>%\n  select(-starts_with(\"rec_\"))\n\nfrq(data_arg$decisionmaking_typology)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nDecision-making typology (sum, inverted) (x) <numeric> \n# total N=1405 valid N=874 mean=7.59 sd=2.16\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    6 | 373 | 26.55 |   42.68 |  42.68\n    7 | 185 | 13.17 |   21.17 |  63.84\n    8 | 117 |  8.33 |   13.39 |  77.23\n    9 |  60 |  4.27 |    6.86 |  84.10\n   10 |  56 |  3.99 |    6.41 |  90.50\n   11 |  24 |  1.71 |    2.75 |  93.25\n   12 |  21 |  1.49 |    2.40 |  95.65\n   13 |  11 |  0.78 |    1.26 |  96.91\n   14 |  12 |  0.85 |    1.37 |  98.28\n   15 |   6 |  0.43 |    0.69 |  98.97\n   16 |   4 |  0.28 |    0.46 |  99.43\n   17 |   2 |  0.14 |    0.23 |  99.66\n   18 |   3 |  0.21 |    0.34 | 100.00\n <NA> | 531 | 37.79 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\nfrq(data_arg$decisionmaking_typology_mean)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nDecision-making typology (mean, inverted) (x) <numeric> \n# total N=1405 valid N=874 mean=1.27 sd=0.36\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n 1.00 | 373 | 26.55 |   42.68 |  42.68\n 1.17 | 185 | 13.17 |   21.17 |  63.84\n 1.33 | 117 |  8.33 |   13.39 |  77.23\n 1.50 |  60 |  4.27 |    6.86 |  84.10\n 1.67 |  56 |  3.99 |    6.41 |  90.50\n 1.83 |  24 |  1.71 |    2.75 |  93.25\n 2.00 |  21 |  1.49 |    2.40 |  95.65\n 2.17 |  11 |  0.78 |    1.26 |  96.91\n 2.33 |  12 |  0.85 |    1.37 |  98.28\n 2.50 |   6 |  0.43 |    0.69 |  98.97\n 2.67 |   4 |  0.28 |    0.46 |  99.43\n 2.83 |   2 |  0.14 |    0.23 |  99.66\n 3.00 |   3 |  0.21 |    0.34 | 100.00\n <NA> | 531 | 37.79 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\n# Crear variable con 3 categorías\ndata_arg <- data_arg %>%\n  mutate(\n    decisionmaking_typology_cat = case_when(\n    decisionmaking_typology_mean == 1 ~ 1,\n    decisionmaking_typology_mean > 1 & decisionmaking_typology_mean < 3 ~ 2,\n    decisionmaking_typology_mean == 3 ~ 3\n    )\n  ) %>%\n  set_variable_labels(\n    decisionmaking_typology_cat = \"Decision-making typology (recoded 3 categories)\"\n  )\n\nfrq(data_arg$decisionmaking_typology_cat)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nDecision-making typology (recoded 3 categories) (x) <numeric> \n# total N=1405 valid N=874 mean=1.58 sd=0.50\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    1 | 373 | 26.55 |   42.68 |  42.68\n    2 | 498 | 35.44 |   56.98 |  99.66\n    3 |   3 |  0.21 |    0.34 | 100.00\n <NA> | 531 | 37.79 |    <NA> |   <NA>\n```\n\n\n:::\n:::\n\n\n\n\n\n\n### managerial_location_typology\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_arg <- data_arg %>%\n  mutate(\n    managerial_location_typology = case_when(\n      as.integer(decisionmaking_typology_cat) == 3 & supervision == 1 & as.integer(formal_position_auth) %in% 1:3 ~ 1,\n      as.integer(decisionmaking_typology_cat) == 3 & supervision == 1 & as.integer(formal_position_auth) == 4 ~ 2,\n      as.integer(decisionmaking_typology_cat) == 3 & supervision == 0 & as.integer(formal_position_auth) %in% 1:3 ~ 3,\n      as.integer(decisionmaking_typology_cat) == 3 & supervision == 0 & as.integer(formal_position_auth) == 4 ~ 4,\n      as.integer(decisionmaking_typology_cat) == 2 & supervision == 1 & as.integer(formal_position_auth) %in% 1:3 ~ 5,\n      as.integer(decisionmaking_typology_cat) == 2 & supervision == 1 & as.integer(formal_position_auth) == 4 ~ 6,\n      as.integer(decisionmaking_typology_cat) == 2 & supervision == 0 & as.integer(formal_position_auth) %in% 1:3 ~ 7,\n      as.integer(decisionmaking_typology_cat) == 2 & supervision == 0 & as.integer(formal_position_auth) == 4 ~ 8,\n      as.integer(decisionmaking_typology_cat) == 1 & supervision == 1 & as.integer(formal_position_auth) %in% 1:3 ~ 9,\n      as.integer(decisionmaking_typology_cat) == 1 & supervision == 1 & as.integer(formal_position_auth) == 4 ~ 10,\n      as.integer(decisionmaking_typology_cat) == 1 & supervision == 0 & as.integer(formal_position_auth) %in% 1:3 ~ 11,\n      as.integer(decisionmaking_typology_cat) == 1 & supervision == 0 & as.integer(formal_position_auth) == 4 ~ 12\n    ),\n    managerial_location_typology = factor(\n      managerial_location_typology,\n      levels = 1:12,\n      labels = c(\n        \"1. Manager on all criteria\",\n        \"2. Manager not in formal hierarchy\",\n        \"3. Non-supervisory manager\",\n        \"4. Non-supervisory decision-maker not in formal hierarchy\",\n        \"5. Advisor-manager on all criteria\",\n        \"6. Advisor not in hierarchy\",\n        \"7. Non-supervisory advisor\",\n        \"8. Non-supervisory advisor not in formal hierarchy\",\n        \"9. Sanctioning / task supervisor in hierarchy\",\n        \"10. Sanctioning / task supervisor not in hierarchy\",\n        \"11. Not subordinates but in hierarchy\",\n        \"12. Non-supervisor / non manager on all criteria\"\n      )\n    ),\n    organization_assets = case_when(\n      as.integer(managerial_location_typology) %in% c(1, 2, 3, 5) ~ 1,\n      as.integer(managerial_location_typology) %in% c(6, 7, 9, 10) ~ 2,\n      as.integer(managerial_location_typology) %in% c(4, 8, 11, 12) ~ 3\n    ),\n    organization_assets = factor(\n      organization_assets,\n      levels = 1:3,\n      labels = c(\n        \"1. Manager\",\n        \"2. Supervisor\",\n        \"3. Non-managerial worker\"\n      )\n    )\n  ) %>%\n  set_variable_labels(\n    managerial_location_typology = \"Managerial Location Typology\",\n    organization_assets = \"Organizational Assets\"\n  )\n\nfrq(data_arg$managerial_location_typology)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nManagerial Location Typology (x) <categorical> \n# total N=1405 valid N=873 mean=9.27 sd=2.52\n\nValue                                                     |   N | Raw %\n-----------------------------------------------------------------------\n1. Manager on all criteria                                |   3 |  0.21\n2. Manager not in formal hierarchy                        |   0 |  0.00\n3. Non-supervisory manager                                |   0 |  0.00\n4. Non-supervisory decision-maker not in formal hierarchy |   0 |  0.00\n5. Advisor-manager on all criteria                        |  86 |  6.12\n6. Advisor not in hierarchy                               |  38 |  2.70\n7. Non-supervisory advisor                                |  11 |  0.78\n8. Non-supervisory advisor not in formal hierarchy        | 362 | 25.77\n9. Sanctioning / task supervisor in hierarchy             |   1 |  0.07\n10. Sanctioning / task supervisor not in hierarchy        |   4 |  0.28\n11. Not subordinates but in hierarchy                     |   4 |  0.28\n12. Non-supervisor / non manager on all criteria          | 364 | 25.91\n<NA>                                                      | 532 | 37.86\n\nValue                                                     | Valid % | Cum. %\n----------------------------------------------------------------------------\n1. Manager on all criteria                                |    0.34 |   0.34\n2. Manager not in formal hierarchy                        |    0.00 |   0.34\n3. Non-supervisory manager                                |    0.00 |   0.34\n4. Non-supervisory decision-maker not in formal hierarchy |    0.00 |   0.34\n5. Advisor-manager on all criteria                        |    9.85 |  10.19\n6. Advisor not in hierarchy                               |    4.35 |  14.55\n7. Non-supervisory advisor                                |    1.26 |  15.81\n8. Non-supervisory advisor not in formal hierarchy        |   41.47 |  57.27\n9. Sanctioning / task supervisor in hierarchy             |    0.11 |  57.39\n10. Sanctioning / task supervisor not in hierarchy        |    0.46 |  57.85\n11. Not subordinates but in hierarchy                     |    0.46 |  58.30\n12. Non-supervisor / non manager on all criteria          |   41.70 | 100.00\n<NA>                                                      |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\nfrq(data_arg$organization_assets)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nOrganizational Assets (x) <categorical> \n# total N=1405 valid N=873 mean=2.73 sd=0.63\n\nValue                    |   N | Raw % | Valid % | Cum. %\n---------------------------------------------------------\n1. Manager               |  89 |  6.33 |   10.19 |  10.19\n2. Supervisor            |  54 |  3.84 |    6.19 |  16.38\n3. Non-managerial worker | 730 | 51.96 |   83.62 | 100.00\n<NA>                     | 532 | 37.86 |    <NA> |   <NA>\n```\n\n\n:::\n:::\n\n\n\n\n\n\n### a06_boleta\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# frq(data_arg$a06)\n# \n# data_arg <- data_arg %>% \n#   mutate(\n#     a06_boleta = case_when(\n#       a06 %in% c(1, 2) ~ 1,\n#       a06 %in% c(3, -888, -999) ~ 0\n#     )) %>% \n#     set_variable_labels(a06_boleta = \"Entrega boleta (1 = yes)\") %>% \n#   set_value_labels(a06_boleta = c(\n#     \"Yes\" = 1,\n#     \"No\" = 0\n#   ))\n# \n# frq(data_arg$a06_boleta)\n```\n:::\n\n\n\n\n\n\n### inicio_actividades\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# frq(data_arg$a10)\n# table(data_arg$a10, data_arg$relation_mop)\n# table(data_arg$a10, data_arg$owners)\n# table(data_arg$a10, data_arg$owners2)\n```\n:::\n\n\n\n\n\n\n### a18_contrato + servicio domèstico\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data_arg$a18)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nx <numeric> \n# total N=1405 valid N=874 mean=1.60 sd=0.91\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    1 | 584 | 41.57 |   66.82 |  66.82\n    2 |  71 |  5.05 |    8.12 |  74.94\n    3 | 207 | 14.73 |   23.68 |  98.63\n    4 |   8 |  0.57 |    0.92 |  99.54\n    5 |   4 |  0.28 |    0.46 | 100.00\n <NA> | 531 | 37.79 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\ndata_arg <- data_arg %>% \n  mutate(\n    a18_contrato = case_when(\n      a18 == 1 ~ 1, \n      a18 %in% c(2, 3, 4, 5) ~ 0,\n      as.numeric(a07) == 5 ~ 0\n    )\n  ) %>% \n  set_variable_labels(a18_contrato = \"Has a formal job (1 = yes)\") %>% \n  set_value_labels(a18_contrato = c(\n    \"Yes\" = 1,\n    \"No\" = 0\n  ))\n\nfrq(data_arg$a18_contrato)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nHas a formal job (1 = yes) (x) <numeric> \n# total N=1405 valid N=874 mean=0.67 sd=0.47\n\nValue | Label |   N | Raw % | Valid % | Cum. %\n----------------------------------------------\n    0 |    No | 290 | 20.64 |   33.18 |  33.18\n    1 |   Yes | 584 | 41.57 |   66.82 | 100.00\n <NA> |  <NA> | 531 | 37.79 |    <NA> |   <NA>\n```\n\n\n:::\n:::\n\n\n\n\n\n\n## Classes\n\n![](img/wright_classes.jpeg)\n\n### wrightclass1_original\n\n**employers: employers con 10 o más trabajadores**\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_arg <- data_arg %>%\n  mutate(\n    wrightclass1_original = case_when(\n      as.integer(owners) == 3 ~ 1,  # 1. Employers\n      as.integer(owners) == 2 ~ 2,  # 2. Small employers\n      as.integer(owners) == 1 ~ 3,  # 3. Petty bourgeoisie\n      \n      as.integer(organization_assets) == 1 & as.integer(skills) == 1 ~ 4,  # 4. Expert managers\n      as.integer(organization_assets) == 2 & as.integer(skills) == 1 ~ 5,  # 5. Expert supervisors\n      as.integer(organization_assets) == 3 & as.integer(skills) == 1 ~ 6,  # 6. Experts\n      \n      as.integer(organization_assets) == 1 & as.integer(skills) == 2 ~ 7,  # 7. Skilled managers\n      as.integer(organization_assets) == 2 & as.integer(skills) == 2 ~ 8,  # 8. Skilled supervisors\n      as.integer(organization_assets) == 3 & as.integer(skills) == 2 ~ 9,  # 9. Skilled workers\n      \n      as.integer(organization_assets) == 1 & as.integer(skills) == 3 ~ 10, # 10. Nonskilled managers\n      as.integer(organization_assets) == 2 & as.integer(skills) == 3 ~ 11, # 11. Nonskilled supervisors\n      as.integer(organization_assets) == 3 & as.integer(skills) == 3 ~ 12  # 12. Nonskilled workers\n    ),\n    wrightclass1_original = factor(\n      wrightclass1_original,\n      levels = 1:12,\n      labels = c(\n        \"1. Employers\",\n        \"2. Small employers\",\n        \"3. Petty bourgeoisie\",\n        \"4. Expert managers\",\n        \"5. Expert supervisors\",\n        \"6. Experts\",\n        \"7. Skilled managers\",\n        \"8. Skilled supervisors\",\n        \"9. Skilled workers\",\n        \"10. Nonskilled managers\",\n        \"11. Nonskilled supervisors\",\n        \"12. Nonskilled workers\"\n      )\n    )\n  ) %>%\n  set_variable_labels(wrightclass1_original = \"Wright Class Typology\")\n\nfrq(data_arg$wrightclass1_original)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nWright Class Typology (x) <categorical> \n# total N=1405 valid N=1356 mean=6.69 sd=3.69\n\nValue                      |   N | Raw % | Valid % | Cum. %\n-----------------------------------------------------------\n1. Employers               |  46 |  3.27 |    3.39 |   3.39\n2. Small employers         | 166 | 11.81 |   12.24 |  15.63\n3. Petty bourgeoisie       | 271 | 19.29 |   19.99 |  35.62\n4. Expert managers         |  41 |  2.92 |    3.02 |  38.64\n5. Expert supervisors      |  16 |  1.14 |    1.18 |  39.82\n6. Experts                 | 121 |  8.61 |    8.92 |  48.75\n7. Skilled managers        |  44 |  3.13 |    3.24 |  51.99\n8. Skilled supervisors     |  23 |  1.64 |    1.70 |  53.69\n9. Skilled workers         | 363 | 25.84 |   26.77 |  80.46\n10. Nonskilled managers    |   4 |  0.28 |    0.29 |  80.75\n11. Nonskilled supervisors |  15 |  1.07 |    1.11 |  81.86\n12. Nonskilled workers     | 246 | 17.51 |   18.14 | 100.00\n<NA>                       |  49 |  3.49 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\n# # base survey\n# data_arg_svy <- as_survey_design(data_arg, weights = rake_wb2)\n# \n# # Tabla de frecuencias ponderadas\n# wright_freq <- data_arg_svy %>%\n#   group_by(wrightclass1_original) %>%\n#   summarise(\n#     freq = survey_mean(vartype = NULL, na.rm = TRUE),\n#     n_unweighted = unweighted(n())\n#   ) %>%\n#   mutate(\n#     freq_pct = freq * 100\n#   )\n# \n# wright_freq %>%\n#   print(n = Inf)\n```\n:::\n\n\n\n\n\n\n### wrightclass2_capitalists\n\n**capitalists: employers 50 o más trabajadores**\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_arg <- data_arg %>%\n  mutate(\n    wrightclass2_capitalists = case_when(\n      as.integer(owners2) == 3 ~ 1,  # 1. Capitalists\n      as.integer(owners2) == 2 ~ 2,  # 2. Small employers\n      as.integer(owners2) == 1 ~ 3,  # 3. Petty bourgeoisie\n      \n      as.integer(organization_assets) == 1 & as.integer(skills) == 1 ~ 4,  # 4. Expert managers\n      as.integer(organization_assets) == 2 & as.integer(skills) == 1 ~ 5,  # 5. Expert supervisors\n      as.integer(organization_assets) == 3 & as.integer(skills) == 1 ~ 6,  # 6. Experts\n      \n      as.integer(organization_assets) == 1 & as.integer(skills) == 2 ~ 7,  # 7. Skilled managers\n      as.integer(organization_assets) == 2 & as.integer(skills) == 2 ~ 8,  # 8. Skilled supervisors\n      as.integer(organization_assets) == 3 & as.integer(skills) == 2 ~ 9,  # 9. Skilled workers\n      \n      as.integer(organization_assets) == 1 & as.integer(skills) == 3 ~ 10, # 10. Nonskilled managers\n      as.integer(organization_assets) == 2 & as.integer(skills) == 3 ~ 11, # 11. Nonskilled supervisors\n      as.integer(organization_assets) == 3 & as.integer(skills) == 3 ~ 12  # 12. Nonskilled workers\n    ),\n    wrightclass2_capitalists = factor(\n      wrightclass2_capitalists,\n      levels = 1:12,\n      labels = c(\n        \"1. Capitalists\",\n        \"2. Small employers\",\n        \"3. Petty bourgeoisie\",\n        \"4. Expert managers\",\n        \"5. Expert supervisors\",\n        \"6. Experts\",\n        \"7. Skilled managers\",\n        \"8. Skilled supervisors\",\n        \"9. Skilled workers\",\n        \"10. Nonskilled managers\",\n        \"11. Nonskilled supervisors\",\n        \"12. Nonskilled workers\"\n      )\n    )\n  ) %>%\n  set_variable_labels(wrightclass2_capitalists = \"Wright Class Typology (2)\")\n\nfrq(data_arg$wrightclass2_capitalists)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nWright Class Typology (2) (x) <categorical> \n# total N=1405 valid N=1356 mean=6.71 sd=3.67\n\nValue                      |   N | Raw % | Valid % | Cum. %\n-----------------------------------------------------------\n1. Capitalists             |  23 |  1.64 |    1.70 |   1.70\n2. Small employers         | 189 | 13.45 |   13.94 |  15.63\n3. Petty bourgeoisie       | 271 | 19.29 |   19.99 |  35.62\n4. Expert managers         |  41 |  2.92 |    3.02 |  38.64\n5. Expert supervisors      |  16 |  1.14 |    1.18 |  39.82\n6. Experts                 | 121 |  8.61 |    8.92 |  48.75\n7. Skilled managers        |  44 |  3.13 |    3.24 |  51.99\n8. Skilled supervisors     |  23 |  1.64 |    1.70 |  53.69\n9. Skilled workers         | 363 | 25.84 |   26.77 |  80.46\n10. Nonskilled managers    |   4 |  0.28 |    0.29 |  80.75\n11. Nonskilled supervisors |  15 |  1.07 |    1.11 |  81.86\n12. Nonskilled workers     | 246 | 17.51 |   18.14 | 100.00\n<NA>                       |  49 |  3.49 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\n# # base survey\n# data_arg_svy <- as_survey_design(data_arg, weights = rake_wb2)\n# \n# # Tabla de frecuencias ponderadas\n# wright_freq_2 <- data_arg_svy %>%\n#   group_by(wrightclass2_capitalists) %>%\n#   summarise(\n#     freq = survey_mean(vartype = NULL, na.rm = TRUE),\n#     n_unweighted = unweighted(n())\n#   ) %>%\n#   mutate(\n#     freq_pct = freq * 100\n#   )\n# \n# wright_freq_2 %>%\n#   print(n = Inf)\n```\n:::\n\n\n\n\n\n\n### wrightclass1_informal\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_arg <- data_arg %>%\n  mutate(\n    wrightclass1_informal = case_when(\n      as.integer(owners) == 3 ~ 1,  # 1. Employers\n      as.integer(owners) == 2 ~ 2,  # 2. Small employers\n      \n      as.integer(owners) == 1 & educ >= 9 ~ 3,   # 3. Petty bourgeoisie\n      as.integer(owners) == 1 & educ <= 8 ~ 4,   # 4. Informal self-employed\n      \n      as.integer(organization_assets) == 1 & as.integer(skills) == 1 ~ 5,  # 5. Expert managers\n      as.integer(organization_assets) == 2 & as.integer(skills) == 1 ~ 6,  # 6. Expert supervisors\n      as.integer(organization_assets) == 3 & as.integer(skills) == 1 ~ 7,  # 7. Experts\n      \n      as.integer(organization_assets) == 1 & as.integer(skills) == 2 ~ 8,  # 8. Skilled managers\n      as.integer(organization_assets) == 2 & as.integer(skills) == 2 ~ 9,  # 9. skilled supervisors\n      as.integer(organization_assets) == 1 & as.integer(skills) == 3 ~ 10, # 10. Nonskilled managers\n      as.integer(organization_assets) == 2 & as.integer(skills) == 3 ~ 11, # 11. Nonskilled supervisors\n      \n      as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18_contrato == 1 ~ 12, # 12. Formal workers\n      as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18_contrato == 0 ~ 13  # 13. Informal workers\n    ),\n    wrightclass1_informal = factor(\n      wrightclass1_informal,\n      levels = 1:13,\n      labels = c(\n        \"1. Employers\",\n        \"2. Small employers\",\n        \"3. Petty bourgeoisie\",\n        \"4. Informal self-employed\",\n        \"5. Expert managers\",\n        \"6. Expert supervisors\",\n        \"7. Experts\",\n        \"8. Skilled managers\",\n        \"9. Skilled supervisors\",\n        \"10. Nonskilled managers\",\n        \"11. Nonskilled supervisors\",\n        \"12. Formal workers\",\n        \"13. Informal workers\"\n      )\n    )\n  ) %>%\n  set_variable_labels(wrightclass1_informal = \"Wright Class Typology + Informal (3)\")\n\nfrq(data_arg$wrightclass1_informal)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nWright Class Typology + Informal (3) (x) <categorical> \n# total N=1405 valid N=1356 mean=8.02 sd=4.36\n\nValue                      |   N | Raw % | Valid % | Cum. %\n-----------------------------------------------------------\n1. Employers               |  46 |  3.27 |    3.39 |   3.39\n2. Small employers         | 166 | 11.81 |   12.24 |  15.63\n3. Petty bourgeoisie       |  53 |  3.77 |    3.91 |  19.54\n4. Informal self-employed  | 218 | 15.52 |   16.08 |  35.62\n5. Expert managers         |  41 |  2.92 |    3.02 |  38.64\n6. Expert supervisors      |  16 |  1.14 |    1.18 |  39.82\n7. Experts                 | 121 |  8.61 |    8.92 |  48.75\n8. Skilled managers        |  44 |  3.13 |    3.24 |  51.99\n9. Skilled supervisors     |  23 |  1.64 |    1.70 |  53.69\n10. Nonskilled managers    |   4 |  0.28 |    0.29 |  53.98\n11. Nonskilled supervisors |  15 |  1.07 |    1.11 |  55.09\n12. Formal workers         | 357 | 25.41 |   26.33 |  81.42\n13. Informal workers       | 252 | 17.94 |   18.58 | 100.00\n<NA>                       |  49 |  3.49 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\n# # base survey\n# data_arg_svy <- as_survey_design(data_arg, weights = rake_wb2)\n# \n# # Tabla de frecuencias ponderadas\n# wright_freq_3 <- data_arg_svy %>%\n#   group_by(wrightclass1_informal) %>%\n#   summarise(\n#     freq = survey_mean(vartype = NULL, na.rm = TRUE),\n#     n_unweighted = unweighted(n())\n#   ) %>%\n#   mutate(\n#     freq_pct = freq * 100\n#   )\n# \n# wright_freq_3 %>%\n#   print(n = Inf)\n```\n:::\n\n\n\n\n\n\n### wrightclass2_informal\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_arg <- data_arg %>%\n  mutate(\n    wrightclass2_informal = case_when(\n      as.integer(owners2) == 3 ~ 1,  # 1. Capitalists\n      as.integer(owners2) == 2 ~ 2,  # 2. Small employers\n      \n      as.integer(owners2) == 1 & educ >= 9 ~ 3,   # 3. Petty bourgeoisie\n      as.integer(owners2) == 1 & educ <= 8 ~ 4,   # 4. Informal self-employed\n      \n      as.integer(organization_assets) == 1 & as.integer(skills) == 1 ~ 5,  # 5. Expert managers\n      as.integer(organization_assets) == 2 & as.integer(skills) == 1 ~ 6,  # 6. Expert supervisors\n      as.integer(organization_assets) == 3 & as.integer(skills) == 1 ~ 7,  # 7. Experts\n      \n      as.integer(organization_assets) == 1 & as.integer(skills) == 2 ~ 8,  # 8. Skilled managers\n      as.integer(organization_assets) == 2 & as.integer(skills) == 2 ~ 9,  # 9. skilled supervisors\n      as.integer(organization_assets) == 1 & as.integer(skills) == 3 ~ 10, # 10. Nonskilled managers\n      as.integer(organization_assets) == 2 & as.integer(skills) == 3 ~ 11, # 11. Nonskilled supervisors\n      \n      as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18_contrato == 1 ~ 12, # 12. Formal workers\n      as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18_contrato == 0 ~ 13  # 13. Informal workers\n    ),\n    wrightclass2_informal = factor(\n      wrightclass2_informal,\n      levels = 1:13,\n      labels = c(\n        \"1. Capitalists\",\n        \"2. Small employers\",\n        \"3. Petty bourgeoisie\",\n        \"4. Informal self-employed\",\n        \"5. Expert managers\",\n        \"6. Expert supervisors\",\n        \"7. Experts\",\n        \"8. Skilled managers\",\n        \"9. Skilled supervisors\",\n        \"10. Nonskilled managers\",\n        \"11. Nonskilled supervisors\",\n        \"12. Formal workers\",\n        \"13. Informal workers\"\n      )\n    )\n  ) %>%\n  set_variable_labels(wrightclass2_informal = \"Wright Class Typology + Informal (4)\")\n\nfrq(data_arg$wrightclass2_informal)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nWright Class Typology + Informal (4) (x) <categorical> \n# total N=1405 valid N=1356 mean=8.04 sd=4.34\n\nValue                      |   N | Raw % | Valid % | Cum. %\n-----------------------------------------------------------\n1. Capitalists             |  23 |  1.64 |    1.70 |   1.70\n2. Small employers         | 189 | 13.45 |   13.94 |  15.63\n3. Petty bourgeoisie       |  53 |  3.77 |    3.91 |  19.54\n4. Informal self-employed  | 218 | 15.52 |   16.08 |  35.62\n5. Expert managers         |  41 |  2.92 |    3.02 |  38.64\n6. Expert supervisors      |  16 |  1.14 |    1.18 |  39.82\n7. Experts                 | 121 |  8.61 |    8.92 |  48.75\n8. Skilled managers        |  44 |  3.13 |    3.24 |  51.99\n9. Skilled supervisors     |  23 |  1.64 |    1.70 |  53.69\n10. Nonskilled managers    |   4 |  0.28 |    0.29 |  53.98\n11. Nonskilled supervisors |  15 |  1.07 |    1.11 |  55.09\n12. Formal workers         | 357 | 25.41 |   26.33 |  81.42\n13. Informal workers       | 252 | 17.94 |   18.58 | 100.00\n<NA>                       |  49 |  3.49 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\n# # base survey\n# data_arg_svy <- as_survey_design(data_arg, weights = rake_wb2)\n# \n# # Tabla de frecuencias ponderadas\n# wright_freq_4 <- data_arg_svy %>%\n#   group_by(wrightclass2_informal) %>%\n#   summarise(\n#     freq = survey_mean(vartype = NULL, na.rm = TRUE),\n#     n_unweighted = unweighted(n())\n#   ) %>%\n#   mutate(\n#     freq_pct = freq * 100\n#   )\n# \n# wright_freq_4 %>%\n#   print(n = Inf)\n```\n:::\n\n\n\n\n\n\n### wrightclass1_reduced\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_arg <- data_arg %>%\n  mutate(\n    wrightclass1_reduced = case_when(\n      as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18_contrato == 1 ~ 1,  # 1. Formal workers\n      as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18_contrato == 0 ~ 2,  # 2. Informal workers\n      as.integer(owners) == 1 & educ <= 8 ~ 3,                                                         # 3. Informal self-employed\n      as.integer(organization_assets) == 3 & as.integer(skills) == 1 ~ 4,                              # 4. Experts\n      as.integer(organization_assets) == 2 & as.integer(skills) %in% c(1, 2, 3) ~ 5,                   # 5. Supervisors\n      as.integer(organization_assets) == 1 & as.integer(skills) %in% c(1, 2, 3) ~ 6,                   # 6. Managers\n      as.integer(owners) == 1 & educ >= 9 ~ 7,                                                         # 7. Petty bourgeoisie\n      as.integer(owners) == 2 ~ 8,                                                                     # 8. Small employers\n      as.integer(owners) == 3 ~ 9                                                                      # 9. Employers\n    ),\n    wrightclass1_reduced = factor(\n      wrightclass1_reduced,\n      levels = 1:9,\n      labels = c(\n        \"1. Formal workers\",\n        \"2. Informal workers\",\n        \"3. Informal self-employed\",\n        \"4. Experts\",       \n        \"5. Supervisors\",\n        \"6. Managers\",\n        \"7. Petty bourgeoisie\",\n        \"8. Small employers\",\n        \"9. Employers\"\n      )\n    )\n  ) %>%\n  set_variable_labels(wrightclass1_reduced = \"Wright Class Typology  Reduced (5)\")\n\nfrq(data_arg$wrightclass1_reduced)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nWright Class Typology Reduced (5) (x) <categorical> \n# total N=1405 valid N=1356 mean=3.63 sd=2.57\n\nValue                     |   N | Raw % | Valid % | Cum. %\n----------------------------------------------------------\n1. Formal workers         | 357 | 25.41 |   26.33 |  26.33\n2. Informal workers       | 252 | 17.94 |   18.58 |  44.91\n3. Informal self-employed | 218 | 15.52 |   16.08 |  60.99\n4. Experts                | 121 |  8.61 |    8.92 |  69.91\n5. Supervisors            |  54 |  3.84 |    3.98 |  73.89\n6. Managers               |  89 |  6.33 |    6.56 |  80.46\n7. Petty bourgeoisie      |  53 |  3.77 |    3.91 |  84.37\n8. Small employers        | 166 | 11.81 |   12.24 |  96.61\n9. Employers              |  46 |  3.27 |    3.39 | 100.00\n<NA>                      |  49 |  3.49 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\n# # base survey\n# data_arg_svy <- as_survey_design(data_arg, weights = rake_wb2)\n# \n# # Tabla de frecuencias ponderadas\n# wright_freq_5 <- data_arg_svy %>%\n#   group_by(wrightclass1_reduced) %>%\n#   summarise(\n#     freq = survey_mean(vartype = NULL, na.rm = TRUE),\n#     n_unweighted = unweighted(n())\n#   ) %>%\n#   mutate(\n#     freq_pct = freq * 100\n#   )\n# \n# wright_freq_5 %>%\n#   print(n = Inf)\n```\n:::\n\n\n\n\n\n\n### wrightclass2_reduced\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_arg <- data_arg %>%\n  mutate(\n    wrightclass2_reduced = case_when(\n      as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18 == 1 ~ 1,                  # 1. Formal workers\n      as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18 %in% c(2, 3, 4, -999) ~ 2, # 2. Informal workers\n      as.integer(owners2) == 1 & educ <= 8 ~ 3,                                                               # 3. Informal self-employed\n      as.integer(organization_assets) == 3 & as.integer(skills) == 1 ~ 4,                                     # 4. Experts      \n      as.integer(organization_assets) == 2 & as.integer(skills) %in% c(1, 2, 3) ~ 5,                          # 5. Supervisors\n      as.integer(organization_assets) == 1 & as.integer(skills) %in% c(1, 2, 3) ~ 6,                          # 6. Managers\n      as.integer(owners2) == 1 & educ >= 9 ~ 7,                                                               # 7. Petty bourgeoisie\n      as.integer(owners2) == 2 ~ 8,                                                                           # 8. Small employers\n      as.integer(owners2) == 3 ~ 9                                                                            # 9. Capitalists\n    ),\n    wrightclass2_reduced = factor(\n      wrightclass2_reduced,\n      levels = 1:9,\n      labels = c(\n        \"1. Formal workers\",\n        \"2. Informal workers\",\n        \"3. Informal self-employed\",\n        \"4. Experts\",\n        \"5. Supervisors\",\n        \"6. Managers\",\n        \"7. Petty bourgeoisie\",\n        \"8. Small employers\",\n        \"9. Capitalists\"\n      )\n    )\n  ) %>%\n  set_variable_labels(wrightclass2_reduced = \"Wright Class Typology Reduced + Informal (6)\")\n\nfrq(data_arg$wrightclass2_reduced)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nWright Class Typology Reduced + Informal (6) (x) <categorical> \n# total N=1405 valid N=1352 mean=3.61 sd=2.54\n\nValue                     |   N | Raw % | Valid % | Cum. %\n----------------------------------------------------------\n1. Formal workers         | 357 | 25.41 |   26.41 |  26.41\n2. Informal workers       | 248 | 17.65 |   18.34 |  44.75\n3. Informal self-employed | 218 | 15.52 |   16.12 |  60.87\n4. Experts                | 121 |  8.61 |    8.95 |  69.82\n5. Supervisors            |  54 |  3.84 |    3.99 |  73.82\n6. Managers               |  89 |  6.33 |    6.58 |  80.40\n7. Petty bourgeoisie      |  53 |  3.77 |    3.92 |  84.32\n8. Small employers        | 189 | 13.45 |   13.98 |  98.30\n9. Capitalists            |  23 |  1.64 |    1.70 | 100.00\n<NA>                      |  53 |  3.77 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\n# # base survey\n# data_arg_svy <- as_survey_design(data_arg, weights = rake_wb2)\n# \n# # Tabla de frecuencias ponderadas\n# wright_freq_6 <- data_arg_svy %>%\n#   group_by(wrightclass2_reduced) %>%\n#   summarise(\n#     freq = survey_mean(vartype = NULL, na.rm = TRUE),\n#     n_unweighted = unweighted(n())\n#   ) %>%\n#   mutate(\n#     freq_pct = freq * 100\n#   )\n# \n# wright_freq_6 %>%\n#   print(n = Inf)\n```\n:::\n\n\n\n\n\n\n### wrightclass1_reduced2\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_arg <- data_arg %>%\n  mutate(\n    wrightclass1_reduced2 = case_when(\n      as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18_contrato == 1 ~ 1,  # 1. Formal workers\n      as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18_contrato == 0 ~ 2,  # 2. Informal workers\n      as.integer(owners) == 1 & educ <= 8 ~ 3,                                                         # 3. Informal self-employed\n      as.integer(organization_assets) == 3 & as.integer(skills) == 1 ~ 4,                              # 4. Experts\n      as.integer(organization_assets) == 2 & as.integer(skills) %in% c(1, 2, 3) ~ 5,                   # 5. Supervisors\n      as.integer(organization_assets) == 1 & as.integer(skills) %in% c(1, 2, 3) ~ 6,                   # 6. Managers\n      as.integer(owners) == 1 & educ >= 9 ~ 7,                                                         # 7. Petty bourgeoisie\n      as.integer(owners) %in% c(2, 3) ~ 8                                                              # 8. Employers\n    ),\n    wrightclass1_reduced2 = factor(\n      wrightclass1_reduced2,\n      levels = 1:8,\n      labels = c(\n        \"1. Formal workers\",\n        \"2. Informal workers\",\n        \"3. Informal self-employed\",\n        \"4. Experts\",       \n        \"5. Supervisors\",\n        \"6. Managers\",\n        \"7. Petty bourgeoisie\",\n        \"8. Employers\"\n      )\n    )\n  ) %>%\n  set_variable_labels(wrightclass1_reduced2 = \"Wright Class Typology  Reduced (7)\")\n\nfrq(data_arg$wrightclass1_reduced2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nWright Class Typology Reduced (7) (x) <categorical> \n# total N=1405 valid N=1356 mean=3.59 sd=2.50\n\nValue                     |   N | Raw % | Valid % | Cum. %\n----------------------------------------------------------\n1. Formal workers         | 357 | 25.41 |   26.33 |  26.33\n2. Informal workers       | 252 | 17.94 |   18.58 |  44.91\n3. Informal self-employed | 218 | 15.52 |   16.08 |  60.99\n4. Experts                | 121 |  8.61 |    8.92 |  69.91\n5. Supervisors            |  54 |  3.84 |    3.98 |  73.89\n6. Managers               |  89 |  6.33 |    6.56 |  80.46\n7. Petty bourgeoisie      |  53 |  3.77 |    3.91 |  84.37\n8. Employers              | 212 | 15.09 |   15.63 | 100.00\n<NA>                      |  49 |  3.49 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\n# # base survey\n# data_svy <- as_survey_design(data, weights = rake_wb2)\n# \n# # Tabla de frecuencias ponderadas\n# wright_freq_7 <- data_svy %>%\n#   group_by(wrightclass1_reduced2) %>%\n#   summarise(\n#     freq = survey_mean(vartype = NULL, na.rm = TRUE),\n#     n_unweighted = unweighted(n())\n#   ) %>%\n#   mutate(\n#     freq_pct = freq * 100\n#   )\n# \n# wright_freq_7 %>%\n#   print(n = Inf)\n```\n:::\n\n\n\n\n\n\n## Dependent variables\n\n### c01_01\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data_arg$c01_01)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nx <numeric> \n# total N=1405 valid N=1363 mean=6.53 sd=3.21\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    0 |  45 |  3.20 |    3.30 |   3.30\n    1 | 144 | 10.25 |   10.56 |  13.87\n    2 |  40 |  2.85 |    2.93 |  16.80\n    3 |  42 |  2.99 |    3.08 |  19.88\n    4 |  59 |  4.20 |    4.33 |  24.21\n    5 | 163 | 11.60 |   11.96 |  36.17\n    6 |  98 |  6.98 |    7.19 |  43.36\n    7 | 126 |  8.97 |    9.24 |  52.60\n    8 | 182 | 12.95 |   13.35 |  65.96\n    9 |  67 |  4.77 |    4.92 |  70.87\n   10 | 397 | 28.26 |   29.13 | 100.00\n <NA> |  42 |  2.99 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\ndata_arg <- data_arg %>%\n  mutate(\n    c01_01 = case_when(\n      c01_01 %in% c(-888, -999) ~ NA_real_,\n      TRUE ~ as.numeric(c01_01)\n    )\n  ) %>% \n  set_variable_labels(c01_01 = \"Importance of unions: in achieving better wages (c01_01)\")\n\nfrq(data_arg$c01_01)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nImportance of unions: in achieving better wages (c01_01) (x) <numeric> \n# total N=1405 valid N=1363 mean=6.53 sd=3.21\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    0 |  45 |  3.20 |    3.30 |   3.30\n    1 | 144 | 10.25 |   10.56 |  13.87\n    2 |  40 |  2.85 |    2.93 |  16.80\n    3 |  42 |  2.99 |    3.08 |  19.88\n    4 |  59 |  4.20 |    4.33 |  24.21\n    5 | 163 | 11.60 |   11.96 |  36.17\n    6 |  98 |  6.98 |    7.19 |  43.36\n    7 | 126 |  8.97 |    9.24 |  52.60\n    8 | 182 | 12.95 |   13.35 |  65.96\n    9 |  67 |  4.77 |    4.92 |  70.87\n   10 | 397 | 28.26 |   29.13 | 100.00\n <NA> |  42 |  2.99 |    <NA> |   <NA>\n```\n\n\n:::\n:::\n\n\n\n\n\n\n### c01_02\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data_arg$c01_02)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nx <numeric> \n# total N=1405 valid N=1355 mean=6.17 sd=3.24\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    0 |  39 |  2.78 |    2.88 |   2.88\n    1 | 175 | 12.46 |   12.92 |  15.79\n    2 |  51 |  3.63 |    3.76 |  19.56\n    3 |  45 |  3.20 |    3.32 |  22.88\n    4 |  66 |  4.70 |    4.87 |  27.75\n    5 | 189 | 13.45 |   13.95 |  41.70\n    6 | 105 |  7.47 |    7.75 |  49.45\n    7 | 133 |  9.47 |    9.82 |  59.26\n    8 | 138 |  9.82 |   10.18 |  69.45\n    9 |  71 |  5.05 |    5.24 |  74.69\n   10 | 343 | 24.41 |   25.31 | 100.00\n <NA> |  50 |  3.56 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\ndata_arg <- data_arg %>%\n  mutate(\n    c01_02 = case_when(\n      c01_02 %in% c(-888, -999) ~ NA_real_,\n      TRUE ~ as.numeric(c01_02)\n    )\n  ) %>% \n  set_variable_labels(c01_02 = \"Importance of unions: in reducing inequality (c01_02)\")\n\nfrq(data_arg$c01_02)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nImportance of unions: in reducing inequality (c01_02) (x) <numeric> \n# total N=1405 valid N=1355 mean=6.17 sd=3.24\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    0 |  39 |  2.78 |    2.88 |   2.88\n    1 | 175 | 12.46 |   12.92 |  15.79\n    2 |  51 |  3.63 |    3.76 |  19.56\n    3 |  45 |  3.20 |    3.32 |  22.88\n    4 |  66 |  4.70 |    4.87 |  27.75\n    5 | 189 | 13.45 |   13.95 |  41.70\n    6 | 105 |  7.47 |    7.75 |  49.45\n    7 | 133 |  9.47 |    9.82 |  59.26\n    8 | 138 |  9.82 |   10.18 |  69.45\n    9 |  71 |  5.05 |    5.24 |  74.69\n   10 | 343 | 24.41 |   25.31 | 100.00\n <NA> |  50 |  3.56 |    <NA> |   <NA>\n```\n\n\n:::\n:::\n\n\n\n\n\n\n### c01_03\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data_arg$c01_03)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nx <numeric> \n# total N=1405 valid N=1356 mean=6.71 sd=3.28\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    0 |  41 |  2.92 |    3.02 |   3.02\n    1 | 144 | 10.25 |   10.62 |  13.64\n    2 |  41 |  2.92 |    3.02 |  16.67\n    3 |  46 |  3.27 |    3.39 |  20.06\n    4 |  54 |  3.84 |    3.98 |  24.04\n    5 | 142 | 10.11 |   10.47 |  34.51\n    6 |  80 |  5.69 |    5.90 |  40.41\n    7 | 125 |  8.90 |    9.22 |  49.63\n    8 | 148 | 10.53 |   10.91 |  60.55\n    9 |  79 |  5.62 |    5.83 |  66.37\n   10 | 456 | 32.46 |   33.63 | 100.00\n <NA> |  49 |  3.49 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\ndata_arg <- data_arg %>%\n  mutate(\n    c01_03 = case_when(\n      c01_03 %in% c(-888, -999) ~ NA_real_,\n      TRUE ~ as.numeric(c01_03)\n    )\n  ) %>% \n  set_variable_labels(c01_03 = \"Importance of unions: in protecting women workers' rights (c01_03)\")\n\nfrq(data_arg$c01_03)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nImportance of unions: in protecting women workers' rights (c01_03) (x) <numeric> \n# total N=1405 valid N=1356 mean=6.71 sd=3.28\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    0 |  41 |  2.92 |    3.02 |   3.02\n    1 | 144 | 10.25 |   10.62 |  13.64\n    2 |  41 |  2.92 |    3.02 |  16.67\n    3 |  46 |  3.27 |    3.39 |  20.06\n    4 |  54 |  3.84 |    3.98 |  24.04\n    5 | 142 | 10.11 |   10.47 |  34.51\n    6 |  80 |  5.69 |    5.90 |  40.41\n    7 | 125 |  8.90 |    9.22 |  49.63\n    8 | 148 | 10.53 |   10.91 |  60.55\n    9 |  79 |  5.62 |    5.83 |  66.37\n   10 | 456 | 32.46 |   33.63 | 100.00\n <NA> |  49 |  3.49 |    <NA> |   <NA>\n```\n\n\n:::\n:::\n\n\n\n\n\n\n### c01_04\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data_arg$c01_04)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nx <numeric> \n# total N=1405 valid N=1358 mean=6.15 sd=3.49\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    0 |  56 |  3.99 |    4.12 |   4.12\n    1 | 200 | 14.23 |   14.73 |  18.85\n    2 |  46 |  3.27 |    3.39 |  22.24\n    3 |  60 |  4.27 |    4.42 |  26.66\n    4 |  73 |  5.20 |    5.38 |  32.03\n    5 | 151 | 10.75 |   11.12 |  43.15\n    6 |  71 |  5.05 |    5.23 |  48.38\n    7 | 103 |  7.33 |    7.58 |  55.96\n    8 | 117 |  8.33 |    8.62 |  64.58\n    9 |  65 |  4.63 |    4.79 |  69.37\n   10 | 416 | 29.61 |   30.63 | 100.00\n <NA> |  47 |  3.35 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\ndata_arg <- data_arg %>%\n  mutate(\n    c01_04 = case_when(\n      c01_04 %in% c(-888, -999) ~ NA_real_,\n      TRUE ~ as.numeric(c01_04)\n    )\n  ) %>% \n  set_variable_labels(c01_04 = \"Importance of unions: in protecting informal workers' rights (c01_04)\")\n\nfrq(data_arg$c01_04)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nImportance of unions: in protecting informal workers' rights (c01_04) (x) <numeric> \n# total N=1405 valid N=1358 mean=6.15 sd=3.49\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    0 |  56 |  3.99 |    4.12 |   4.12\n    1 | 200 | 14.23 |   14.73 |  18.85\n    2 |  46 |  3.27 |    3.39 |  22.24\n    3 |  60 |  4.27 |    4.42 |  26.66\n    4 |  73 |  5.20 |    5.38 |  32.03\n    5 | 151 | 10.75 |   11.12 |  43.15\n    6 |  71 |  5.05 |    5.23 |  48.38\n    7 | 103 |  7.33 |    7.58 |  55.96\n    8 | 117 |  8.33 |    8.62 |  64.58\n    9 |  65 |  4.63 |    4.79 |  69.37\n   10 | 416 | 29.61 |   30.63 | 100.00\n <NA> |  47 |  3.35 |    <NA> |   <NA>\n```\n\n\n:::\n:::\n\n\n\n\n\n\n### c01_05\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data_arg$c01_05)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nx <numeric> \n# total N=1405 valid N=1345 mean=6.32 sd=3.32\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    0 |  46 |  3.27 |    3.42 |   3.42\n    1 | 161 | 11.46 |   11.97 |  15.39\n    2 |  46 |  3.27 |    3.42 |  18.81\n    3 |  55 |  3.91 |    4.09 |  22.90\n    4 |  68 |  4.84 |    5.06 |  27.96\n    5 | 173 | 12.31 |   12.86 |  40.82\n    6 |  88 |  6.26 |    6.54 |  47.36\n    7 | 108 |  7.69 |    8.03 |  55.39\n    8 | 131 |  9.32 |    9.74 |  65.13\n    9 |  73 |  5.20 |    5.43 |  70.56\n   10 | 396 | 28.19 |   29.44 | 100.00\n <NA> |  60 |  4.27 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\ndata_arg <- data_arg %>%\n  mutate(\n    c01_05 = case_when(\n      c01_05 %in% c(-888, -999) ~ NA_real_,\n      TRUE ~ as.numeric(c01_05)\n    )\n  ) %>% \n  set_variable_labels(c01_05 = \"Importance of unions: in helping work-family balance (c01_05)\")\n\nfrq(data_arg$c01_05)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nImportance of unions: in helping work-family balance (c01_05) (x) <numeric> \n# total N=1405 valid N=1345 mean=6.32 sd=3.32\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    0 |  46 |  3.27 |    3.42 |   3.42\n    1 | 161 | 11.46 |   11.97 |  15.39\n    2 |  46 |  3.27 |    3.42 |  18.81\n    3 |  55 |  3.91 |    4.09 |  22.90\n    4 |  68 |  4.84 |    5.06 |  27.96\n    5 | 173 | 12.31 |   12.86 |  40.82\n    6 |  88 |  6.26 |    6.54 |  47.36\n    7 | 108 |  7.69 |    8.03 |  55.39\n    8 | 131 |  9.32 |    9.74 |  65.13\n    9 |  73 |  5.20 |    5.43 |  70.56\n   10 | 396 | 28.19 |   29.44 | 100.00\n <NA> |  60 |  4.27 |    <NA> |   <NA>\n```\n\n\n:::\n:::\n\n\n\n\n\n\n### c01_06\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data_arg$c01_06)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nx <numeric> \n# total N=1405 valid N=1345 mean=6.03 sd=3.42\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    0 |  53 |  3.77 |    3.94 |   3.94\n    1 | 195 | 13.88 |   14.50 |  18.44\n    2 |  48 |  3.42 |    3.57 |  22.01\n    3 |  66 |  4.70 |    4.91 |  26.91\n    4 |  66 |  4.70 |    4.91 |  31.82\n    5 | 169 | 12.03 |   12.57 |  44.39\n    6 |  93 |  6.62 |    6.91 |  51.30\n    7 |  98 |  6.98 |    7.29 |  58.59\n    8 | 117 |  8.33 |    8.70 |  67.29\n    9 |  68 |  4.84 |    5.06 |  72.34\n   10 | 372 | 26.48 |   27.66 | 100.00\n <NA> |  60 |  4.27 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\ndata_arg <- data_arg %>%\n  mutate(\n    c01_06 = case_when(\n      c01_06 %in% c(-888, -999) ~ NA_real_,\n      TRUE ~ as.numeric(c01_06)\n    )\n  ) %>% \n  set_variable_labels(c01_06 = \"Importance of unions: in helping the economy grow (c01_06)\")\n\nfrq(data_arg$c01_06)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nImportance of unions: in helping the economy grow (c01_06) (x) <numeric> \n# total N=1405 valid N=1345 mean=6.03 sd=3.42\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    0 |  53 |  3.77 |    3.94 |   3.94\n    1 | 195 | 13.88 |   14.50 |  18.44\n    2 |  48 |  3.42 |    3.57 |  22.01\n    3 |  66 |  4.70 |    4.91 |  26.91\n    4 |  66 |  4.70 |    4.91 |  31.82\n    5 | 169 | 12.03 |   12.57 |  44.39\n    6 |  93 |  6.62 |    6.91 |  51.30\n    7 |  98 |  6.98 |    7.29 |  58.59\n    8 | 117 |  8.33 |    8.70 |  67.29\n    9 |  68 |  4.84 |    5.06 |  72.34\n   10 | 372 | 26.48 |   27.66 | 100.00\n <NA> |  60 |  4.27 |    <NA> |   <NA>\n```\n\n\n:::\n:::\n\n\n\n\n\n\n### c07_03_dummy\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data_arg$c07_03)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nx <numeric> \n# total N=1405 valid N=1311 mean=2.97 sd=1.19\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    1 | 162 | 11.53 |   12.36 |  12.36\n    2 | 354 | 25.20 |   27.00 |  39.36\n    3 | 270 | 19.22 |   20.59 |  59.95\n    4 | 411 | 29.25 |   31.35 |  91.30\n    5 | 114 |  8.11 |    8.70 | 100.00\n <NA> |  94 |  6.69 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\ndata_arg <- data_arg %>%\n  mutate(\n    c07_03_dummy = case_when(\n      c07_03 %in% c(4, 5) ~ 1,\n      c07_03 %in% c(1, 2, 3, NA) ~ 0\n    ))%>% \n  set_variable_labels(c07_03_dummy = \"Level of agreement: Implement laws to give unions more bargaining power (1 = agree)\") %>% \n  set_value_labels(c07_03_dummy = c(\n    \"Agree\" = 1,\n    \"Disagree\" = 0\n  ))\n\nfrq(data_arg$c07_03_dummy)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nLevel of agreement: Implement laws to give unions more bargaining power (1 = agree) (x) <numeric> \n# total N=1405 valid N=1405 mean=0.37 sd=0.48\n\nValue |    Label |   N | Raw % | Valid % | Cum. %\n-------------------------------------------------\n    0 | Disagree | 880 | 62.63 |   62.63 |  62.63\n    1 |    Agree | 525 | 37.37 |   37.37 | 100.00\n <NA> |     <NA> |   0 |  0.00 |    <NA> |   <NA>\n```\n\n\n:::\n:::\n\n\n\n\n\n\n### b29_dummy\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data_arg$b29)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nx <numeric> \n# total N=1405 valid N=1405 mean=2.84 sd=1.70\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    1 | 486 | 34.59 |   34.59 |  34.59\n    2 | 194 | 13.81 |   13.81 |  48.40\n    3 | 181 | 12.88 |   12.88 |  61.28\n    4 | 239 | 17.01 |   17.01 |  78.29\n    5 | 232 | 16.51 |   16.51 |  94.80\n    6 |  55 |  3.91 |    3.91 |  98.72\n    7 |  18 |  1.28 |    1.28 | 100.00\n <NA> |   0 |  0.00 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\ndata_arg <- data_arg %>%\n  mutate(\n    b29_dummy = case_when(\n      b29 %in% c(3, 4, 5) ~ 1,\n      b29 %in% c(1, 2, 6, 7) ~ 0\n    ))%>% \n  set_variable_labels(b29_dummy = \"Possibility of joining a union (1 = yes)\") %>% \n  set_value_labels(b29_dummy = c(\n    \"Yes\" = 1,\n    \"No\" = 0\n  ))\n\nfrq(data_arg$b29_dummy)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nPossibility of joining a union (1 = yes) (x) <numeric> \n# total N=1405 valid N=1405 mean=0.46 sd=0.50\n\nValue | Label |   N | Raw % | Valid % | Cum. %\n----------------------------------------------\n    0 |    No | 753 | 53.59 |   53.59 |  53.59\n    1 |   Yes | 652 | 46.41 |   46.41 | 100.00\n <NA> |  <NA> |   0 |  0.00 |    <NA> |   <NA>\n```\n\n\n:::\n:::\n\n\n\n\n\n\n### b29_dummy2\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_arg <- data_arg %>%\n  mutate(\n    b29_dummy2 = case_when(\n      b29 %in% c(4, 5) ~ 1,\n      b29 %in% c(1, 2, 3, 6, 7) ~ 0\n    ))%>% \n  set_variable_labels(b29_dummy2 = \"Possibility of joining a union (1 = yes) (2)\") %>% \n  set_value_labels(b29_dummy2 = c(\n    \"Yes\" = 1,\n    \"No\" = 0\n  ))\n\nfrq(data_arg$b29_dummy2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nPossibility of joining a union (1 = yes) (2) (x) <numeric> \n# total N=1405 valid N=1405 mean=0.34 sd=0.47\n\nValue | Label |   N | Raw % | Valid % | Cum. %\n----------------------------------------------\n    0 |    No | 934 | 66.48 |   66.48 |  66.48\n    1 |   Yes | 471 | 33.52 |   33.52 | 100.00\n <NA> |  <NA> |   0 |  0.00 |    <NA> |   <NA>\n```\n\n\n:::\n:::\n\n\n\n\n\n\n## Controls\n\n### female\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data_arg$sexo)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nx <numeric> \n# total N=1405 valid N=1405 mean=1.51 sd=0.50\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    1 | 693 | 49.32 |   49.32 |  49.32\n    2 | 712 | 50.68 |   50.68 | 100.00\n <NA> |   0 |  0.00 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\ndata_arg <- data_arg %>%\n  mutate(\n    female = case_when(\n      sexo == 1 ~ 0,\n      sexo == 2 ~ 1\n    )\n  ) %>% \n  set_variable_labels(female = \"Gender (1 = female)\") %>% \n  set_value_labels(female = c(\n    \"Female\" = 1, \n    \"Male\" = 0\n  ))\n\nfrq(data_arg$female)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nGender (1 = female) (x) <numeric> \n# total N=1405 valid N=1405 mean=0.51 sd=0.50\n\nValue |  Label |   N | Raw % | Valid % | Cum. %\n-----------------------------------------------\n    0 |   Male | 693 | 49.32 |   49.32 |  49.32\n    1 | Female | 712 | 50.68 |   50.68 | 100.00\n <NA> |   <NA> |   0 |  0.00 |    <NA> |   <NA>\n```\n\n\n:::\n:::\n\n\n\n\n\n\n### age\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndescr(data_arg$edad)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n## Basic descriptive statistics\n\n var    type label    n NA.prc  mean    sd   se md trimmed     range iqr skew\n  dd numeric    dd 1405      0 41.39 13.23 0.35 41   40.93 83 (0-83)  20 0.27\n```\n\n\n:::\n\n```{.r .cell-code}\nfrq(data_arg$edad)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nx <numeric> \n# total N=1405 valid N=1405 mean=41.39 sd=13.23\n\nValue |  N | Raw % | Valid % | Cum. %\n-------------------------------------\n    0 |  2 |  0.14 |    0.14 |   0.14\n    6 |  1 |  0.07 |    0.07 |   0.21\n   16 |  1 |  0.07 |    0.07 |   0.28\n   17 |  1 |  0.07 |    0.07 |   0.36\n   18 |  7 |  0.50 |    0.50 |   0.85\n   19 | 14 |  1.00 |    1.00 |   1.85\n   20 | 16 |  1.14 |    1.14 |   2.99\n   21 | 22 |  1.57 |    1.57 |   4.56\n   22 | 23 |  1.64 |    1.64 |   6.19\n   23 | 23 |  1.64 |    1.64 |   7.83\n   24 | 32 |  2.28 |    2.28 |  10.11\n   25 | 37 |  2.63 |    2.63 |  12.74\n   26 | 31 |  2.21 |    2.21 |  14.95\n   27 | 28 |  1.99 |    1.99 |  16.94\n   28 | 31 |  2.21 |    2.21 |  19.15\n   29 | 33 |  2.35 |    2.35 |  21.49\n   30 | 37 |  2.63 |    2.63 |  24.13\n   31 | 38 |  2.70 |    2.70 |  26.83\n   32 | 30 |  2.14 |    2.14 |  28.97\n   33 | 27 |  1.92 |    1.92 |  30.89\n   34 | 38 |  2.70 |    2.70 |  33.59\n   35 | 58 |  4.13 |    4.13 |  37.72\n   36 | 32 |  2.28 |    2.28 |  40.00\n   37 | 34 |  2.42 |    2.42 |  42.42\n   38 | 33 |  2.35 |    2.35 |  44.77\n   39 | 28 |  1.99 |    1.99 |  46.76\n   40 | 35 |  2.49 |    2.49 |  49.25\n   41 | 34 |  2.42 |    2.42 |  51.67\n   42 | 37 |  2.63 |    2.63 |  54.31\n   43 | 45 |  3.20 |    3.20 |  57.51\n   44 | 35 |  2.49 |    2.49 |  60.00\n   45 | 47 |  3.35 |    3.35 |  63.35\n   46 | 28 |  1.99 |    1.99 |  65.34\n   47 | 30 |  2.14 |    2.14 |  67.47\n   48 | 36 |  2.56 |    2.56 |  70.04\n   49 | 23 |  1.64 |    1.64 |  71.67\n   50 | 31 |  2.21 |    2.21 |  73.88\n   51 | 19 |  1.35 |    1.35 |  75.23\n   52 | 32 |  2.28 |    2.28 |  77.51\n   53 | 25 |  1.78 |    1.78 |  79.29\n   54 | 33 |  2.35 |    2.35 |  81.64\n   55 | 27 |  1.92 |    1.92 |  83.56\n   56 | 31 |  2.21 |    2.21 |  85.77\n   57 | 21 |  1.49 |    1.49 |  87.26\n   58 | 26 |  1.85 |    1.85 |  89.11\n   59 | 19 |  1.35 |    1.35 |  90.46\n   60 | 17 |  1.21 |    1.21 |  91.67\n   61 | 13 |  0.93 |    0.93 |  92.60\n   62 | 15 |  1.07 |    1.07 |  93.67\n   63 | 12 |  0.85 |    0.85 |  94.52\n   64 | 18 |  1.28 |    1.28 |  95.80\n   65 | 10 |  0.71 |    0.71 |  96.51\n   66 |  4 |  0.28 |    0.28 |  96.80\n   67 |  8 |  0.57 |    0.57 |  97.37\n   68 |  9 |  0.64 |    0.64 |  98.01\n   69 |  3 |  0.21 |    0.21 |  98.22\n   70 |  3 |  0.21 |    0.21 |  98.43\n   71 |  4 |  0.28 |    0.28 |  98.72\n   72 |  3 |  0.21 |    0.21 |  98.93\n   73 |  1 |  0.07 |    0.07 |  99.00\n   74 |  4 |  0.28 |    0.28 |  99.29\n   76 |  2 |  0.14 |    0.14 |  99.43\n   77 |  3 |  0.21 |    0.21 |  99.64\n   78 |  4 |  0.28 |    0.28 |  99.93\n   83 |  1 |  0.07 |    0.07 | 100.00\n <NA> |  0 |  0.00 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\ndata_arg <- data_arg %>%\n  mutate(\n    age = case_when(\n      edad %in% c(-888, -999) ~ NA_real_,\n      TRUE ~ as.numeric(edad)\n    )\n  ) %>% \n  set_variable_labels(age = \"Age\")\n\ndescr(data_arg$age)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n## Basic descriptive statistics\n\n var    type label    n NA.prc  mean    sd   se md trimmed     range iqr skew\n  dd numeric   Age 1405      0 41.39 13.23 0.35 41   40.93 83 (0-83)  20 0.27\n```\n\n\n:::\n:::\n\n\n\n\n\n\n### sector\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data_arg$a07)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nEmployment situation (a07) (x) <categorical> \n# total N=1405 valid N=1405 mean=3.18 sd=1.17\n\nValue                                                 |   N | Raw % | Valid % | Cum. %\n--------------------------------------------------------------------------------------\n1. Patrón(a) o empleador(a)                           |  50 |  3.56 |    3.56 |   3.56\n2. Trabajador(a) por cuenta propia                    | 436 | 31.03 |   31.03 |  34.59\n3. Empleado(a) u obrero(a) del sector público         | 298 | 21.21 |   21.21 |  55.80\n4. Empleado(a) u obrero(a) del sector privado         | 528 | 37.58 |   37.58 |  93.38\n5. Servicio doméstico fijo o por horas                |  51 |  3.63 |    3.63 |  97.01\n6. FF.AA. y de seguridad                              |  11 |  0.78 |    0.78 |  97.79\n7. Para el negocio, empresa, actividad de un familiar |  31 |  2.21 |    2.21 | 100.00\n<NA>                                                  |   0 |  0.00 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\ndata_arg <- data_arg %>%\n  mutate(\n    sector=case_when(\n      as.numeric(a07) %in% c(1, 2, 4, 5, 7) ~ 1,\n      as.numeric(a07) %in% c(3, 6) ~ 0\n    ))%>% \n  set_variable_labels(sector = \"Sector (1 = private)\") %>% \n  set_value_labels(sector = c(\n    \"Private\" = 1,\n    \"Public\" = 0\n  ))\n\nfrq(data_arg$sector)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSector (1 = private) (x) <numeric> \n# total N=1405 valid N=1405 mean=0.78 sd=0.41\n\nValue |   Label |    N | Raw % | Valid % | Cum. %\n-------------------------------------------------\n    0 |  Public |  309 | 21.99 |   21.99 |  21.99\n    1 | Private | 1096 | 78.01 |   78.01 | 100.00\n <NA> |    <NA> |    0 |  0.00 |    <NA> |   <NA>\n```\n\n\n:::\n:::\n\n\n\n\n\n\n### rama\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data_arg$a25) # 19 + 46 NS/NR y 603 otro\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nx <numeric> \n# total N=1405 valid N=1405 mean=36.49 sd=140.23\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    1 |  21 |  1.49 |    1.49 |   1.49\n    2 |   4 |  0.28 |    0.28 |   1.78\n    3 | 129 |  9.18 |    9.18 |  10.96\n    4 |  22 |  1.57 |    1.57 |  12.53\n    5 |  12 |  0.85 |    0.85 |  13.38\n    6 |  56 |  3.99 |    3.99 |  17.37\n    7 | 132 |  9.40 |    9.40 |  26.76\n    8 |  45 |  3.20 |    3.20 |  29.96\n    9 |  27 |  1.92 |    1.92 |  31.89\n   10 |  40 |  2.85 |    2.85 |  34.73\n   11 |  30 |  2.14 |    2.14 |  36.87\n   12 |   7 |  0.50 |    0.50 |  37.37\n   13 |  47 |  3.35 |    3.35 |  40.71\n   14 |  29 |  2.06 |    2.06 |  42.78\n   15 | 107 |  7.62 |    7.62 |  50.39\n   16 | 150 | 10.68 |   10.68 |  61.07\n   17 | 105 |  7.47 |    7.47 |  68.54\n   18 |  40 |  2.85 |    2.85 |  71.39\n   19 | 118 |  8.40 |    8.40 |  79.79\n   20 |  15 |  1.07 |    1.07 |  80.85\n   21 |   3 |  0.21 |    0.21 |  81.07\n   22 | 229 | 16.30 |   16.30 |  97.37\n  888 |  37 |  2.63 |    2.63 | 100.00\n <NA> |   0 |  0.00 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\n# frq(data_arg$a25_esp_rec) # 603 válidos\n# \n# data_arg$rama <- ifelse(\n#   data_arg$a25 == 22,\n#   data_arg$a25_esp_rec,  # Usar el valor de \"a25_esp\" si la categoría es 22\n#   data_arg$a25)          # En los demás casos, mantener el valor original de \"a25\"\n\ndata_arg$rama <- data_arg$a25\nfrq(data_arg$rama)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nx <numeric> \n# total N=1405 valid N=1405 mean=36.49 sd=140.23\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    1 |  21 |  1.49 |    1.49 |   1.49\n    2 |   4 |  0.28 |    0.28 |   1.78\n    3 | 129 |  9.18 |    9.18 |  10.96\n    4 |  22 |  1.57 |    1.57 |  12.53\n    5 |  12 |  0.85 |    0.85 |  13.38\n    6 |  56 |  3.99 |    3.99 |  17.37\n    7 | 132 |  9.40 |    9.40 |  26.76\n    8 |  45 |  3.20 |    3.20 |  29.96\n    9 |  27 |  1.92 |    1.92 |  31.89\n   10 |  40 |  2.85 |    2.85 |  34.73\n   11 |  30 |  2.14 |    2.14 |  36.87\n   12 |   7 |  0.50 |    0.50 |  37.37\n   13 |  47 |  3.35 |    3.35 |  40.71\n   14 |  29 |  2.06 |    2.06 |  42.78\n   15 | 107 |  7.62 |    7.62 |  50.39\n   16 | 150 | 10.68 |   10.68 |  61.07\n   17 | 105 |  7.47 |    7.47 |  68.54\n   18 |  40 |  2.85 |    2.85 |  71.39\n   19 | 118 |  8.40 |    8.40 |  79.79\n   20 |  15 |  1.07 |    1.07 |  80.85\n   21 |   3 |  0.21 |    0.21 |  81.07\n   22 | 229 | 16.30 |   16.30 |  97.37\n  888 |  37 |  2.63 |    2.63 | 100.00\n <NA> |   0 |  0.00 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\ndata_arg <- data_arg %>% \n  mutate(\n    rama = factor(\n      case_when(\n        rama==1~\"A\",\n        rama==2|rama==3~\"BC\",\n        rama==4|rama==5|rama==6~\"DEF\",\n        rama==7|rama==8~\"GI\",\n        rama==9~\"H\",\n        rama==10|rama==11|rama==12|rama==13|rama==14~\"JKLMN\",\n        rama==15~\"O\",\n        rama==16|rama==17~\"PQ\",\n        rama==18|rama==19|rama==20~\"RSU\",\n        rama==21~\"T\"\n        )\n      )\n    ) %>% \n  set_variable_labels(rama = \"Rama\")\n\nfrq(data_arg$rama)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRama (x) <categorical> \n# total N=1405 valid N=1139 mean=5.88 sd=2.46\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\nA     |  21 |  1.49 |    1.84 |   1.84\nBC    | 133 |  9.47 |   11.68 |  13.52\nDEF   |  90 |  6.41 |    7.90 |  21.42\nGI    | 177 | 12.60 |   15.54 |  36.96\nH     |  27 |  1.92 |    2.37 |  39.33\nJKLMN | 153 | 10.89 |   13.43 |  52.77\nO     | 107 |  7.62 |    9.39 |  62.16\nPQ    | 255 | 18.15 |   22.39 |  84.55\nRSU   | 173 | 12.31 |   15.19 |  99.74\nT     |   3 |  0.21 |    0.26 | 100.00\n<NA>  | 266 | 18.93 |    <NA> |   <NA>\n```\n\n\n:::\n:::\n\n\n\n\n\n\n### unions\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# frq(data_arg$b19)\n# \n# # Sindicatos en empresas\n# data_arg <- data_arg %>%\n#   mutate(\n#     unions=case_when(\n#       as.numeric(relation_mop) %in% c(1, 2) ~ NA_real_,\n#       as.numeric(relation_mop) == 3 & b19 == 1 ~ 1,\n#       as.numeric(relation_mop) == 3 & b19 %in% c(2, -888, -999) ~ 0,\n#       TRUE ~ NA_real_\n#     )\n#   ) %>% \n#   set_variable_labels(unions = \"Unions in company (1 = yes)\") %>%\n#   set_value_labels(unions = c(\n#     \"Yes\" = 1,\n#     \"No\" = 0\n#   ))\n# \n# frq(data_arg$unions)\n```\n:::\n\n\n\n\n\n\n### union_member\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data_arg$b21)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nx <numeric> \n# total N=1405 valid N=546 mean=2.30 sd=0.86\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    1 | 125 |  8.90 |   22.89 |  22.89\n    2 | 145 | 10.32 |   26.56 |  49.45\n    3 | 267 | 19.00 |   48.90 |  98.35\n    4 |   4 |  0.28 |    0.73 |  99.08\n    5 |   5 |  0.36 |    0.92 | 100.00\n <NA> | 859 | 61.14 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\n# Afiliación sindical\ndata_arg <- data_arg %>%\n  mutate(\n    union_member = case_when(\n      as.numeric(relation_mop) %in% c(1, 2) ~ 0,\n      as.numeric(relation_mop) == 3 & b21 %in% c(1, 2) ~ 1,\n      as.numeric(relation_mop) == 3 & b21 %in% c(3, 4, 5, NA) ~ 0,\n      # unions == 0 ~ 0,\n      TRUE ~ NA_real_\n    )\n  ) %>%\n  set_variable_labels(union_member = \"Union membership (1 = yes)\") %>%\n  set_value_labels(union_member = c(\n    \"Yes\" = 1,\n    \"No\" = 0\n  ))\n\nfrq(data_arg$union_member)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nUnion membership (1 = yes) (x) <numeric> \n# total N=1405 valid N=1405 mean=0.19 sd=0.39\n\nValue | Label |    N | Raw % | Valid % | Cum. %\n-----------------------------------------------\n    0 |    No | 1135 | 80.78 |   80.78 |  80.78\n    1 |   Yes |  270 | 19.22 |   19.22 | 100.00\n <NA> |  <NA> |    0 |  0.00 |    <NA> |   <NA>\n```\n\n\n:::\n:::\n\n\n\n\n\n\n### pol_id\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data_arg$c08)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nx <numeric> \n# total N=1405 valid N=1405 mean=33.69 sd=153.70\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    0 |  80 |  5.69 |    5.69 |   5.69\n    1 |  26 |  1.85 |    1.85 |   7.54\n    2 |  70 |  4.98 |    4.98 |  12.53\n    3 | 112 |  7.97 |    7.97 |  20.50\n    4 | 124 |  8.83 |    8.83 |  29.32\n    5 | 434 | 30.89 |   30.89 |  60.21\n    6 |  58 |  4.13 |    4.13 |  64.34\n    7 |  61 |  4.34 |    4.34 |  68.68\n    8 |  53 |  3.77 |    3.77 |  72.46\n    9 |  10 |  0.71 |    0.71 |  73.17\n   10 |  52 |  3.70 |    3.70 |  76.87\n   11 |  92 |  6.55 |    6.55 |  83.42\n   12 | 189 | 13.45 |   13.45 |  96.87\n  888 |  44 |  3.13 |    3.13 | 100.00\n <NA> |   0 |  0.00 |    <NA> |   <NA>\n```\n\n\n:::\n\n```{.r .cell-code}\ndata_arg <- data_arg %>%\n  mutate(\n    pol_id = case_when(\n      c08 %in% c(0, 1, 2, 3) ~ 1,\n      c08 %in% c(4, 5, 6) ~ 2,\n      c08 %in% c(7, 8, 9, 10) ~ 3,\n      c08 %in% c(11, 12, 888) ~ 4,\n      TRUE ~ NA_real_\n    ),\n    pol_id = factor(\n      pol_id, \n      levels = 1:4, \n      labels = c(\n        \"Left\", \n        \"Center\", \n        \"Right\", \n        \"Not identified\"\n        ) \n      )\n    ) %>%\n  set_variable_labels(pol_id = \"Political identification\") \n\nfrq(data_arg$pol_id)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nPolitical identification (x) <categorical> \n# total N=1405 valid N=1405 mean=2.38 sd=1.05\n\nValue          |   N | Raw % | Valid % | Cum. %\n-----------------------------------------------\nLeft           | 288 | 20.50 |   20.50 |  20.50\nCenter         | 616 | 43.84 |   43.84 |  64.34\nRight          | 176 | 12.53 |   12.53 |  76.87\nNot identified | 325 | 23.13 |   23.13 | 100.00\n<NA>           |   0 |  0.00 |    <NA> |   <NA>\n```\n\n\n:::\n:::\n\n\n\n\n\n\n## Guardar datos\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsave(data_arg, file=\"output/data/datos-clases-arg.Rdata\")\nsaveRDS(data_arg, file=\"output/data/datos-clases-arg.rds\")\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}