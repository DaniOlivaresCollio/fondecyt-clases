{
  "hash": "4657c344065a31f8d8c55c110e789db0",
  "result": {
    "markdown": "# Procesamiento Data Conclat\n\n## Preparación\n\n\n::: {.cell}\n\n:::\n\n\n### Cargar datos\n\n\n::: {.cell}\n\n```{.r .cell-code}\nload(\"input/data/datos-conclat.Rdata\")\ndata_raw <- data\n```\n:::\n\n\n### Selección de Variables\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- data_raw %>% \n  select(id,\n         rake_wb2,\n         # Relación con los medios de producción\n         a07,\n         a25, a25_esp, a25_esp_rec,\n         a26,\n         a27,\n         # Skills\n         a02,a02_rec,a03,a03_rec,\n         ciuo08_clio = ciuo08,\n         e05,\n         # Autoridad / orgnización\n         a15,\n         a16,\n         a17_01,a17_02,a17_03,a17_04,a17_05,a17_06,\n         # formalidad\n         a06,                                                  # boleta\n         a10,                                                  # inicio de actividades\n         a18,                                                  # contrato de trabajo escrito firmado\n         # Dependent variables\n         c01_01, c01_02, c01_03, c01_04, c01_05, c01_06,       # importancia de sindicatos\n         c07_03, \n         b29,\n         # Controls\n         sexo = e01,\n         edad = e02,\n         b19,                                                  # hay sindicato en empresa\n         b21,                                                  # afiliacion sindical\n         c08                                                   # political id\n         )# %>% \n  #sjlabelled::set_na(.,na=c(-999,-888,-777))\n```\n:::\n\n\n## Procesamiento\n\n### relation_mop\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Situación empleo\ndata <- data %>%\n  mutate(\n    a07 = factor(\n      as.numeric(a07),\n      levels = 1:9,\n      labels = c(\n        \"1. Patrón(a) o empleador(a)\",\n        \"2. Trabajador(a) por cuenta propia\",\n        \"3. Empleado(a) u obrero(a) del sector público (Gobierno Central o Municipal)\",\n        \"4. Empleado(a) u obrero(a) de empresas públicas\",\n        \"5. Empleado(a) u obrero(a) del sector privado\",\n        \"6. Servicio doméstico puertas adentro\",\n        \"7. Servicio doméstico puertas afuera\",\n        \"8. FF.AA. y del Orden\",\n        \"9. Familiar no remunerado\"\n      )\n    )\n  ) %>%\n  set_variable_labels(a07 = \"Employment situation (a07)\")\n\nfrq(data$a07)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nEmployment situation (a07) (x) <categorical> \n# total N=3048 valid N=3048 mean=3.79 sd=1.67\n\nValue                                                                        |    N | Raw % | Valid % | Cum. %\n--------------------------------------------------------------------------------------------------------------\n1. Patrón(a) o empleador(a)                                                  |  345 | 11.32 |   11.32 |  11.32\n2. Trabajador(a) por cuenta propia                                           |  598 | 19.62 |   19.62 |  30.94\n3. Empleado(a) u obrero(a) del sector público (Gobierno Central o Municipal) |  251 |  8.23 |    8.23 |  39.17\n4. Empleado(a) u obrero(a) de empresas públicas                              |  337 | 11.06 |   11.06 |  50.23\n5. Empleado(a) u obrero(a) del sector privado                                | 1370 | 44.95 |   44.95 |  95.18\n6. Servicio doméstico puertas adentro                                        |   21 |  0.69 |    0.69 |  95.87\n7. Servicio doméstico puertas afuera                                         |  101 |  3.31 |    3.31 |  99.18\n8. FF.AA. y del Orden                                                        |   13 |  0.43 |    0.43 |  99.61\n9. Familiar no remunerado                                                    |   12 |  0.39 |    0.39 | 100.00\n<NA>                                                                         |    0 |  0.00 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\ndata <- data %>%\n  mutate(\n    relation_mop = case_when(\n      as_numeric(a07) == 1 ~ 1,\n      as_numeric(a07) == 2 ~ 2,\n      as_numeric(a07) >= 3 ~ 3,\n      TRUE ~ NA_real_\n      ),\n    relation_mop = factor(\n      relation_mop,\n      levels = 1:3,\n      labels = c(\n        \"1. Employers\",\n        \"2. Self-Employed\",\n        \"3. Salaried\"\n      )\n    )\n  ) %>%\n  set_variable_labels(relation_mop = \"Relation with Means of Production\")\n\nfrq(data$relation_mop)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRelation with Means of Production (x) <categorical> \n# total N=3048 valid N=3048 mean=2.58 sd=0.69\n\nValue            |    N | Raw % | Valid % | Cum. %\n--------------------------------------------------\n1. Employers     |  345 | 11.32 |   11.32 |  11.32\n2. Self-Employed |  598 | 19.62 |   19.62 |  30.94\n3. Salaried      | 2105 | 69.06 |   69.06 | 100.00\n<NA>             |    0 |  0.00 |    <NA> |   <NA>\n```\n:::\n:::\n\n\n### company_size\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data$a26)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nx <numeric> \n# total N=3048 valid N=3048 mean=-73.62 sd=251.41\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n -999 |   8 |  0.26 |    0.26 |   0.26\n -888 | 255 |  8.37 |    8.37 |   8.63\n    1 | 783 | 25.69 |   25.69 |  34.32\n    2 | 486 | 15.94 |   15.94 |  50.26\n    3 | 277 |  9.09 |    9.09 |  59.35\n    4 | 316 | 10.37 |   10.37 |  69.72\n    5 | 291 |  9.55 |    9.55 |  79.27\n    6 | 183 |  6.00 |    6.00 |  85.27\n    7 | 150 |  4.92 |    4.92 |  90.19\n    8 | 113 |  3.71 |    3.71 |  93.90\n    9 | 186 |  6.10 |    6.10 | 100.00\n <NA> |   0 |  0.00 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\ndata <- data %>%\n  mutate(\n    company_size = case_when(\n      a26 %in% c(1) ~ 1,\n      a26 %in% c(2, 3) ~ 2,\n      a26 %in% c(4, 5) ~ 3,\n      a26 %in% c(6, 7) ~ 4,\n      a26 %in% c(8, 9) ~ 5,\n      TRUE ~ NA_real_\n    ),\n    company_size = factor(\n      company_size, \n      levels = 1:5, \n      labels = c(\n        \"Solo\",\n        \"2-9\",\n        \"10-49\",\n        \"50-199\",\n        \"200 or more\"),\n      ordered = TRUE\n    )\n  ) %>%\n  set_variable_labels(company_size = \"Company Size\")\n\nfrq(data$company_size)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCompany Size (x) <ordinal> \n# total N=3048 valid N=2785 mean=2.50 sd=1.30\n\nValue       |   N | Raw % | Valid % | Cum. %\n--------------------------------------------\nSolo        | 783 | 25.69 |   28.11 |  28.11\n2-9         | 763 | 25.03 |   27.40 |  55.51\n10-49       | 607 | 19.91 |   21.80 |  77.31\n50-199      | 333 | 10.93 |   11.96 |  89.26\n200 or more | 299 |  9.81 |   10.74 | 100.00\n<NA>        | 263 |  8.63 |    <NA> |   <NA>\n```\n:::\n:::\n\n\n### workplace_size\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data$a27)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nx <numeric> \n# total N=3048 valid N=3048 mean=-15.76 sd=129.92\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n -999 |   8 |  0.26 |    0.26 |   0.26\n -888 |  56 |  1.84 |    1.84 |   2.10\n    1 | 851 | 27.92 |   27.92 |  30.02\n    2 | 590 | 19.36 |   19.36 |  49.38\n    3 | 353 | 11.58 |   11.58 |  60.96\n    4 | 358 | 11.75 |   11.75 |  72.70\n    5 | 341 | 11.19 |   11.19 |  83.89\n    6 | 198 |  6.50 |    6.50 |  90.39\n    7 | 154 |  5.05 |    5.05 |  95.44\n    8 |  71 |  2.33 |    2.33 |  97.77\n    9 |  68 |  2.23 |    2.23 | 100.00\n <NA> |   0 |  0.00 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\ndata <- data %>%\n  mutate(\n    workplace_size = case_when(\n      a27 %in% c(1) ~ 1,\n      a27 %in% c(2, 3) ~ 2,\n      a27 %in% c(4, 5) ~ 3,\n      a27 %in% c(6, 7) ~ 4,\n      a27 %in% c(8, 9) ~ 5,\n      TRUE ~ NA_real_\n    ),\n    workplace_size = factor(\n      workplace_size, \n      levels = 1:5, \n      labels = c(\n        \"Solo\",\n        \"2-9\",\n        \"10-49\",\n        \"50-199\",\n        \"200 or more\"),\n      ordered = TRUE\n    )\n  ) %>%\n  set_variable_labels(workplace_size = \"Workplace Size\")\n\nfrq(data$workplace_size)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nWorkplace Size (x) <ordinal> \n# total N=3048 valid N=2984 mean=2.32 sd=1.14\n\nValue       |   N | Raw % | Valid % | Cum. %\n--------------------------------------------\nSolo        | 851 | 27.92 |   28.52 |  28.52\n2-9         | 943 | 30.94 |   31.60 |  60.12\n10-49       | 699 | 22.93 |   23.42 |  83.55\n50-199      | 352 | 11.55 |   11.80 |  95.34\n200 or more | 139 |  4.56 |    4.66 | 100.00\n<NA>        |  64 |  2.10 |    <NA> |   <NA>\n```\n:::\n:::\n\n\n### owners\n\n- 1 == employers o self employed sin empleados\n- 2 == employers o self employed con 2-9 empleados\n- 3 == employers o self employed com >= 10 empleados\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(data$relation_mop,data$company_size)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                  \n                   Solo 2-9 10-49 50-199 200 or more\n  1. Employers      141 128    47     12          11\n  2. Self-Employed  402 140    20      4           9\n  3. Salaried       240 495   540    317         279\n```\n:::\n\n```{.r .cell-code}\ntable(data$relation_mop,data$workplace_size)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                  \n                   Solo 2-9 10-49 50-199 200 or more\n  1. Employers      144 131    48     13           4\n  2. Self-Employed  411 151    22      7           2\n  3. Salaried       296 661   629    332         133\n```\n:::\n\n```{.r .cell-code}\ndata <- data %>%\n  mutate(\n    owners = case_when(\n      as.numeric(relation_mop) %in% 1:2 & (as.numeric(company_size) == 1 | (is.na(company_size) & as.numeric(workplace_size) == 1)) ~ 1,\n      as.numeric(relation_mop) %in% 1:2 & (as.numeric(company_size) == 2 | (is.na(company_size) & as.numeric(workplace_size) == 2)) ~ 2,\n      as.numeric(relation_mop) %in% 1:2 & (as.numeric(company_size) >= 3 | (is.na(company_size) & as.numeric(workplace_size) >= 3)) ~ 3,\n      TRUE ~ NA_real_\n    ),\n    owners = factor(\n      owners,\n      levels = 1:3,\n      labels = c(\n        \"1. Solo Self-Employed\",\n        \"2. Small employers\",\n        \"3. Employers\"\n      )\n    )\n  ) %>%\n  set_variable_labels(owners = \"Owners\")\n\nfrq(data$owners)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nOwners (x) <categorical> \n# total N=3048 valid N=935 mean=1.53 sd=0.69\n\nValue                 |    N | Raw % | Valid % | Cum. %\n-------------------------------------------------------\n1. Solo Self-Employed |  551 | 18.08 |   58.93 |  58.93\n2. Small employers    |  276 |  9.06 |   29.52 |  88.45\n3. Employers          |  108 |  3.54 |   11.55 | 100.00\n<NA>                  | 2113 | 69.32 |    <NA> |   <NA>\n```\n:::\n:::\n\n\n### owners2\n\n- 1 == employers o self employed sin empleados\n- 2 == employers o self employed con 2-49 empleados\n- 3 == employers o self employed com >= 50 empleados\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- data %>%\n  mutate(\n    owners2 = case_when(\n      as.numeric(relation_mop) %in% 1:2 & (as.numeric(company_size) == 1 | (is.na(company_size) & as.numeric(workplace_size) == 1)) ~ 1,\n      as.numeric(relation_mop) %in% 1:2 & (as.numeric(company_size) %in% 2:3 | (is.na(company_size) & as.numeric(workplace_size) %in% 2:3)) ~ 2,\n      as.numeric(relation_mop) %in% 1:2 & (as.numeric(company_size) >= 4 | (is.na(company_size) & as.numeric(workplace_size) >= 4)) ~ 3,\n      TRUE ~ NA_real_\n    ),\n    owners2 = factor(\n      owners2,\n      levels = 1:3,\n      labels = c(\n        \"1. Solo Self-Employed\",\n        \"2. Small employers\",\n        \"3. Capitalists\"\n      )\n    )\n  ) %>%\n  set_variable_labels(owners2 = \"Owners 2\")\n\nfrq(data$owners2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nOwners 2 (x) <categorical> \n# total N=3048 valid N=935 mean=1.45 sd=0.57\n\nValue                 |    N | Raw % | Valid % | Cum. %\n-------------------------------------------------------\n1. Solo Self-Employed |  551 | 18.08 |   58.93 |  58.93\n2. Small employers    |  348 | 11.42 |   37.22 |  96.15\n3. Capitalists        |   36 |  1.18 |    3.85 | 100.00\n<NA>                  | 2113 | 69.32 |    <NA> |   <NA>\n```\n:::\n:::\n\n\n### educ\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data$e05)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nx <numeric> \n# total N=3048 valid N=3048 mean=-2.37 sd=88.97\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n -999 |   13 |  0.43 |    0.43 |   0.43\n -888 |   14 |  0.46 |    0.46 |   0.89\n    1 |   28 |  0.92 |    0.92 |   1.80\n    2 |   95 |  3.12 |    3.12 |   4.92\n    3 |  215 |  7.05 |    7.05 |  11.98\n    4 |  201 |  6.59 |    6.59 |  18.57\n    5 | 1062 | 34.84 |   34.84 |  53.41\n    6 |  178 |  5.84 |    5.84 |  59.25\n    7 |  440 | 14.44 |   14.44 |  73.69\n    8 |  205 |  6.73 |    6.73 |  80.41\n    9 |  531 | 17.42 |   17.42 |  97.83\n   10 |   66 |  2.17 |    2.17 | 100.00\n <NA> |    0 |  0.00 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\ndata <- data %>%\n  mutate(\n    educ = ifelse(e05 %in% c(-999, -888), NA, e05)\n  ) %>%\n  set_variable_labels(educ = \"Educational level\")\n\nfrq(data$educ)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nEducational level (x) <numeric> \n# total N=3048 valid N=3021 mean=6.03 sd=2.08\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n    1 |   28 |  0.92 |    0.93 |   0.93\n    2 |   95 |  3.12 |    3.14 |   4.07\n    3 |  215 |  7.05 |    7.12 |  11.19\n    4 |  201 |  6.59 |    6.65 |  17.84\n    5 | 1062 | 34.84 |   35.15 |  53.00\n    6 |  178 |  5.84 |    5.89 |  58.89\n    7 |  440 | 14.44 |   14.56 |  73.45\n    8 |  205 |  6.73 |    6.79 |  80.24\n    9 |  531 | 17.42 |   17.58 |  97.82\n   10 |   66 |  2.17 |    2.18 | 100.00\n <NA> |   27 |  0.89 |    <NA> |   <NA>\n```\n:::\n:::\n\n\n### ciuo08_clio_2d\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Preparar variables necesarias\n\n## Crear la glosa concatenada\ndata$glosa_ciuo08 <- paste(data$a02, data$a03, sep = \" \")\n\n## Crear isco a 2 dígitos\ndata <- data %>%\n  mutate(\n    ciuo08_clio_2d = as.numeric(substr(ciuo08_clio, 1, 2))\n  ) %>%\n  set_variable_labels(ciuo08_clio_2d = \"ISCO-08: 2 digits\")\n\nfrq(data$ciuo08_clio_2d)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nISCO-08: 2 digits (x) <numeric> \n# total N=3048 valid N=3048 mean=54.09 sd=26.33\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n   -9 |  42 |  1.38 |    1.38 |   1.38\n    1 |  12 |  0.39 |    0.39 |   1.77\n   11 |  20 |  0.66 |    0.66 |   2.43\n   12 |  28 |  0.92 |    0.92 |   3.35\n   13 |  44 |  1.44 |    1.44 |   4.79\n   14 |  11 |  0.36 |    0.36 |   5.15\n   21 |  62 |  2.03 |    2.03 |   7.19\n   22 | 200 |  6.56 |    6.56 |  13.75\n   23 | 140 |  4.59 |    4.59 |  18.34\n   24 |  37 |  1.21 |    1.21 |  19.55\n   25 |  12 |  0.39 |    0.39 |  19.95\n   26 | 114 |  3.74 |    3.74 |  23.69\n   31 |  28 |  0.92 |    0.92 |  24.61\n   32 |  27 |  0.89 |    0.89 |  25.49\n   33 | 116 |  3.81 |    3.81 |  29.30\n   34 |  34 |  1.12 |    1.12 |  30.41\n   35 |   6 |  0.20 |    0.20 |  30.61\n   36 |  11 |  0.36 |    0.36 |  30.97\n   41 |   2 |  0.07 |    0.07 |  31.04\n   42 |  13 |  0.43 |    0.43 |  31.46\n   43 |  39 |  1.28 |    1.28 |  32.74\n   44 |   4 |  0.13 |    0.13 |  32.87\n   51 | 189 |  6.20 |    6.20 |  39.07\n   52 | 590 | 19.36 |   19.36 |  58.43\n   53 |  57 |  1.87 |    1.87 |  60.30\n   54 | 153 |  5.02 |    5.02 |  65.32\n   55 |   2 |  0.07 |    0.07 |  65.39\n   61 |  28 |  0.92 |    0.92 |  66.31\n   62 |   1 |  0.03 |    0.03 |  66.34\n   63 |   3 |  0.10 |    0.10 |  66.44\n   71 |  60 |  1.97 |    1.97 |  68.41\n   72 | 107 |  3.51 |    3.51 |  71.92\n   73 |  17 |  0.56 |    0.56 |  72.47\n   74 |  16 |  0.52 |    0.52 |  73.00\n   75 |  58 |  1.90 |    1.90 |  74.90\n   81 |  25 |  0.82 |    0.82 |  75.72\n   83 | 186 |  6.10 |    6.10 |  81.82\n   91 | 202 |  6.63 |    6.63 |  88.45\n   92 |  91 |  2.99 |    2.99 |  91.44\n   93 | 153 |  5.02 |    5.02 |  96.46\n   94 |  82 |  2.69 |    2.69 |  99.15\n   95 |   1 |  0.03 |    0.03 |  99.18\n   96 |  25 |  0.82 |    0.82 | 100.00\n <NA> |   0 |  0.00 |    <NA> |   <NA>\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Revisar los NA\n\n## Armar tabla filtrando a los NA\ntabla_ciuo08_999 <- data %>%\n  filter(as.numeric(ciuo08_clio_2d) < 1) %>%\n  select(ciuo08_clio,\n         ciuo08_clio_2d,\n         glosa_ciuo08, \n         a03,\n         supervisa = a16, \n         educ = e05, \n         rama = a25, \n         a25_esp, \n         rama_esp = a25_esp_rec)\n\n## Pasar tabla a word\ntabla_ft <- flextable(tabla_ciuo08_999)\nread_docx() %>%\n  body_add_flextable(value = tabla_ft) %>%\n  print(target = \"output/tabla_ciuo08_999.docx\")\n\n## Revisar NA con API del INE\n## Enviar la consulta al servidor\nrequest <-  httr::POST(\"https://rapps.ine.cl:9292/predict\", \n                       encode = \"json\",\n                       body =  list(text = tabla_ciuo08_999$glosa_ciuo08,\n                                    classification = \"ciuo\",\n                                    digits = 2))\n\n## Extraer el contenido\nciuo08_ine_999 <- httr::content(request)\n\n## Agregar como nueva columna a la base original\ntabla_ciuo08_999$ciuo08_ine_999 <- unlist(ciuo08_ine_999$cod_final)\n\n## Armar tabla filtrando a los NA con ciuo08 ine 999\ntabla_ciuo08_999_ine <- tabla_ciuo08_999 %>%\n  select(ciuo08_clio,\n         ciuo08_clio_2d,\n         ciuo08_ine_999,\n         glosa_ciuo08, \n         a03,\n         supervisa, \n         educ, \n         rama, \n         rama_esp)\n\n## Pasar tabla a word\ntabla_ft <- flextable(tabla_ciuo08_999_ine)\nread_docx() %>%\n  body_add_flextable(value = tabla_ft) %>%\n  print(target = \"output/tabla_ciuo08_999_ine.docx\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Recuperar algunos NA\n\n## Recodificar ciuo08 de NA recuperados\ndata <- data %>%\n  mutate(\n    ciuo08_clio = case_when(\n      ciuo08_clio == \"-999\" & a03 == \"tejer\" ~ \"7318\", # Artesanos de los tejidos, el cuero y materiales similares\n      ciuo08_clio == \"-999\" & a03 == \"mantención\" ~ \"3121\",\n      ciuo08_clio == \"-999\" & a03 == \"aseo limpieza\" ~ \"9111\",\n      ciuo08_clio == \"-999\" & a03 == \"casa\" ~ \"9111\",\n      ciuo08_clio == \"-999\" & a03 == \"supervisar trabajos\" ~ \"3121\",\n      ciuo08_clio == \"-999\" & a03 == \"maquina pesada\" ~ \"8332\",\n      ciuo08_clio == \"-999\" & a03 == \"no responde\" ~ \"9111\",\n      ciuo08_clio == \"-999\" & a03 == \"Independiente\" ~ \"5212\",\n      ciuo08_clio == \"-999\" & a03 == \"estaba en la casa por permiso administrativo\" ~ \"9331\",\n      ciuo08_clio == \"-999\" & a03 == \"no trabja por ahoravendedor\" ~ \"5211\",\n      ciuo08_clio == \"-999\" & a03 == \"organizar y ordenar ropa\" ~ \"5242\",\n      ciuo08_clio == \"-999\" & a03 == \"ordenar y organizar ropa\" ~ \"5242\",\n      ciuo08_clio == \"-999\" & a03 == \"stripper\" ~ \"5249\",\n      TRUE ~ ciuo08_clio\n    )\n  )\n\n## Volver a crear ciuo08 con 2 dígitos y pasar -999 a NA\ndata <- data %>%\n  mutate(\n    ciuo08_clio_2d = as.numeric(substr(ciuo08_clio, 1, 2)),\n    ciuo08_clio_2d = ifelse(ciuo08_clio_2d==-9, NA,ciuo08_clio_2d)\n  ) %>%\n  set_variable_labels(ciuo08_clio_2d = \"ISCO-08: 2 digits\")\n\nfrq(data$ciuo08_clio_2d)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nISCO-08: 2 digits (x) <numeric> \n# total N=3048 valid N=3019 mean=55.01 sd=25.42\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    1 |  12 |  0.39 |    0.40 |   0.40\n   11 |  20 |  0.66 |    0.66 |   1.06\n   12 |  28 |  0.92 |    0.93 |   1.99\n   13 |  44 |  1.44 |    1.46 |   3.44\n   14 |  11 |  0.36 |    0.36 |   3.81\n   21 |  62 |  2.03 |    2.05 |   5.86\n   22 | 200 |  6.56 |    6.62 |  12.49\n   23 | 140 |  4.59 |    4.64 |  17.12\n   24 |  37 |  1.21 |    1.23 |  18.35\n   25 |  12 |  0.39 |    0.40 |  18.75\n   26 | 114 |  3.74 |    3.78 |  22.52\n   31 |  30 |  0.98 |    0.99 |  23.52\n   32 |  27 |  0.89 |    0.89 |  24.41\n   33 | 116 |  3.81 |    3.84 |  28.25\n   34 |  34 |  1.12 |    1.13 |  29.38\n   35 |   6 |  0.20 |    0.20 |  29.58\n   36 |  11 |  0.36 |    0.36 |  29.94\n   41 |   2 |  0.07 |    0.07 |  30.01\n   42 |  13 |  0.43 |    0.43 |  30.44\n   43 |  39 |  1.28 |    1.29 |  31.73\n   44 |   4 |  0.13 |    0.13 |  31.86\n   51 | 189 |  6.20 |    6.26 |  38.13\n   52 | 595 | 19.52 |   19.71 |  57.83\n   53 |  57 |  1.87 |    1.89 |  59.72\n   54 | 153 |  5.02 |    5.07 |  64.79\n   55 |   2 |  0.07 |    0.07 |  64.86\n   61 |  28 |  0.92 |    0.93 |  65.78\n   62 |   1 |  0.03 |    0.03 |  65.82\n   63 |   3 |  0.10 |    0.10 |  65.92\n   71 |  60 |  1.97 |    1.99 |  67.90\n   72 | 107 |  3.51 |    3.54 |  71.45\n   73 |  18 |  0.59 |    0.60 |  72.04\n   74 |  16 |  0.52 |    0.53 |  72.57\n   75 |  58 |  1.90 |    1.92 |  74.49\n   81 |  25 |  0.82 |    0.83 |  75.32\n   83 | 187 |  6.14 |    6.19 |  81.52\n   91 | 205 |  6.73 |    6.79 |  88.31\n   92 |  91 |  2.99 |    3.01 |  91.32\n   93 | 154 |  5.05 |    5.10 |  96.42\n   94 |  82 |  2.69 |    2.72 |  99.14\n   95 |   1 |  0.03 |    0.03 |  99.17\n   96 |  25 |  0.82 |    0.83 | 100.00\n <NA> |  29 |  0.95 |    <NA> |   <NA>\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Chequeo códigos no existentes ciuo clio = 36, 55\n\n## Armar tabla\ntabla_ciuo08_36_55 <- data %>%\n  filter(as.numeric(ciuo08_clio_2d) %in% c(36, 55)) %>%\n  select(ciuo08_clio,\n         ciuo08_clio_2d,\n         glosa_ciuo08,\n         id,\n         supervisa = a16, \n         educ = e05, \n         rama = a25, \n         rama_esp = a25_esp_rec)\n\n## Pasar tabla a word\ntabla_ft <- flextable(tabla_ciuo08_36_55)\nread_docx() %>%\n  body_add_flextable(value = tabla_ft) %>%\n  print(target = \"output/tabla_ciuo08_36_55.docx\")\n\n## Revisar 36 y 55 con API del INE\n## Enviar la consulta al servidor\nrequest <-  httr::POST(\"https://rapps.ine.cl:9292/predict\", \n                       encode = \"json\",\n                       body =  list(text = tabla_ciuo08_36_55$glosa_ciuo08,\n                                    classification = \"ciuo\",\n                                    digits = 2))\n\n## Extraer el contenido\nciuo08_ine_36_55 <- httr::content(request)\n\n## Agregar como nueva columna a la base original\ntabla_ciuo08_36_55$ciuo08_ine_36_55 <- unlist(ciuo08_ine_36_55$cod_final)\n\n## Armar tabla filtrando a los NA con ciuo08 ine 999\ntabla_ciuo08_36_55_ine <- tabla_ciuo08_36_55 %>%\n  select(ciuo08_clio,\n         ciuo08_clio_2d,\n         ciuo08_ine_36_55,\n         glosa_ciuo08, \n         id,\n         supervisa, \n         educ, \n         rama, \n         rama_esp)\n\n## Pasar tabla a word\ntabla_ft <- flextable(tabla_ciuo08_36_55_ine)\nread_docx() %>%\n  body_add_flextable(value = tabla_ft) %>%\n  print(target = \"output/tabla_ciuo08_36_55_ine.docx\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Recuperar algunos códigos no existentes\n\n## Recodificar ciuo08 de 36 55 recuperados\ndata <- data %>%\n  mutate(\n    ciuo08_clio = case_when(\n      ciuo08_clio == \"5522\" & id == \"var_223\" ~ \"3343\",\n      ciuo08_clio == \"5521\" & id == \"var_2536\" ~ \"7322\",\n      TRUE ~ ciuo08_clio\n    )\n  )\n\n## Volver a crear ciuo08 con 2 dígitos\ndata <- data %>%\n  mutate(\n    ciuo08_clio_2d = as.numeric(substr(ciuo08_clio, 1, 2)),\n    ciuo08_clio_2d = ifelse(ciuo08_clio_2d==-9, NA,ciuo08_clio_2d)\n  ) %>%\n  set_variable_labels(ciuo08_clio_2d = \"ISCO-08: 2 digits\")\n\nfrq(data$ciuo08_clio_2d)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nISCO-08: 2 digits (x) <numeric> \n# total N=3048 valid N=3019 mean=55.01 sd=25.42\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    1 |  12 |  0.39 |    0.40 |   0.40\n   11 |  20 |  0.66 |    0.66 |   1.06\n   12 |  28 |  0.92 |    0.93 |   1.99\n   13 |  44 |  1.44 |    1.46 |   3.44\n   14 |  11 |  0.36 |    0.36 |   3.81\n   21 |  62 |  2.03 |    2.05 |   5.86\n   22 | 200 |  6.56 |    6.62 |  12.49\n   23 | 140 |  4.59 |    4.64 |  17.12\n   24 |  37 |  1.21 |    1.23 |  18.35\n   25 |  12 |  0.39 |    0.40 |  18.75\n   26 | 114 |  3.74 |    3.78 |  22.52\n   31 |  30 |  0.98 |    0.99 |  23.52\n   32 |  27 |  0.89 |    0.89 |  24.41\n   33 | 117 |  3.84 |    3.88 |  28.29\n   34 |  34 |  1.12 |    1.13 |  29.41\n   35 |   6 |  0.20 |    0.20 |  29.61\n   36 |  11 |  0.36 |    0.36 |  29.98\n   41 |   2 |  0.07 |    0.07 |  30.04\n   42 |  13 |  0.43 |    0.43 |  30.47\n   43 |  39 |  1.28 |    1.29 |  31.77\n   44 |   4 |  0.13 |    0.13 |  31.90\n   51 | 189 |  6.20 |    6.26 |  38.16\n   52 | 595 | 19.52 |   19.71 |  57.87\n   53 |  57 |  1.87 |    1.89 |  59.75\n   54 | 153 |  5.02 |    5.07 |  64.82\n   61 |  28 |  0.92 |    0.93 |  65.75\n   62 |   1 |  0.03 |    0.03 |  65.78\n   63 |   3 |  0.10 |    0.10 |  65.88\n   71 |  60 |  1.97 |    1.99 |  67.87\n   72 | 107 |  3.51 |    3.54 |  71.41\n   73 |  19 |  0.62 |    0.63 |  72.04\n   74 |  16 |  0.52 |    0.53 |  72.57\n   75 |  58 |  1.90 |    1.92 |  74.49\n   81 |  25 |  0.82 |    0.83 |  75.32\n   83 | 187 |  6.14 |    6.19 |  81.52\n   91 | 205 |  6.73 |    6.79 |  88.31\n   92 |  91 |  2.99 |    3.01 |  91.32\n   93 | 154 |  5.05 |    5.10 |  96.42\n   94 |  82 |  2.69 |    2.72 |  99.14\n   95 |   1 |  0.03 |    0.03 |  99.17\n   96 |  25 |  0.82 |    0.83 | 100.00\n <NA> |  29 |  0.95 |    <NA> |   <NA>\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Chequeo COMPLETO de códigos ciuo08 con api INE\n\n## Enviar la consulta al servidor\nrequest <-  httr::POST(\"https://rapps.ine.cl:9292/predict\", \n                       encode = \"json\",\n                       body =  list(text = data$glosa_ciuo08,\n                                    classification = \"ciuo\",\n                                    digits = 2))\n\n## Extraer el contenido\nciuo08_ine <- httr::content(request)\n\n## Agregar como nueva columna a la base original\ndata$ciuo08_ine <- unlist(ciuo08_ine$cod_final)\n\n## Volver NA en ciuo08_ine los NA de ciuo08_clio_2d\ndata <- data %>%\n  mutate(\n    ciuo08_ine = ifelse(is.na(ciuo08_clio_2d), NA, ciuo08_ine)\n  )\n\n## Buscar los códigos diferentes\ndiferente_ciuo <- data %>%\n  filter(ciuo08_ine != ciuo08_clio_2d | (is.na(ciuo08_ine) != is.na(ciuo08_clio_2d))) %>%\n  select(glosa_ciuo08, ciuo08_clio_2d, ciuo08_ine)\n\ndiferente_ciuo\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 845 × 3\n   glosa_ciuo08                                        ciuo08_clio_2d ciuo08_ine\n   <chr>                                                        <dbl> <chr>     \n 1 isabel antonia castillo venegas vendedora de flores             75 52        \n 2 trabajar manipular alimentos                                    94 51        \n 3 Funcionario Público Remuneración                                43 33        \n 4 adminustrativa de salud atender clientes                        33 22        \n 5 dueña de casa aseo                                              51 91        \n 6 empresa paisajismo areas verdes cuidamos el medio …             21 61        \n 7 tens cuidados adulto mayores                                    22 32        \n 8 minera cocina                                                   21 81        \n 9 Atención público Cajera, atención. Trabajo con niñ…             52 42        \n10 repartidor de encomienda dejar encomiendas en resp…             96 83        \n# ℹ 835 more rows\n```\n:::\n:::\n\n\n### skills\n\n- Experts -> ciuo08_2d == 11 a 34 con universitaria completa o más (educ >= 9) ---> experts\n- Skilled -> ciuo08_2d == 11 a 34 con universitaria incompleta o menos (educ < 9), y\n- Skilled -> ciuo08_2d == 35,36,41:44,53, y \n- Skilled -> ciuo08_2d == 51,54,61,62,71:75,81 con media completa o más (educ >= 5).\n- Unskilled -> ciuo08_2d == 51,54,61,62,71:75,81 con media incompleta o menos, y \n- Unskilled -> ciuo08_2d == 52,63,82,83,90+\n\n- 61 62 71:75 --> skilled\n- 51,54,81 --> unskilled\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- data %>% \n  mutate(\n    skills = case_when(\n      ciuo08_ine <= 34 & educ >= 9 ~ 1,\n      ciuo08_ine <= 34 & is.na(educ)~ 1,  \n      \n      ciuo08_ine <= 34 & educ < 9 ~ 2,\n      ciuo08_ine %in% c(35, 36, 41:44, 53) ~ 2,\n      ciuo08_ine %in% c(51, 54, 61, 62, 71:75, 81) & educ >= 5 ~ 2,\n      ciuo08_ine %in% c(61, 62, 71:75) & is.na(educ) ~ 2,\n      \n      ciuo08_ine %in% c(51, 54, 61, 62, 71:75, 81) & educ <= 4 ~ 3,\n      ciuo08_ine %in% c(52, 63, 82, 83, 91:99) ~ 3,\n      ciuo08_ine %in% c(51, 54, 81) & is.na(educ) ~ 3     \n    ),\n    skills = factor(\n      skills, \n      levels = 1:3,\n      labels = c(\n        \"1. Experts\",\n        \"2. Skilled\",\n        \"3. Unskilled\"\n      )\n    )\n  ) %>%\n  set_variable_labels(skills = \"Skills\")\n\n\nfrq(data$skills)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nSkills (x) <categorical> \n# total N=3048 valid N=3019 mean=2.29 sd=0.72\n\nValue        |    N | Raw % | Valid % | Cum. %\n----------------------------------------------\n1. Experts   |  469 | 15.39 |   15.53 |  15.53\n2. Skilled   | 1198 | 39.30 |   39.68 |  55.22\n3. Unskilled | 1352 | 44.36 |   44.78 | 100.00\n<NA>         |   29 |  0.95 |    <NA> |   <NA>\n```\n:::\n:::\n\n\n### formal_position_auth\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data$a15)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nx <numeric> \n# total N=3048 valid N=2107 mean=3.76 sd=0.63\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n    1 |   41 |  1.35 |    1.95 |   1.95\n    2 |  102 |  3.35 |    4.84 |   6.79\n    3 |  188 |  6.17 |    8.92 |  15.71\n    4 | 1776 | 58.27 |   84.29 | 100.00\n <NA> |  941 | 30.87 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\ndata <- data %>%\n  mutate(\n    formal_position_auth = case_when(\n      as.numeric(relation_mop) %in% c(1, 2) ~ NA_real_,\n      TRUE ~ as.numeric(a15)\n    ),\n    formal_position_auth = factor(\n      formal_position_auth,\n      levels = 1:4,\n      labels = c(\n        \"1. Senior manager or executive\",\n        \"2. Middle manager (e.g., sector, office or branch head)\",\n        \"3. Supervisor or foreperson\",\n        \"4. Regular employee or worker (no supervisory role)\"\n      )\n    )\n  ) %>%\n  set_variable_labels(formal_position_auth = \"Formal position of authority (a15)\")\n\nfrq(data$formal_position_auth)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nFormal position of authority (a15) (x) <categorical> \n# total N=3048 valid N=2105 mean=3.76 sd=0.63\n\nValue                                                   |    N | Raw % | Valid % | Cum. %\n-----------------------------------------------------------------------------------------\n1. Senior manager or executive                          |   41 |  1.35 |    1.95 |   1.95\n2. Middle manager (e.g., sector, office or branch head) |  102 |  3.35 |    4.85 |   6.79\n3. Supervisor or foreperson                             |  188 |  6.17 |    8.93 |  15.72\n4. Regular employee or worker (no supervisory role)     | 1774 | 58.20 |   84.28 | 100.00\n<NA>                                                    |  943 | 30.94 |    <NA> |   <NA>\n```\n:::\n:::\n\n\n### supervision\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data$a16)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nx <numeric> \n# total N=3048 valid N=2105 mean=-12.08 sd=112.46\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n -999 |    8 |  0.26 |    0.38 |   0.38\n -888 |   24 |  0.79 |    1.14 |   1.52\n    1 |  280 |  9.19 |   13.30 |  14.82\n    2 | 1793 | 58.83 |   85.18 | 100.00\n <NA> |  943 | 30.94 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\ndata <- data %>%\n  mutate(\n    supervision = case_when(\n      a16 == 1 ~ 1,\n      a16 %in% c(2, -888, -999) ~ 0,\n      TRUE ~ NA_real_\n    )\n  ) %>%\n  set_variable_labels(supervision = \"Supervises other workers (a16)\")\n\nfrq(data$supervision)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nSupervises other workers (a16) (x) <numeric> \n# total N=3048 valid N=2105 mean=0.13 sd=0.34\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n    0 | 1825 | 59.88 |   86.70 |  86.70\n    1 |  280 |  9.19 |   13.30 | 100.00\n <NA> |  943 | 30.94 |    <NA> |   <NA>\n```\n:::\n:::\n\n\n### decisionmaking_typology\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data$a17_01)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nx <numeric> \n# total N=3048 valid N=2105 mean=-19.16 sd=140.62\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n -999 |   14 |  0.46 |    0.67 |   0.67\n -888 |   36 |  1.18 |    1.71 |   2.38\n    1 |  101 |  3.31 |    4.80 |   7.17\n    2 |  338 | 11.09 |   16.06 |  23.23\n    3 | 1616 | 53.02 |   76.77 | 100.00\n <NA> |  943 | 30.94 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\nfrq(data$a17_02)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nx <numeric> \n# total N=3048 valid N=2105 mean=-16.73 sd=132.62\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n -999 |   10 |  0.33 |    0.48 |   0.48\n -888 |   35 |  1.15 |    1.66 |   2.14\n    1 |   55 |  1.80 |    2.61 |   4.75\n    2 |  223 |  7.32 |   10.59 |  15.34\n    3 | 1782 | 58.46 |   84.66 | 100.00\n <NA> |  943 | 30.94 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\nfrq(data$a17_03)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nx <numeric> \n# total N=3048 valid N=2105 mean=-12.16 sd=117.04\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n -999 |   11 |  0.36 |    0.52 |   0.52\n -888 |   23 |  0.75 |    1.09 |   1.62\n    1 |   71 |  2.33 |    3.37 |   4.99\n    2 |  249 |  8.17 |   11.83 |  16.82\n    3 | 1751 | 57.45 |   83.18 | 100.00\n <NA> |  943 | 30.94 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\nfrq(data$a17_04)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nx <numeric> \n# total N=3048 valid N=2105 mean=-12.57 sd=118.59\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n -999 |   11 |  0.36 |    0.52 |   0.52\n -888 |   24 |  0.79 |    1.14 |   1.66\n    1 |   56 |  1.84 |    2.66 |   4.32\n    2 |  259 |  8.50 |   12.30 |  16.63\n    3 | 1755 | 57.58 |   83.37 | 100.00\n <NA> |  943 | 30.94 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\nfrq(data$a17_05)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nx <numeric> \n# total N=3048 valid N=2105 mean=-9.96 sd=107.12\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n -999 |    7 |  0.23 |    0.33 |   0.33\n -888 |   22 |  0.72 |    1.05 |   1.38\n    1 |  120 |  3.94 |    5.70 |   7.08\n    2 |  418 | 13.71 |   19.86 |  26.94\n    3 | 1538 | 50.46 |   73.06 | 100.00\n <NA> |  943 | 30.94 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\nfrq(data$a17_06)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nx <numeric> \n# total N=3048 valid N=2105 mean=-20.39 sd=143.27\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n -999 |    7 |  0.23 |    0.33 |   0.33\n -888 |   47 |  1.54 |    2.23 |   2.57\n    1 |   63 |  2.07 |    2.99 |   5.56\n    2 |  211 |  6.92 |   10.02 |  15.58\n    3 | 1777 | 58.30 |   84.42 | 100.00\n <NA> |  943 | 30.94 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\ndata <- data %>%\n  mutate(\n    decisionmaking_typology = if_else(\n      is.na(a17_01),\n      NA_real_,\n      rowSums(across(a17_01:a17_06, ~ case_when(\n        .x == 1 ~ 3,\n        .x == 2 ~ 2,\n        .x == 3 ~ 1,\n        .x %in% c(-888, -999) ~ 1,  \n        TRUE ~ NA_real_\n      )), na.rm = TRUE)\n    ),\n    decisionmaking_typology_mean = if_else(\n      is.na(a17_01),\n      NA_real_,\n      rowMeans(across(a17_01:a17_06, ~ case_when(\n        .x == 1 ~ 3,\n        .x == 2 ~ 2,\n        .x == 3 ~ 1,\n        .x %in% c(-888, -999) ~ 1,\n        TRUE ~ NA_real_\n      )), na.rm = TRUE)\n    )\n  ) %>%\n  set_variable_labels(\n    decisionmaking_typology = \"Decision-making typology (sum, inverted)\",\n    decisionmaking_typology_mean = \"Decision-making typology (mean, inverted)\"\n  )\n\nfrq(data$decisionmaking_typology)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nDecision-making typology (sum, inverted) (x) <numeric> \n# total N=3048 valid N=2105 mean=7.25 sd=2.38\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n    6 | 1363 | 44.72 |   64.75 |  64.75\n    7 |  228 |  7.48 |   10.83 |  75.58\n    8 |  139 |  4.56 |    6.60 |  82.19\n    9 |   79 |  2.59 |    3.75 |  85.94\n   10 |   67 |  2.20 |    3.18 |  89.12\n   11 |   61 |  2.00 |    2.90 |  92.02\n   12 |   78 |  2.56 |    3.71 |  95.72\n   13 |   27 |  0.89 |    1.28 |  97.01\n   14 |   11 |  0.36 |    0.52 |  97.53\n   15 |   10 |  0.33 |    0.48 |  98.00\n   16 |   10 |  0.33 |    0.48 |  98.48\n   17 |    5 |  0.16 |    0.24 |  98.72\n   18 |   27 |  0.89 |    1.28 | 100.00\n <NA> |  943 | 30.94 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\nfrq(data$decisionmaking_typology_mean)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nDecision-making typology (mean, inverted) (x) <numeric> \n# total N=3048 valid N=2105 mean=1.21 sd=0.40\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n 1.00 | 1363 | 44.72 |   64.75 |  64.75\n 1.17 |  228 |  7.48 |   10.83 |  75.58\n 1.33 |  139 |  4.56 |    6.60 |  82.19\n 1.50 |   79 |  2.59 |    3.75 |  85.94\n 1.67 |   67 |  2.20 |    3.18 |  89.12\n 1.83 |   61 |  2.00 |    2.90 |  92.02\n 2.00 |   78 |  2.56 |    3.71 |  95.72\n 2.17 |   27 |  0.89 |    1.28 |  97.01\n 2.33 |   11 |  0.36 |    0.52 |  97.53\n 2.50 |   10 |  0.33 |    0.48 |  98.00\n 2.67 |   10 |  0.33 |    0.48 |  98.48\n 2.83 |    5 |  0.16 |    0.24 |  98.72\n 3.00 |   27 |  0.89 |    1.28 | 100.00\n <NA> |  943 | 30.94 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\n# Crear variable con 3 categorías\ndata <- data %>%\n  mutate(\n    decisionmaking_typology_cat = case_when(\n      decisionmaking_typology_mean == 1 ~ 1,\n      decisionmaking_typology_mean > 1 & decisionmaking_typology_mean < 3 ~ 2,\n      decisionmaking_typology_mean == 3 ~ 3\n    ),\n    decisionmaking_typology_cat = factor(\n      decisionmaking_typology_cat,\n      levels = 1:3\n    )\n  ) %>%\n  set_variable_labels(\n    decisionmaking_typology_cat = \"Decision-making typology (recoded 3 categories)\"\n  )\n\nfrq(data$decisionmaking_typology_cat)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nDecision-making typology (recoded 3 categories) (x) <categorical> \n# total N=3048 valid N=2105 mean=1.37 sd=0.51\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n    1 | 1363 | 44.72 |   64.75 |  64.75\n    2 |  715 | 23.46 |   33.97 |  98.72\n    3 |   27 |  0.89 |    1.28 | 100.00\n <NA> |  943 | 30.94 |    <NA> |   <NA>\n```\n:::\n:::\n\n\n### managerial_location_typology\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- data %>%\n  mutate(\n    managerial_location_typology = case_when(\n      as.integer(decisionmaking_typology_cat) == 3 & supervision == 1 & as.integer(formal_position_auth) %in% 1:3 ~ 1,\n      as.integer(decisionmaking_typology_cat) == 3 & supervision == 1 & as.integer(formal_position_auth) == 4 ~ 2,\n      as.integer(decisionmaking_typology_cat) == 3 & supervision == 0 & as.integer(formal_position_auth) %in% 1:3 ~ 3,\n      as.integer(decisionmaking_typology_cat) == 3 & supervision == 0 & as.integer(formal_position_auth) == 4 ~ 4,\n      as.integer(decisionmaking_typology_cat) == 2 & supervision == 1 & as.integer(formal_position_auth) %in% 1:3 ~ 5,\n      as.integer(decisionmaking_typology_cat) == 2 & supervision == 1 & as.integer(formal_position_auth) == 4 ~ 6,\n      as.integer(decisionmaking_typology_cat) == 2 & supervision == 0 & as.integer(formal_position_auth) %in% 1:3 ~ 7,\n      as.integer(decisionmaking_typology_cat) == 2 & supervision == 0 & as.integer(formal_position_auth) == 4 ~ 8,\n      as.integer(decisionmaking_typology_cat) == 1 & supervision == 1 & as.integer(formal_position_auth) %in% 1:3 ~ 9,\n      as.integer(decisionmaking_typology_cat) == 1 & supervision == 1 & as.integer(formal_position_auth) == 4 ~ 10,\n      as.integer(decisionmaking_typology_cat) == 1 & supervision == 0 & as.integer(formal_position_auth) %in% 1:3 ~ 11,\n      as.integer(decisionmaking_typology_cat) == 1 & supervision == 0 & as.integer(formal_position_auth) == 4 ~ 12\n    ),\n    managerial_location_typology = factor(\n      managerial_location_typology,\n      levels = 1:12,\n      labels = c(\n        \"1. Manager on all criteria\",\n        \"2. Manager not in formal hierarchy\",\n        \"3. Non-supervisory manager\",\n        \"4. Non-supervisory decision-maker not in formal hierarchy\",\n        \"5. Advisor-manager on all criteria\",\n        \"6. Advisor not in hierarchy\",\n        \"7. Non-supervisory advisor\",\n        \"8. Non-supervisory advisor not in formal hierarchy\",\n        \"9. Sanctioning / task supervisor in hierarchy\",\n        \"10. Sanctioning / task supervisor not in hierarchy\",\n        \"11. Not subordinates but in hierarchy\",\n        \"12. Non-supervisor / non manager on all criteria\"\n      )\n    ),\n    organization_assets = case_when(\n      as.integer(managerial_location_typology) %in% c(1, 2, 3, 5) ~ 1,\n      as.integer(managerial_location_typology) %in% c(6, 7, 9, 10) ~ 2,\n      as.integer(managerial_location_typology) %in% c(4, 8, 11, 12) ~ 3\n    ),\n    organization_assets = factor(\n      organization_assets,\n      levels = 1:3,\n      labels = c(\n        \"1. Manager\",\n        \"2. Supervisor\",\n        \"3. Non-managerial worker\"\n      )\n    )\n  ) %>%\n  set_variable_labels(\n    managerial_location_typology = \"Managerial Location Typology\",\n    organization_assets = \"Organizational Assets\"\n  )\n\nfrq(data$managerial_location_typology)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nManagerial Location Typology (x) <categorical> \n# total N=3048 valid N=2105 mean=10.12 sd=2.66\n\nValue                                                     |    N | Raw % | Valid % | Cum. %\n-------------------------------------------------------------------------------------------\n1. Manager on all criteria                                |   18 |  0.59 |    0.86 |   0.86\n2. Manager not in formal hierarchy                        |    4 |  0.13 |    0.19 |   1.05\n3. Non-supervisory manager                                |    4 |  0.13 |    0.19 |   1.24\n4. Non-supervisory decision-maker not in formal hierarchy |    1 |  0.03 |    0.05 |   1.28\n5. Advisor-manager on all criteria                        |  174 |  5.71 |    8.27 |   9.55\n6. Advisor not in hierarchy                               |   67 |  2.20 |    3.18 |  12.73\n7. Non-supervisory advisor                                |   86 |  2.82 |    4.09 |  16.82\n8. Non-supervisory advisor not in formal hierarchy        |  388 | 12.73 |   18.43 |  35.25\n9. Sanctioning / task supervisor in hierarchy             |    7 |  0.23 |    0.33 |  35.58\n10. Sanctioning / task supervisor not in hierarchy        |   10 |  0.33 |    0.48 |  36.06\n11. Not subordinates but in hierarchy                     |   42 |  1.38 |    2.00 |  38.05\n12. Non-supervisor / non manager on all criteria          | 1304 | 42.78 |   61.95 | 100.00\n<NA>                                                      |  943 | 30.94 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\nfrq(data$organization_assets)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nOrganizational Assets (x) <categorical> \n# total N=3048 valid N=2105 mean=2.73 sd=0.62\n\nValue                    |    N | Raw % | Valid % | Cum. %\n----------------------------------------------------------\n1. Manager               |  200 |  6.56 |    9.50 |   9.50\n2. Supervisor            |  170 |  5.58 |    8.08 |  17.58\n3. Non-managerial worker | 1735 | 56.92 |   82.42 | 100.00\n<NA>                     |  943 | 30.94 |    <NA> |   <NA>\n```\n:::\n:::\n\n\n### a06_boleta\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data$a06)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nx <numeric> \n# total N=3048 valid N=3048 mean=-11.58 sd=113.10\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n -999 |   11 |  0.36 |    0.36 |   0.36\n -888 |   36 |  1.18 |    1.18 |   1.54\n    1 |  478 | 15.68 |   15.68 |  17.22\n    2 |  398 | 13.06 |   13.06 |  30.28\n    3 | 2125 | 69.72 |   69.72 | 100.00\n <NA> |    0 |  0.00 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\ndata <- data %>% \n  mutate(\n    a06_boleta = case_when(\n      a06 %in% c(1, 2) ~ 1,\n      a06 %in% c(3, -888, -999) ~ 0\n    )) %>% \n    set_variable_labels(a06_boleta = \"Entrega boleta (1 = yes)\") %>% \n  set_value_labels(a06_boleta = c(\n    \"Yes\" = 1,\n    \"No\" = 0\n  ))\n\nfrq(data$a06_boleta)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nEntrega boleta (1 = yes) (x) <numeric> \n# total N=3048 valid N=3048 mean=0.29 sd=0.45\n\nValue | Label |    N | Raw % | Valid % | Cum. %\n-----------------------------------------------\n    0 |    No | 2172 | 71.26 |   71.26 |  71.26\n    1 |   Yes |  876 | 28.74 |   28.74 | 100.00\n <NA> |  <NA> |    0 |  0.00 |    <NA> |   <NA>\n```\n:::\n:::\n\n\n### inicio_actividades\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data$a10)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nx <numeric> \n# total N=3048 valid N=945 mean=3.14 sd=1.72\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n    1 |  254 |  8.33 |   26.88 |  26.88\n    2 |  192 |  6.30 |   20.32 |  47.20\n    3 |   63 |  2.07 |    6.67 |  53.86\n    4 |   42 |  1.38 |    4.44 |  58.31\n    5 |  394 | 12.93 |   41.69 | 100.00\n <NA> | 2103 | 69.00 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\ntable(data$a10, data$relation_mop)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   \n    1. Employers 2. Self-Employed 3. Salaried\n  1          143              111           0\n  2           63              129           0\n  3           40               23           0\n  4           19               23           0\n  5           80              312           2\n```\n:::\n\n```{.r .cell-code}\ntable(data$a10, data$owners)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   \n    1. Solo Self-Employed 2. Small employers 3. Employers\n  1                   131                 79           43\n  2                    90                 87           14\n  3                    16                 33           13\n  4                    16                 12           13\n  5                   298                 65           25\n```\n:::\n\n```{.r .cell-code}\ntable(data$a10, data$owners2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   \n    1. Solo Self-Employed 2. Small employers 3. Capitalists\n  1                   131                111             11\n  2                    90                 95              6\n  3                    16                 42              4\n  4                    16                 20              5\n  5                   298                 80             10\n```\n:::\n:::\n\n\n### a18_contrato\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data$a18)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nx <numeric> \n# total N=3048 valid N=2105 mean=-13.86 sd=122.43\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n -999 |   32 |  1.05 |    1.52 |   1.52\n    1 | 1691 | 55.48 |   80.33 |  81.85\n    2 |   76 |  2.49 |    3.61 |  85.46\n    3 |  272 |  8.92 |   12.92 |  98.38\n    4 |   34 |  1.12 |    1.62 | 100.00\n <NA> |  943 | 30.94 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\ndata <- data %>% \n  mutate(\n    a18_contrato = case_when(\n      a18 == 1 ~ 1, \n      a18 %in% c(2, 3, 4, -999) ~ 0\n    )\n  ) %>% \n  set_variable_labels(a18_contrato = \"Has a signed written employment contract (1 = yes)\") %>% \n  set_value_labels(a18_contrato = c(\n    \"Yes\" = 1,\n    \"No\" = 0\n  ))\n\nfrq(data$a18_contrato)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nHas a signed written employment contract (1 = yes) (x) <numeric> \n# total N=3048 valid N=2105 mean=0.80 sd=0.40\n\nValue | Label |    N | Raw % | Valid % | Cum. %\n-----------------------------------------------\n    0 |    No |  414 | 13.58 |   19.67 |  19.67\n    1 |   Yes | 1691 | 55.48 |   80.33 | 100.00\n <NA> |  <NA> |  943 | 30.94 |    <NA> |   <NA>\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(data$owners, data$educ)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                       \n                          1   2   3   4   5   6   7   8   9  10\n  1. Solo Self-Employed  11  29  66  61 200  35  57  23  55  10\n  2. Small employers      5  14  28  24  88  13  37  19  39   7\n  3. Employers            1   1   4   5  38   8  13   5  19   1\n```\n:::\n:::\n\n\n## Classes\n\n![](img/wright_classes.jpeg){}\n\n### wrightclass1_original\n\n**employers: employers con 10 o más trabajadores**\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- data %>%\n  mutate(\n    wrightclass1_original = case_when(\n      as.integer(owners) == 3 ~ 1,  # 1. Employers\n      as.integer(owners) == 2 ~ 2,  # 2. Small employers\n      as.integer(owners) == 1 ~ 3,  # 3. Petty bourgeoisie\n      \n      as.integer(organization_assets) == 1 & as.integer(skills) == 1 ~ 4,  # 4. Expert managers\n      as.integer(organization_assets) == 2 & as.integer(skills) == 1 ~ 5,  # 5. Expert supervisors\n      as.integer(organization_assets) == 3 & as.integer(skills) == 1 ~ 6,  # 6. Experts\n      \n      as.integer(organization_assets) == 1 & as.integer(skills) == 2 ~ 7,  # 7. Skilled managers\n      as.integer(organization_assets) == 2 & as.integer(skills) == 2 ~ 8,  # 8. Skilled supervisors\n      as.integer(organization_assets) == 3 & as.integer(skills) == 2 ~ 9,  # 9. Skilled workers\n      \n      as.integer(organization_assets) == 1 & as.integer(skills) == 3 ~ 10, # 10. Nonskilled managers\n      as.integer(organization_assets) == 2 & as.integer(skills) == 3 ~ 11, # 11. Nonskilled supervisors\n      as.integer(organization_assets) == 3 & as.integer(skills) == 3 ~ 12  # 12. Nonskilled workers\n    ),\n    wrightclass1_original = factor(\n      wrightclass1_original,\n      levels = 1:12,\n      labels = c(\n        \"1. Employers\",\n        \"2. Small employers\",\n        \"3. Petty bourgeoisie\",\n        \"4. Expert managers\",\n        \"5. Expert supervisors\",\n        \"6. Experts\",\n        \"7. Skilled managers\",\n        \"8. Skilled supervisors\",\n        \"9. Skilled workers\",\n        \"10. Nonskilled managers\",\n        \"11. Nonskilled supervisors\",\n        \"12. Nonskilled workers\"\n      )\n    )\n  ) %>%\n  set_variable_labels(wrightclass1_original = \"Wright Class Typology\")\n\nfrq(data$wrightclass1_original)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nWright Class Typology (x) <categorical> \n# total N=3048 valid N=3028 mean=7.27 sd=3.82\n\nValue                      |   N | Raw % | Valid % | Cum. %\n-----------------------------------------------------------\n1. Employers               | 108 |  3.54 |    3.57 |   3.57\n2. Small employers         | 276 |  9.06 |    9.11 |  12.68\n3. Petty bourgeoisie       | 551 | 18.08 |   18.20 |  30.88\n4. Expert managers         |  92 |  3.02 |    3.04 |  33.92\n5. Expert supervisors      |  44 |  1.44 |    1.45 |  35.37\n6. Experts                 | 245 |  8.04 |    8.09 |  43.46\n7. Skilled managers        |  88 |  2.89 |    2.91 |  46.37\n8. Skilled supervisors     |  79 |  2.59 |    2.61 |  48.98\n9. Skilled workers         | 688 | 22.57 |   22.72 |  71.70\n10. Nonskilled managers    |  20 |  0.66 |    0.66 |  72.36\n11. Nonskilled supervisors |  38 |  1.25 |    1.25 |  73.61\n12. Nonskilled workers     | 799 | 26.21 |   26.39 | 100.00\n<NA>                       |  20 |  0.66 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\n# base survey\ndata_svy <- as_survey_design(data, weights = rake_wb2)\n\n# Tabla de frecuencias ponderadas\nwright_freq <- data_svy %>%\n  group_by(wrightclass1_original) %>%\n  summarise(\n    freq = survey_mean(vartype = NULL, na.rm = TRUE),\n    n_unweighted = unweighted(n())\n  ) %>%\n  mutate(\n    freq_pct = freq * 100\n  )\n\nwright_freq %>%\n  print(n = Inf)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 13 × 4\n   wrightclass1_original         freq n_unweighted freq_pct\n   <fct>                        <dbl>        <int>    <dbl>\n 1 1. Employers               0.0187           108    1.87 \n 2 2. Small employers         0.0635           276    6.35 \n 3 3. Petty bourgeoisie       0.145            551   14.5  \n 4 4. Expert managers         0.0279            92    2.79 \n 5 5. Expert supervisors      0.0142            44    1.42 \n 6 6. Experts                 0.0768           245    7.68 \n 7 7. Skilled managers        0.0435            88    4.35 \n 8 8. Skilled supervisors     0.0212            79    2.12 \n 9 9. Skilled workers         0.231            688   23.1  \n10 10. Nonskilled managers    0.00926           20    0.926\n11 11. Nonskilled supervisors 0.00957           38    0.957\n12 12. Nonskilled workers     0.337            799   33.7  \n13 <NA>                       0.00314           20    0.314\n```\n:::\n:::\n\n\n### wrightclass2_capitalists\n\n**capitalists: employers 50 o más trabajadores**\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- data %>%\n  mutate(\n    wrightclass2_capitalists = case_when(\n      as.integer(owners2) == 3 ~ 1,  # 1. Capitalists\n      as.integer(owners2) == 2 ~ 2,  # 2. Small employers\n      as.integer(owners2) == 1 ~ 3,  # 3. Petty bourgeoisie\n      \n      as.integer(organization_assets) == 1 & as.integer(skills) == 1 ~ 4,  # 4. Expert managers\n      as.integer(organization_assets) == 2 & as.integer(skills) == 1 ~ 5,  # 5. Expert supervisors\n      as.integer(organization_assets) == 3 & as.integer(skills) == 1 ~ 6,  # 6. Experts\n      \n      as.integer(organization_assets) == 1 & as.integer(skills) == 2 ~ 7,  # 7. Skilled managers\n      as.integer(organization_assets) == 2 & as.integer(skills) == 2 ~ 8,  # 8. Skilled supervisors\n      as.integer(organization_assets) == 3 & as.integer(skills) == 2 ~ 9,  # 9. Skilled workers\n      \n      as.integer(organization_assets) == 1 & as.integer(skills) == 3 ~ 10, # 10. Nonskilled managers\n      as.integer(organization_assets) == 2 & as.integer(skills) == 3 ~ 11, # 11. Nonskilled supervisors\n      as.integer(organization_assets) == 3 & as.integer(skills) == 3 ~ 12  # 12. Nonskilled workers\n    ),\n    wrightclass2_capitalists = factor(\n      wrightclass2_capitalists,\n      levels = 1:12,\n      labels = c(\n        \"1. Capitalists\",\n        \"2. Small employers\",\n        \"3. Petty bourgeoisie\",\n        \"4. Expert managers\",\n        \"5. Expert supervisors\",\n        \"6. Experts\",\n        \"7. Skilled managers\",\n        \"8. Skilled supervisors\",\n        \"9. Skilled workers\",\n        \"10. Nonskilled managers\",\n        \"11. Nonskilled supervisors\",\n        \"12. Nonskilled workers\"\n      )\n    )\n  ) %>%\n  set_variable_labels(wrightclass2_capitalists = \"Wright Class Typology (2)\")\n\nfrq(data$wrightclass2_capitalists)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nWright Class Typology (2) (x) <categorical> \n# total N=3048 valid N=3028 mean=7.29 sd=3.79\n\nValue                      |   N | Raw % | Valid % | Cum. %\n-----------------------------------------------------------\n1. Capitalists             |  36 |  1.18 |    1.19 |   1.19\n2. Small employers         | 348 | 11.42 |   11.49 |  12.68\n3. Petty bourgeoisie       | 551 | 18.08 |   18.20 |  30.88\n4. Expert managers         |  92 |  3.02 |    3.04 |  33.92\n5. Expert supervisors      |  44 |  1.44 |    1.45 |  35.37\n6. Experts                 | 245 |  8.04 |    8.09 |  43.46\n7. Skilled managers        |  88 |  2.89 |    2.91 |  46.37\n8. Skilled supervisors     |  79 |  2.59 |    2.61 |  48.98\n9. Skilled workers         | 688 | 22.57 |   22.72 |  71.70\n10. Nonskilled managers    |  20 |  0.66 |    0.66 |  72.36\n11. Nonskilled supervisors |  38 |  1.25 |    1.25 |  73.61\n12. Nonskilled workers     | 799 | 26.21 |   26.39 | 100.00\n<NA>                       |  20 |  0.66 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\n# base survey\ndata_svy <- as_survey_design(data, weights = rake_wb2)\n\n# Tabla de frecuencias ponderadas\nwright_freq_2 <- data_svy %>%\n  group_by(wrightclass2_capitalists) %>%\n  summarise(\n    freq = survey_mean(vartype = NULL, na.rm = TRUE),\n    n_unweighted = unweighted(n())\n  ) %>%\n  mutate(\n    freq_pct = freq * 100\n  )\n\nwright_freq_2 %>%\n  print(n = Inf)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 13 × 4\n   wrightclass2_capitalists      freq n_unweighted freq_pct\n   <fct>                        <dbl>        <int>    <dbl>\n 1 1. Capitalists             0.00897           36    0.897\n 2 2. Small employers         0.0732           348    7.32 \n 3 3. Petty bourgeoisie       0.145            551   14.5  \n 4 4. Expert managers         0.0279            92    2.79 \n 5 5. Expert supervisors      0.0142            44    1.42 \n 6 6. Experts                 0.0768           245    7.68 \n 7 7. Skilled managers        0.0435            88    4.35 \n 8 8. Skilled supervisors     0.0212            79    2.12 \n 9 9. Skilled workers         0.231            688   23.1  \n10 10. Nonskilled managers    0.00926           20    0.926\n11 11. Nonskilled supervisors 0.00957           38    0.957\n12 12. Nonskilled workers     0.337            799   33.7  \n13 <NA>                       0.00314           20    0.314\n```\n:::\n:::\n\n\n### wrightclass1_informal\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- data %>%\n  mutate(\n    wrightclass1_informal = case_when(\n      as.integer(owners) == 3 ~ 1,  # 1. Employers\n      as.integer(owners) == 2 ~ 2,  # 2. Small employers\n      \n      as.integer(owners) == 1 & a06_boleta == 1 ~ 3,   # 3. Petty bourgeoisie\n      as.integer(owners) == 1 & a06_boleta == 0 ~ 4,   # 4. Informal self-employed\n      \n      as.integer(organization_assets) == 1 & as.integer(skills) == 1 ~ 5,  # 5. Expert managers\n      as.integer(organization_assets) == 2 & as.integer(skills) == 1 ~ 6,  # 6. Expert supervisors\n      as.integer(organization_assets) == 3 & as.integer(skills) == 1 ~ 7,  # 7. Experts\n      \n      as.integer(organization_assets) == 1 & as.integer(skills) == 2 ~ 8,  # 8. Skilled managers\n      as.integer(organization_assets) == 2 & as.integer(skills) == 2 ~ 9,  # 9. skilled supervisors\n      as.integer(organization_assets) == 1 & as.integer(skills) == 3 ~ 10, # 10. Nonskilled managers\n      as.integer(organization_assets) == 2 & as.integer(skills) == 3 ~ 11, # 11. Nonskilled supervisors\n      \n      as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18_contrato == 1 ~ 12, # 12. Formal workers\n      as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18_contrato == 0 ~ 13  # 13. Informal workers\n    ),\n    wrightclass1_informal = factor(\n      wrightclass1_informal,\n      levels = 1:13,\n      labels = c(\n        \"1. Employers\",\n        \"2. Small employers\",\n        \"3. Petty bourgeoisie\",\n        \"4. Informal self-employed\",\n        \"5. Expert managers\",\n        \"6. Expert supervisors\",\n        \"7. Experts\",\n        \"8. Skilled managers\",\n        \"9. Skilled supervisors\",\n        \"10. Nonskilled managers\",\n        \"11. Nonskilled supervisors\",\n        \"12. Formal workers\",\n        \"13. Informal workers\"\n      )\n    )\n  ) %>%\n  set_variable_labels(wrightclass1_informal = \"Wright Class Typology + Informal (3)\")\n\nfrq(data$wrightclass1_informal)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nWright Class Typology + Informal (3) (x) <categorical> \n# total N=3048 valid N=3028 mean=8.36 sd=4.22\n\nValue                      |    N | Raw % | Valid % | Cum. %\n------------------------------------------------------------\n1. Employers               |  108 |  3.54 |    3.57 |   3.57\n2. Small employers         |  276 |  9.06 |    9.11 |  12.68\n3. Petty bourgeoisie       |  196 |  6.43 |    6.47 |  19.15\n4. Informal self-employed  |  355 | 11.65 |   11.72 |  30.88\n5. Expert managers         |   92 |  3.02 |    3.04 |  33.92\n6. Expert supervisors      |   44 |  1.44 |    1.45 |  35.37\n7. Experts                 |  245 |  8.04 |    8.09 |  43.46\n8. Skilled managers        |   88 |  2.89 |    2.91 |  46.37\n9. Skilled supervisors     |   79 |  2.59 |    2.61 |  48.98\n10. Nonskilled managers    |   20 |  0.66 |    0.66 |  49.64\n11. Nonskilled supervisors |   38 |  1.25 |    1.25 |  50.89\n12. Formal workers         | 1150 | 37.73 |   37.98 |  88.87\n13. Informal workers       |  337 | 11.06 |   11.13 | 100.00\n<NA>                       |   20 |  0.66 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\n# base survey\ndata_svy <- as_survey_design(data, weights = rake_wb2)\n\n# Tabla de frecuencias ponderadas\nwright_freq_3 <- data_svy %>%\n  group_by(wrightclass1_informal) %>%\n  summarise(\n    freq = survey_mean(vartype = NULL, na.rm = TRUE),\n    n_unweighted = unweighted(n())\n  ) %>%\n  mutate(\n    freq_pct = freq * 100\n  )\n\nwright_freq_3 %>%\n  print(n = Inf)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 14 × 4\n   wrightclass1_informal         freq n_unweighted freq_pct\n   <fct>                        <dbl>        <int>    <dbl>\n 1 1. Employers               0.0187           108    1.87 \n 2 2. Small employers         0.0635           276    6.35 \n 3 3. Petty bourgeoisie       0.0541           196    5.41 \n 4 4. Informal self-employed  0.0908           355    9.08 \n 5 5. Expert managers         0.0279            92    2.79 \n 6 6. Expert supervisors      0.0142            44    1.42 \n 7 7. Experts                 0.0768           245    7.68 \n 8 8. Skilled managers        0.0435            88    4.35 \n 9 9. Skilled supervisors     0.0212            79    2.12 \n10 10. Nonskilled managers    0.00926           20    0.926\n11 11. Nonskilled supervisors 0.00957           38    0.957\n12 12. Formal workers         0.435           1150   43.5  \n13 13. Informal workers       0.133            337   13.3  \n14 <NA>                       0.00314           20    0.314\n```\n:::\n:::\n\n\n### wrightclass2_informal\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- data %>%\n  mutate(\n    wrightclass2_informal = case_when(\n      as.integer(owners2) == 3 ~ 1,  # 1. Capitalists\n      as.integer(owners2) == 2 ~ 2,  # 2. Small employers\n      \n      as.integer(owners2) == 1 & a06_boleta == 1 ~ 3,   # 3. Petty bourgeoisie\n      as.integer(owners2) == 1 & a06_boleta == 0 ~ 4,   # 4. Informal self-employed\n      \n      as.integer(organization_assets) == 1 & as.integer(skills) == 1 ~ 5,  # 5. Expert managers\n      as.integer(organization_assets) == 2 & as.integer(skills) == 1 ~ 6,  # 6. Expert supervisors\n      as.integer(organization_assets) == 3 & as.integer(skills) == 1 ~ 7,  # 7. Experts\n      \n      as.integer(organization_assets) == 1 & as.integer(skills) == 2 ~ 8,  # 8. Skilled managers\n      as.integer(organization_assets) == 2 & as.integer(skills) == 2 ~ 9,  # 9. skilled supervisors\n      as.integer(organization_assets) == 1 & as.integer(skills) == 3 ~ 10, # 10. Nonskilled managers\n      as.integer(organization_assets) == 2 & as.integer(skills) == 3 ~ 11, # 11. Nonskilled supervisors\n      \n      as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18_contrato == 1 ~ 12, # 12. Formal workers\n      as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18_contrato == 0 ~ 13  # 13. Informal workers\n    ),\n    wrightclass2_informal = factor(\n      wrightclass2_informal,\n      levels = 1:13,\n      labels = c(\n        \"1. Capitalists\",\n        \"2. Small employers\",\n        \"3. Petty bourgeoisie\",\n        \"4. Informal self-employed\",\n        \"5. Expert managers\",\n        \"6. Expert supervisors\",\n        \"7. Experts\",\n        \"8. Skilled managers\",\n        \"9. Skilled supervisors\",\n        \"10. Nonskilled managers\",\n        \"11. Nonskilled supervisors\",\n        \"12. Formal workers\",\n        \"13. Informal workers\"\n      )\n    )\n  ) %>%\n  set_variable_labels(wrightclass2_informal = \"Wright Class Typology + Informal (4)\")\n\nfrq(data$wrightclass2_informal)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nWright Class Typology + Informal (4) (x) <categorical> \n# total N=3048 valid N=3028 mean=8.39 sd=4.18\n\nValue                      |    N | Raw % | Valid % | Cum. %\n------------------------------------------------------------\n1. Capitalists             |   36 |  1.18 |    1.19 |   1.19\n2. Small employers         |  348 | 11.42 |   11.49 |  12.68\n3. Petty bourgeoisie       |  196 |  6.43 |    6.47 |  19.15\n4. Informal self-employed  |  355 | 11.65 |   11.72 |  30.88\n5. Expert managers         |   92 |  3.02 |    3.04 |  33.92\n6. Expert supervisors      |   44 |  1.44 |    1.45 |  35.37\n7. Experts                 |  245 |  8.04 |    8.09 |  43.46\n8. Skilled managers        |   88 |  2.89 |    2.91 |  46.37\n9. Skilled supervisors     |   79 |  2.59 |    2.61 |  48.98\n10. Nonskilled managers    |   20 |  0.66 |    0.66 |  49.64\n11. Nonskilled supervisors |   38 |  1.25 |    1.25 |  50.89\n12. Formal workers         | 1150 | 37.73 |   37.98 |  88.87\n13. Informal workers       |  337 | 11.06 |   11.13 | 100.00\n<NA>                       |   20 |  0.66 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\n# base survey\ndata_svy <- as_survey_design(data, weights = rake_wb2)\n\n# Tabla de frecuencias ponderadas\nwright_freq_4 <- data_svy %>%\n  group_by(wrightclass2_informal) %>%\n  summarise(\n    freq = survey_mean(vartype = NULL, na.rm = TRUE),\n    n_unweighted = unweighted(n())\n  ) %>%\n  mutate(\n    freq_pct = freq * 100\n  )\n\nwright_freq_4 %>%\n  print(n = Inf)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 14 × 4\n   wrightclass2_informal         freq n_unweighted freq_pct\n   <fct>                        <dbl>        <int>    <dbl>\n 1 1. Capitalists             0.00897           36    0.897\n 2 2. Small employers         0.0732           348    7.32 \n 3 3. Petty bourgeoisie       0.0541           196    5.41 \n 4 4. Informal self-employed  0.0908           355    9.08 \n 5 5. Expert managers         0.0279            92    2.79 \n 6 6. Expert supervisors      0.0142            44    1.42 \n 7 7. Experts                 0.0768           245    7.68 \n 8 8. Skilled managers        0.0435            88    4.35 \n 9 9. Skilled supervisors     0.0212            79    2.12 \n10 10. Nonskilled managers    0.00926           20    0.926\n11 11. Nonskilled supervisors 0.00957           38    0.957\n12 12. Formal workers         0.435           1150   43.5  \n13 13. Informal workers       0.133            337   13.3  \n14 <NA>                       0.00314           20    0.314\n```\n:::\n:::\n\n\n### wrightclass1_reduced\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- data %>%\n  mutate(\n    wrightclass1_reduced = case_when(\n      as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18_contrato == 1 ~ 1,  # 1. Formal workers\n      as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18_contrato == 0 ~ 2,  # 2. Informal workers\n      as.integer(owners) == 1 & a06_boleta == 0 ~ 3,                                                   # 3. Informal self-employed\n      as.integer(organization_assets) == 3 & as.integer(skills) == 1 ~ 4,                              # 4. Experts\n      as.integer(organization_assets) == 2 & as.integer(skills) %in% c(1, 2, 3) ~ 5,                   # 5. Supervisors\n      as.integer(organization_assets) == 1 & as.integer(skills) %in% c(1, 2, 3) ~ 6,                   # 6. Managers\n      as.integer(owners) == 1 & a06_boleta == 1 ~ 7,                                                   # 7. Petty bourgeoisie\n      as.integer(owners) == 2 ~ 8,                                                                     # 8. Small employers\n      as.integer(owners) == 3 ~ 9                                                                      # 9. Employers\n    ),\n    wrightclass1_reduced = factor(\n      wrightclass1_reduced,\n      levels = 1:9,\n      labels = c(\n        \"1. Formal workers\",\n        \"2. Informal workers\",\n        \"3. Informal self-employed\",\n        \"4. Experts\",       \n        \"5. Supervisors\",\n        \"6. Managers\",\n        \"7. Petty bourgeoisie\",\n        \"8. Small employers\",\n        \"9. Employers\"\n      )\n    )\n  ) %>%\n  set_variable_labels(wrightclass1_reduced = \"Wright Class Typology  Reduced (5)\")\n\nfrq(data$wrightclass1_reduced)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nWright Class Typology Reduced (5) (x) <categorical> \n# total N=3048 valid N=3028 mean=3.44 sd=2.63\n\nValue                     |    N | Raw % | Valid % | Cum. %\n-----------------------------------------------------------\n1. Formal workers         | 1150 | 37.73 |   37.98 |  37.98\n2. Informal workers       |  337 | 11.06 |   11.13 |  49.11\n3. Informal self-employed |  355 | 11.65 |   11.72 |  60.83\n4. Experts                |  245 |  8.04 |    8.09 |  68.92\n5. Supervisors            |  161 |  5.28 |    5.32 |  74.24\n6. Managers               |  200 |  6.56 |    6.61 |  80.85\n7. Petty bourgeoisie      |  196 |  6.43 |    6.47 |  87.32\n8. Small employers        |  276 |  9.06 |    9.11 |  96.43\n9. Employers              |  108 |  3.54 |    3.57 | 100.00\n<NA>                      |   20 |  0.66 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\n# base survey\ndata_svy <- as_survey_design(data, weights = rake_wb2)\n\n# Tabla de frecuencias ponderadas\nwright_freq_5 <- data_svy %>%\n  group_by(wrightclass1_reduced) %>%\n  summarise(\n    freq = survey_mean(vartype = NULL, na.rm = TRUE),\n    n_unweighted = unweighted(n())\n  ) %>%\n  mutate(\n    freq_pct = freq * 100\n  )\n\nwright_freq_5 %>%\n  print(n = Inf)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 10 × 4\n   wrightclass1_reduced         freq n_unweighted freq_pct\n   <fct>                       <dbl>        <int>    <dbl>\n 1 1. Formal workers         0.435           1150   43.5  \n 2 2. Informal workers       0.133            337   13.3  \n 3 3. Informal self-employed 0.0908           355    9.08 \n 4 4. Experts                0.0768           245    7.68 \n 5 5. Supervisors            0.0450           161    4.50 \n 6 6. Managers               0.0806           200    8.06 \n 7 7. Petty bourgeoisie      0.0541           196    5.41 \n 8 8. Small employers        0.0635           276    6.35 \n 9 9. Employers              0.0187           108    1.87 \n10 <NA>                      0.00314           20    0.314\n```\n:::\n:::\n\n\n### wrightclass2_reduced\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- data %>%\n  mutate(\n    wrightclass2_reduced = case_when(\n      as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18 == 1 ~ 1,                  # 1. Formal workers\n      as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18 %in% c(2, 3, 4, -999) ~ 2, # 2. Informal workers\n      as.integer(owners2) == 1 & a06_boleta == 0 ~ 3,                                                         # 3. Informal self-employed\n      as.integer(organization_assets) == 3 & as.integer(skills) == 1 ~ 4,                                     # 4. Experts      \n      as.integer(organization_assets) == 2 & as.integer(skills) %in% c(1, 2, 3) ~ 5,                          # 5. Supervisors\n      as.integer(organization_assets) == 1 & as.integer(skills) %in% c(1, 2, 3) ~ 6,                          # 6. Managers\n      as.integer(owners2) == 1 & a06_boleta == 1 ~ 7,                                                         # 7. Petty bourgeoisie\n      as.integer(owners2) == 2 ~ 8,                                                                           # 8. Small employers\n      as.integer(owners2) == 3 ~ 9                                                                            # 9. Capitalists\n    ),\n    wrightclass2_reduced = factor(\n      wrightclass2_reduced,\n      levels = 1:9,\n      labels = c(\n        \"1. Formal workers\",\n        \"2. Informal workers\",\n        \"3. Informal self-employed\",\n        \"4. Experts\",\n        \"5. Supervisors\",\n        \"6. Managers\",\n        \"7. Petty bourgeoisie\",\n        \"8. Small employers\",\n        \"9. Capitalists\"\n      )\n    )\n  ) %>%\n  set_variable_labels(wrightclass2_reduced = \"Wright Class Typology Reduced + Informal (6)\")\n\nfrq(data$wrightclass2_reduced)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nWright Class Typology Reduced + Informal (6) (x) <categorical> \n# total N=3048 valid N=3028 mean=3.42 sd=2.58\n\nValue                     |    N | Raw % | Valid % | Cum. %\n-----------------------------------------------------------\n1. Formal workers         | 1150 | 37.73 |   37.98 |  37.98\n2. Informal workers       |  337 | 11.06 |   11.13 |  49.11\n3. Informal self-employed |  355 | 11.65 |   11.72 |  60.83\n4. Experts                |  245 |  8.04 |    8.09 |  68.92\n5. Supervisors            |  161 |  5.28 |    5.32 |  74.24\n6. Managers               |  200 |  6.56 |    6.61 |  80.85\n7. Petty bourgeoisie      |  196 |  6.43 |    6.47 |  87.32\n8. Small employers        |  348 | 11.42 |   11.49 |  98.81\n9. Capitalists            |   36 |  1.18 |    1.19 | 100.00\n<NA>                      |   20 |  0.66 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\n# base survey\ndata_svy <- as_survey_design(data, weights = rake_wb2)\n\n# Tabla de frecuencias ponderadas\nwright_freq_6 <- data_svy %>%\n  group_by(wrightclass2_reduced) %>%\n  summarise(\n    freq = survey_mean(vartype = NULL, na.rm = TRUE),\n    n_unweighted = unweighted(n())\n  ) %>%\n  mutate(\n    freq_pct = freq * 100\n  )\n\nwright_freq_6 %>%\n  print(n = Inf)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 10 × 4\n   wrightclass2_reduced         freq n_unweighted freq_pct\n   <fct>                       <dbl>        <int>    <dbl>\n 1 1. Formal workers         0.435           1150   43.5  \n 2 2. Informal workers       0.133            337   13.3  \n 3 3. Informal self-employed 0.0908           355    9.08 \n 4 4. Experts                0.0768           245    7.68 \n 5 5. Supervisors            0.0450           161    4.50 \n 6 6. Managers               0.0806           200    8.06 \n 7 7. Petty bourgeoisie      0.0541           196    5.41 \n 8 8. Small employers        0.0732           348    7.32 \n 9 9. Capitalists            0.00897           36    0.897\n10 <NA>                      0.00314           20    0.314\n```\n:::\n:::\n\n\n## Dependent variables\n\n### c01_01\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data$c01_01)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nx <numeric> \n# total N=3048 valid N=3048 mean=-33.20 sd=186.69\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n -999 |  33 |  1.08 |    1.08 |   1.08\n -888 |  97 |  3.18 |    3.18 |   4.27\n    0 | 123 |  4.04 |    4.04 |   8.30\n    1 |  51 |  1.67 |    1.67 |   9.97\n    2 | 101 |  3.31 |    3.31 |  13.29\n    3 | 192 |  6.30 |    6.30 |  19.59\n    4 | 271 |  8.89 |    8.89 |  28.48\n    5 | 509 | 16.70 |   16.70 |  45.18\n    6 | 390 | 12.80 |   12.80 |  57.97\n    7 | 324 | 10.63 |   10.63 |  68.60\n    8 | 283 |  9.28 |    9.28 |  77.89\n    9 | 159 |  5.22 |    5.22 |  83.10\n   10 | 515 | 16.90 |   16.90 | 100.00\n <NA> |   0 |  0.00 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\ndata <- data %>%\n  mutate(\n    c01_01 = case_when(\n      c01_01 %in% c(-888, -999) ~ NA_real_,\n      TRUE ~ as.numeric(c01_01)\n    )\n  ) %>% \n  set_variable_labels(c01_01 = \"Importance of unions: in achieving better wages\")\n\nfrq(data$c01_01)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nImportance of unions: in achieving better wages (x) <numeric> \n# total N=3048 valid N=2918 mean=6.14 sd=2.73\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    0 | 123 |  4.04 |    4.22 |   4.22\n    1 |  51 |  1.67 |    1.75 |   5.96\n    2 | 101 |  3.31 |    3.46 |   9.42\n    3 | 192 |  6.30 |    6.58 |  16.00\n    4 | 271 |  8.89 |    9.29 |  25.29\n    5 | 509 | 16.70 |   17.44 |  42.73\n    6 | 390 | 12.80 |   13.37 |  56.10\n    7 | 324 | 10.63 |   11.10 |  67.20\n    8 | 283 |  9.28 |    9.70 |  76.90\n    9 | 159 |  5.22 |    5.45 |  82.35\n   10 | 515 | 16.90 |   17.65 | 100.00\n <NA> | 130 |  4.27 |    <NA> |   <NA>\n```\n:::\n:::\n\n\n### c01_02\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data$c01_02)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nx <numeric> \n# total N=3048 valid N=3048 mean=-34.76 sd=189.62\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n -999 |  28 |  0.92 |    0.92 |   0.92\n -888 | 108 |  3.54 |    3.54 |   4.46\n    0 | 118 |  3.87 |    3.87 |   8.33\n    1 |  41 |  1.35 |    1.35 |   9.68\n    2 |  90 |  2.95 |    2.95 |  12.63\n    3 | 179 |  5.87 |    5.87 |  18.50\n    4 | 263 |  8.63 |    8.63 |  27.13\n    5 | 532 | 17.45 |   17.45 |  44.59\n    6 | 409 | 13.42 |   13.42 |  58.01\n    7 | 332 | 10.89 |   10.89 |  68.90\n    8 | 317 | 10.40 |   10.40 |  79.30\n    9 | 162 |  5.31 |    5.31 |  84.61\n   10 | 469 | 15.39 |   15.39 | 100.00\n <NA> |   0 |  0.00 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\ndata <- data %>%\n  mutate(\n    c01_02 = case_when(\n      c01_02 %in% c(-888, -999) ~ NA_real_,\n      TRUE ~ as.numeric(c01_02)\n    )\n  ) %>% \n  set_variable_labels(c01_02 = \"Importance of unions: in achieving reducing inequality\")\n\nfrq(data$c01_02)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nImportance of unions: in achieving reducing inequality (x) <numeric> \n# total N=3048 valid N=2912 mean=6.16 sd=2.65\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    0 | 118 |  3.87 |    4.05 |   4.05\n    1 |  41 |  1.35 |    1.41 |   5.46\n    2 |  90 |  2.95 |    3.09 |   8.55\n    3 | 179 |  5.87 |    6.15 |  14.70\n    4 | 263 |  8.63 |    9.03 |  23.73\n    5 | 532 | 17.45 |   18.27 |  42.00\n    6 | 409 | 13.42 |   14.05 |  56.04\n    7 | 332 | 10.89 |   11.40 |  67.45\n    8 | 317 | 10.40 |   10.89 |  78.33\n    9 | 162 |  5.31 |    5.56 |  83.89\n   10 | 469 | 15.39 |   16.11 | 100.00\n <NA> | 136 |  4.46 |    <NA> |   <NA>\n```\n:::\n:::\n\n\n### c01_03\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data$c01_03)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nx <numeric> \n# total N=3048 valid N=3048 mean=-32.79 sd=185.62\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n -999 |  23 |  0.75 |    0.75 |   0.75\n -888 | 108 |  3.54 |    3.54 |   4.30\n    0 |  94 |  3.08 |    3.08 |   7.38\n    1 |  39 |  1.28 |    1.28 |   8.66\n    2 |  79 |  2.59 |    2.59 |  11.25\n    3 | 155 |  5.09 |    5.09 |  16.34\n    4 | 232 |  7.61 |    7.61 |  23.95\n    5 | 496 | 16.27 |   16.27 |  40.22\n    6 | 388 | 12.73 |   12.73 |  52.95\n    7 | 322 | 10.56 |   10.56 |  63.52\n    8 | 317 | 10.40 |   10.40 |  73.92\n    9 | 213 |  6.99 |    6.99 |  80.91\n   10 | 582 | 19.09 |   19.09 | 100.00\n <NA> |   0 |  0.00 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\ndata <- data %>%\n  mutate(\n    c01_03 = case_when(\n      c01_03 %in% c(-888, -999) ~ NA_real_,\n      TRUE ~ as.numeric(c01_03)\n    )\n  ) %>% \n  set_variable_labels(c01_03 = \"Importance of unions: in protecting women workers' rights\")\n\nfrq(data$c01_03)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nImportance of unions: in protecting women workers' rights (x) <numeric> \n# total N=3048 valid N=2917 mean=6.49 sd=2.66\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    0 |  94 |  3.08 |    3.22 |   3.22\n    1 |  39 |  1.28 |    1.34 |   4.56\n    2 |  79 |  2.59 |    2.71 |   7.27\n    3 | 155 |  5.09 |    5.31 |  12.58\n    4 | 232 |  7.61 |    7.95 |  20.53\n    5 | 496 | 16.27 |   17.00 |  37.54\n    6 | 388 | 12.73 |   13.30 |  50.84\n    7 | 322 | 10.56 |   11.04 |  61.88\n    8 | 317 | 10.40 |   10.87 |  72.75\n    9 | 213 |  6.99 |    7.30 |  80.05\n   10 | 582 | 19.09 |   19.95 | 100.00\n <NA> | 131 |  4.30 |    <NA> |   <NA>\n```\n:::\n:::\n\n\n### c01_04\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data$c01_04)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nx <numeric> \n# total N=3048 valid N=3048 mean=-47.20 sd=213.21\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n -999 |  23 |  0.75 |    0.75 |   0.75\n -888 | 155 |  5.09 |    5.09 |   5.84\n    0 | 234 |  7.68 |    7.68 |  13.52\n    1 |  60 |  1.97 |    1.97 |  15.49\n    2 |  87 |  2.85 |    2.85 |  18.34\n    3 | 188 |  6.17 |    6.17 |  24.51\n    4 | 244 |  8.01 |    8.01 |  32.51\n    5 | 502 | 16.47 |   16.47 |  48.98\n    6 | 356 | 11.68 |   11.68 |  60.66\n    7 | 317 | 10.40 |   10.40 |  71.06\n    8 | 271 |  8.89 |    8.89 |  79.95\n    9 | 155 |  5.09 |    5.09 |  85.04\n   10 | 456 | 14.96 |   14.96 | 100.00\n <NA> |   0 |  0.00 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\ndata <- data %>%\n  mutate(\n    c01_04 = case_when(\n      c01_04 %in% c(-888, -999) ~ NA_real_,\n      TRUE ~ as.numeric(c01_04)\n    )\n  ) %>% \n  set_variable_labels(c01_04 = \"Importance of unions: in protecting informal workers' rights\")\n\nfrq(data$c01_04)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nImportance of unions: in protecting informal workers' rights (x) <numeric> \n# total N=3048 valid N=2870 mean=5.84 sd=2.92\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    0 | 234 |  7.68 |    8.15 |   8.15\n    1 |  60 |  1.97 |    2.09 |  10.24\n    2 |  87 |  2.85 |    3.03 |  13.28\n    3 | 188 |  6.17 |    6.55 |  19.83\n    4 | 244 |  8.01 |    8.50 |  28.33\n    5 | 502 | 16.47 |   17.49 |  45.82\n    6 | 356 | 11.68 |   12.40 |  58.22\n    7 | 317 | 10.40 |   11.05 |  69.27\n    8 | 271 |  8.89 |    9.44 |  78.71\n    9 | 155 |  5.09 |    5.40 |  84.11\n   10 | 456 | 14.96 |   15.89 | 100.00\n <NA> | 178 |  5.84 |    <NA> |   <NA>\n```\n:::\n:::\n\n\n### c01_05\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data$c01_05)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nx <numeric> \n# total N=3048 valid N=3048 mean=-36.98 sd=193.85\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n -999 |  20 |  0.66 |    0.66 |   0.66\n -888 | 125 |  4.10 |    4.10 |   4.76\n    0 | 121 |  3.97 |    3.97 |   8.73\n    1 |  38 |  1.25 |    1.25 |   9.97\n    2 |  95 |  3.12 |    3.12 |  13.09\n    3 | 147 |  4.82 |    4.82 |  17.91\n    4 | 249 |  8.17 |    8.17 |  26.08\n    5 | 494 | 16.21 |   16.21 |  42.29\n    6 | 408 | 13.39 |   13.39 |  55.68\n    7 | 333 | 10.93 |   10.93 |  66.60\n    8 | 316 | 10.37 |   10.37 |  76.97\n    9 | 202 |  6.63 |    6.63 |  83.60\n   10 | 500 | 16.40 |   16.40 | 100.00\n <NA> |   0 |  0.00 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\ndata <- data %>%\n  mutate(\n    c01_05 = case_when(\n      c01_05 %in% c(-888, -999) ~ NA_real_,\n      TRUE ~ as.numeric(c01_05)\n    )\n  ) %>% \n  set_variable_labels(c01_05 = \"Importance of unions: in protecting women workers' rights\")\n\nfrq(data$c01_05)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nImportance of unions: in protecting women workers' rights (x) <numeric> \n# total N=3048 valid N=2903 mean=6.29 sd=2.68\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    0 | 121 |  3.97 |    4.17 |   4.17\n    1 |  38 |  1.25 |    1.31 |   5.48\n    2 |  95 |  3.12 |    3.27 |   8.75\n    3 | 147 |  4.82 |    5.06 |  13.81\n    4 | 249 |  8.17 |    8.58 |  22.39\n    5 | 494 | 16.21 |   17.02 |  39.41\n    6 | 408 | 13.39 |   14.05 |  53.46\n    7 | 333 | 10.93 |   11.47 |  64.93\n    8 | 316 | 10.37 |   10.89 |  75.82\n    9 | 202 |  6.63 |    6.96 |  82.78\n   10 | 500 | 16.40 |   17.22 | 100.00\n <NA> | 145 |  4.76 |    <NA> |   <NA>\n```\n:::\n:::\n\n\n### c01_06\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data$c01_06)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nx <numeric> \n# total N=3048 valid N=3048 mean=-47.87 sd=215.20\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n -999 |  25 |  0.82 |    0.82 |   0.82\n -888 | 156 |  5.12 |    5.12 |   5.94\n    0 | 151 |  4.95 |    4.95 |  10.89\n    1 |  43 |  1.41 |    1.41 |  12.30\n    2 |  88 |  2.89 |    2.89 |  15.19\n    3 | 161 |  5.28 |    5.28 |  20.47\n    4 | 240 |  7.87 |    7.87 |  28.35\n    5 | 486 | 15.94 |   15.94 |  44.29\n    6 | 405 | 13.29 |   13.29 |  57.58\n    7 | 354 | 11.61 |   11.61 |  69.19\n    8 | 302 |  9.91 |    9.91 |  79.10\n    9 | 190 |  6.23 |    6.23 |  85.33\n   10 | 447 | 14.67 |   14.67 | 100.00\n <NA> |   0 |  0.00 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\ndata <- data %>%\n  mutate(\n    c01_06 = case_when(\n      c01_06 %in% c(-888, -999) ~ NA_real_,\n      TRUE ~ as.numeric(c01_06)\n    )\n  ) %>% \n  set_variable_labels(c01_06 = \"Importance of unions: in helping family-work arrangements\")\n\nfrq(data$c01_06)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nImportance of unions: in helping family-work arrangements (x) <numeric> \n# total N=3048 valid N=2867 mean=6.14 sd=2.72\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    0 | 151 |  4.95 |    5.27 |   5.27\n    1 |  43 |  1.41 |    1.50 |   6.77\n    2 |  88 |  2.89 |    3.07 |   9.84\n    3 | 161 |  5.28 |    5.62 |  15.45\n    4 | 240 |  7.87 |    8.37 |  23.82\n    5 | 486 | 15.94 |   16.95 |  40.77\n    6 | 405 | 13.29 |   14.13 |  54.90\n    7 | 354 | 11.61 |   12.35 |  67.25\n    8 | 302 |  9.91 |   10.53 |  77.78\n    9 | 190 |  6.23 |    6.63 |  84.41\n   10 | 447 | 14.67 |   15.59 | 100.00\n <NA> | 181 |  5.94 |    <NA> |   <NA>\n```\n:::\n:::\n\n\n### c07_03\n\n\n::: {.cell}\n\n:::\n\n\nc07_03 gobierno más poder a los sindicatos, 888 999 como NA\nc07_03_dummy 1== muy de acuerdo, de acuerdo , 0 = todo el resto incluyendo NA\n\n### b29\n\n\n::: {.cell}\n\n:::\n\n\n\nb29 1 == tal vez, prob si y definitivamente si, 0 == todo el resto\n\n## Controls\n\n### female\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data$sexo)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nx <numeric> \n# total N=3048 valid N=3048 mean=1.52 sd=0.50\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n    1 | 1465 | 48.06 |   48.06 |  48.06\n    2 | 1583 | 51.94 |   51.94 | 100.00\n <NA> |    0 |  0.00 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\ndata <- data %>%\n  mutate(\n    female = case_when(\n      sexo == 1 ~ 0,\n      sexo == 2 ~ 1\n    )\n  ) %>% \n  set_variable_labels(female = \"Gender (1 = female)\") %>% \n  set_value_labels(female = c(\n    \"Female\" = 1, \n    \"Male\" = 0\n  ))\n\nfrq(data$female)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nGender (1 = female) (x) <numeric> \n# total N=3048 valid N=3048 mean=0.52 sd=0.50\n\nValue |  Label |    N | Raw % | Valid % | Cum. %\n------------------------------------------------\n    0 |   Male | 1465 | 48.06 |   48.06 |  48.06\n    1 | Female | 1583 | 51.94 |   51.94 | 100.00\n <NA> |   <NA> |    0 |  0.00 |    <NA> |   <NA>\n```\n:::\n:::\n\n\n### age\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndescr(data$edad)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n## Basic descriptive statistics\n\n var    type label    n NA.prc mean    sd   se md trimmed         range iqr\n  dd numeric    dd 3048      0 39.6 20.92 0.38 39   39.29 969 (-888-81)  19\n   skew\n -28.52\n```\n:::\n\n```{.r .cell-code}\ndata <- data %>%\n  mutate(\n    age = case_when(\n      edad %in% c(-888, -999) ~ NA_real_,\n      TRUE ~ as.numeric(edad)\n    )\n  ) %>% \n  set_variable_labels(age = \"Age\")\n\ndescr(data$age)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n## Basic descriptive statistics\n\n var    type label    n NA.prc mean    sd   se md trimmed      range iqr skew\n  dd numeric   Age 3047   0.03 39.9 12.46 0.23 39   39.29 63 (18-81)  19 0.42\n```\n:::\n:::\n\n\n### sector\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data$a07)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nEmployment situation (a07) (x) <categorical> \n# total N=3048 valid N=3048 mean=3.79 sd=1.67\n\nValue                                                                        |    N | Raw % | Valid % | Cum. %\n--------------------------------------------------------------------------------------------------------------\n1. Patrón(a) o empleador(a)                                                  |  345 | 11.32 |   11.32 |  11.32\n2. Trabajador(a) por cuenta propia                                           |  598 | 19.62 |   19.62 |  30.94\n3. Empleado(a) u obrero(a) del sector público (Gobierno Central o Municipal) |  251 |  8.23 |    8.23 |  39.17\n4. Empleado(a) u obrero(a) de empresas públicas                              |  337 | 11.06 |   11.06 |  50.23\n5. Empleado(a) u obrero(a) del sector privado                                | 1370 | 44.95 |   44.95 |  95.18\n6. Servicio doméstico puertas adentro                                        |   21 |  0.69 |    0.69 |  95.87\n7. Servicio doméstico puertas afuera                                         |  101 |  3.31 |    3.31 |  99.18\n8. FF.AA. y del Orden                                                        |   13 |  0.43 |    0.43 |  99.61\n9. Familiar no remunerado                                                    |   12 |  0.39 |    0.39 | 100.00\n<NA>                                                                         |    0 |  0.00 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\ndata <- data %>%\n  mutate(\n    sector=case_when(\n      as.numeric(a07) %in% c(1, 2, 5, 6, 7, 9) ~ 1,\n      as.numeric(a07) %in% c(3, 4, 8) ~ 0\n    ))%>% \n  set_variable_labels(sector = \"Sector (1 = private)\") %>% \n  set_value_labels(sector = c(\n    \"Private\" = 1,\n    \"Public\" = 0\n  ))\n\nfrq(data$sector)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nSector (1 = private) (x) <numeric> \n# total N=3048 valid N=3048 mean=0.80 sd=0.40\n\nValue |   Label |    N | Raw % | Valid % | Cum. %\n-------------------------------------------------\n    0 |  Public |  601 | 19.72 |   19.72 |  19.72\n    1 | Private | 2447 | 80.28 |   80.28 | 100.00\n <NA> |    <NA> |    0 |  0.00 |    <NA> |   <NA>\n```\n:::\n:::\n\n\n### rama\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data$a25) # 19 + 46 NS/NR y 603 otro\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nx <numeric> \n# total N=3048 valid N=3048 mean=-7.21 sd=135.21\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n -999 |  19 |  0.62 |    0.62 |   0.62\n -888 |  46 |  1.51 |    1.51 |   2.13\n    1 | 186 |  6.10 |    6.10 |   8.23\n    2 |  92 |  3.02 |    3.02 |  11.25\n    3 | 170 |  5.58 |    5.58 |  16.83\n    4 |  43 |  1.41 |    1.41 |  18.24\n    5 |  17 |  0.56 |    0.56 |  18.80\n    6 | 178 |  5.84 |    5.84 |  24.64\n    7 | 284 |  9.32 |    9.32 |  33.96\n    8 | 171 |  5.61 |    5.61 |  39.57\n    9 | 131 |  4.30 |    4.30 |  43.86\n   10 |  46 |  1.51 |    1.51 |  45.37\n   11 |  38 |  1.25 |    1.25 |  46.62\n   12 |  25 |  0.82 |    0.82 |  47.44\n   13 |  81 |  2.66 |    2.66 |  50.10\n   14 |  88 |  2.89 |    2.89 |  52.99\n   15 | 110 |  3.61 |    3.61 |  56.59\n   16 | 178 |  5.84 |    5.84 |  62.43\n   17 | 242 |  7.94 |    7.94 |  70.37\n   18 |  50 |  1.64 |    1.64 |  72.01\n   19 | 171 |  5.61 |    5.61 |  77.62\n   20 |  49 |  1.61 |    1.61 |  79.23\n   21 |  30 |  0.98 |    0.98 |  80.22\n   22 | 603 | 19.78 |   19.78 | 100.00\n <NA> |   0 |  0.00 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\nfrq(data$a25_esp_rec) # 603 válidos\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nx <numeric> \n# total N=3048 valid N=603 mean=13.25 sd=5.66\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n    1 |    6 |  0.20 |    1.00 |   1.00\n    2 |    4 |  0.13 |    0.66 |   1.66\n    3 |   17 |  0.56 |    2.82 |   4.48\n    5 |    3 |  0.10 |    0.50 |   4.98\n    6 |    4 |  0.13 |    0.66 |   5.64\n    7 |  157 |  5.15 |   26.04 |  31.67\n    8 |   14 |  0.46 |    2.32 |  34.00\n    9 |   38 |  1.25 |    6.30 |  40.30\n   11 |    2 |  0.07 |    0.33 |  40.63\n   12 |    3 |  0.10 |    0.50 |  41.13\n   13 |   26 |  0.85 |    4.31 |  45.44\n   14 |   26 |  0.85 |    4.31 |  49.75\n   15 |   20 |  0.66 |    3.32 |  53.07\n   16 |   12 |  0.39 |    1.99 |  55.06\n   17 |   27 |  0.89 |    4.48 |  59.54\n   18 |   12 |  0.39 |    1.99 |  61.53\n   19 |  232 |  7.61 |   38.47 | 100.00\n <NA> | 2445 | 80.22 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\ndata$rama <- ifelse(data$a25 == 22,\n                    data$a25_esp_rec,  # Usar el valor de \"a25_esp\" si la categoría es 22\n                    data$a25)      # En los demás casos, mantener el valor original de \"a25\"\n\nfrq(data$rama)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nx <numeric> \n# total N=3048 valid N=3048 mean=-8.94 sd=134.91\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n -999 |  19 |  0.62 |    0.62 |   0.62\n -888 |  46 |  1.51 |    1.51 |   2.13\n    1 | 192 |  6.30 |    6.30 |   8.43\n    2 |  96 |  3.15 |    3.15 |  11.58\n    3 | 187 |  6.14 |    6.14 |  17.72\n    4 |  43 |  1.41 |    1.41 |  19.13\n    5 |  20 |  0.66 |    0.66 |  19.78\n    6 | 182 |  5.97 |    5.97 |  25.75\n    7 | 441 | 14.47 |   14.47 |  40.22\n    8 | 185 |  6.07 |    6.07 |  46.29\n    9 | 169 |  5.54 |    5.54 |  51.84\n   10 |  46 |  1.51 |    1.51 |  53.35\n   11 |  40 |  1.31 |    1.31 |  54.66\n   12 |  28 |  0.92 |    0.92 |  55.58\n   13 | 107 |  3.51 |    3.51 |  59.09\n   14 | 114 |  3.74 |    3.74 |  62.83\n   15 | 130 |  4.27 |    4.27 |  67.09\n   16 | 190 |  6.23 |    6.23 |  73.33\n   17 | 269 |  8.83 |    8.83 |  82.15\n   18 |  62 |  2.03 |    2.03 |  84.19\n   19 | 403 | 13.22 |   13.22 |  97.41\n   20 |  49 |  1.61 |    1.61 |  99.02\n   21 |  30 |  0.98 |    0.98 | 100.00\n <NA> |   0 |  0.00 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\ndata <- data %>% \n  mutate(\n    rama = factor(\n      case_when(\n        rama==1~\"A\",\n        rama==2|rama==3~\"BC\",\n        rama==4|rama==5|rama==6~\"DEF\",\n        rama==7|rama==8~\"GI\",\n        rama==9~\"H\",\n        rama==10|rama==11|rama==12|rama==13|rama==14~\"JKLMN\",\n        rama==15~\"O\",\n        rama==16|rama==17~\"PQ\",\n        rama==18|rama==19|rama==20~\"RSU\",\n        rama==21~\"T\"\n        )\n      )\n    ) %>% \n  set_variable_labels(rama = \"Rama\")\n\nfrq(data$rama)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRama (x) <categorical> \n# total N=3048 valid N=2983 mean=5.48 sd=2.62\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\nA     | 192 |  6.30 |    6.44 |   6.44\nBC    | 283 |  9.28 |    9.49 |  15.92\nDEF   | 245 |  8.04 |    8.21 |  24.14\nGI    | 626 | 20.54 |   20.99 |  45.12\nH     | 169 |  5.54 |    5.67 |  50.79\nJKLMN | 335 | 10.99 |   11.23 |  62.02\nO     | 130 |  4.27 |    4.36 |  66.38\nPQ    | 459 | 15.06 |   15.39 |  81.76\nRSU   | 514 | 16.86 |   17.23 |  98.99\nT     |  30 |  0.98 |    1.01 | 100.00\n<NA>  |  65 |  2.13 |    <NA> |   <NA>\n```\n:::\n:::\n\n\n### unions\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data$b19)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nx <numeric> \n# total N=3048 valid N=2105 mean=-107.89 sd=295.65\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n -999 |   35 |  1.15 |    1.66 |   1.66\n -888 |  220 |  7.22 |   10.45 |  12.11\n    1 |  479 | 15.72 |   22.76 |  34.87\n    2 | 1371 | 44.98 |   65.13 | 100.00\n <NA> |  943 | 30.94 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\n# Sindicatos en empresas\ndata <- data %>%\n  mutate(\n    unions=case_when(\n      as.numeric(relation_mop) %in% c(1, 2) ~ NA_real_,\n      as.numeric(relation_mop) == 3 & b19 == 1 ~ 1,\n      as.numeric(relation_mop) == 3 & b19 %in% c(2, -888, -999) ~ 0,\n      TRUE ~ NA_real_\n    )\n  ) %>% \n  set_variable_labels(unions = \"Unions in company (1 = yes)\") %>%\n  set_value_labels(unions = c(\n    \"Yes\" = 1,\n    \"No\" = 0\n  ))\n\nfrq(data$unions)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nUnions in company (1 = yes) (x) <numeric> \n# total N=3048 valid N=2105 mean=0.23 sd=0.42\n\nValue | Label |    N | Raw % | Valid % | Cum. %\n-----------------------------------------------\n    0 |    No | 1626 | 53.35 |   77.24 |  77.24\n    1 |   Yes |  479 | 15.72 |   22.76 | 100.00\n <NA> |  <NA> |  943 | 30.94 |    <NA> |   <NA>\n```\n:::\n:::\n\n\n### union_member\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data$b21)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nx <numeric> \n# total N=3048 valid N=479 mean=-20.82 sd=140.72\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n -999 |    1 |  0.03 |    0.21 |   0.21\n -888 |   11 |  0.36 |    2.30 |   2.51\n    1 |  270 |  8.86 |   56.37 |  58.87\n    2 |   69 |  2.26 |   14.41 |  73.28\n    3 |  128 |  4.20 |   26.72 | 100.00\n <NA> | 2569 | 84.28 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\n# Afiliación sindical\ndata <- data %>%\n  mutate(\n    union_member = case_when(\n      as.numeric(relation_mop) %in% c(1, 2) ~ NA_real_,\n      as.numeric(relation_mop) == 3 & b21 %in% c(1, 2) ~ 1,\n      as.numeric(relation_mop) == 3 & b21 %in% c(3, -888, -999) ~ 0,\n      unions == 0 ~ 0,\n      TRUE ~ NA_real_\n    )\n  ) %>%\n  set_variable_labels(union_member = \"Union membership (1 = yes)\") %>%\n  set_value_labels(union_member = c(\n    \"Yes\" = 1,\n    \"No\" = 0\n  ))\n\nfrq(data$union_member)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nUnion membership (1 = yes) (x) <numeric> \n# total N=3048 valid N=2105 mean=0.16 sd=0.37\n\nValue | Label |    N | Raw % | Valid % | Cum. %\n-----------------------------------------------\n    0 |    No | 1766 | 57.94 |   83.90 |  83.90\n    1 |   Yes |  339 | 11.12 |   16.10 | 100.00\n <NA> |  <NA> |  943 | 30.94 |    <NA> |   <NA>\n```\n:::\n:::\n\n\n### pol_id\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfrq(data$c08)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nx <numeric> \n# total N=3048 valid N=3048 mean=-29.80 sd=184.16\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n -999 |  65 |  2.13 |    2.13 |   2.13\n -888 |  52 |  1.71 |    1.71 |   3.84\n    0 | 110 |  3.61 |    3.61 |   7.45\n    1 |  35 |  1.15 |    1.15 |   8.60\n    2 |  83 |  2.72 |    2.72 |  11.32\n    3 | 155 |  5.09 |    5.09 |  16.40\n    4 | 212 |  6.96 |    6.96 |  23.36\n    5 | 830 | 27.23 |   27.23 |  50.59\n    6 | 216 |  7.09 |    7.09 |  57.68\n    7 | 233 |  7.64 |    7.64 |  65.32\n    8 | 130 |  4.27 |    4.27 |  69.59\n    9 |  54 |  1.77 |    1.77 |  71.36\n   10 | 114 |  3.74 |    3.74 |  75.10\n   11 |  90 |  2.95 |    2.95 |  78.05\n   12 | 669 | 21.95 |   21.95 | 100.00\n <NA> |   0 |  0.00 |    <NA> |   <NA>\n```\n:::\n\n```{.r .cell-code}\ndata <- data %>%\n  mutate(\n    pol_id = case_when(\n      c08 %in% c(0, 1, 2, 3) ~ 1,\n      c08 %in% c(4, 5, 6) ~ 2,\n      c08 %in% c(7, 8, 9, 10) ~ 3,\n      c08 %in% c(11, 12, -888, -999) ~ 4,\n      TRUE ~ NA_real_\n    ),\n    pol_id = factor(\n      pol_id, \n      levels = 1:4, \n      labels = c(\n        \"Left\", \n        \"Center\", \n        \"Right\", \n        \"Not identified\"\n        ) \n      )\n    ) %>%\n  set_variable_labels(pol_id = \"Political identification\") \n\nfrq(data$pol_id)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nPolitical identification (x) <categorical> \n# total N=3048 valid N=3048 mean=2.62 sd=1.03\n\nValue          |    N | Raw % | Valid % | Cum. %\n------------------------------------------------\nLeft           |  383 | 12.57 |   12.57 |  12.57\nCenter         | 1258 | 41.27 |   41.27 |  53.84\nRight          |  531 | 17.42 |   17.42 |  71.26\nNot identified |  876 | 28.74 |   28.74 | 100.00\n<NA>           |    0 |  0.00 |    <NA> |   <NA>\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}