) %>%
set_variable_labels(a18_contrato = "Has a signed written employment contract (1 = yes)") %>%
set_value_labels(a18_contrato = c(
"Yes" = 1,
"No" = 0
))
frq(data$a18_contrato)
table(data$owners, data$educ)
data <- data %>%
mutate(
wrightclass1_original = case_when(
as.integer(owners) == 3 ~ 1,  # 1. Employers
as.integer(owners) == 2 ~ 2,  # 2. Small employers
as.integer(owners) == 1 ~ 3,  # 3. Petty bourgeoisie
as.integer(organization_assets) == 1 & as.integer(skills) == 1 ~ 4,  # 4. Expert managers
as.integer(organization_assets) == 2 & as.integer(skills) == 1 ~ 5,  # 5. Expert supervisors
as.integer(organization_assets) == 3 & as.integer(skills) == 1 ~ 6,  # 6. Experts
as.integer(organization_assets) == 1 & as.integer(skills) == 2 ~ 7,  # 7. Skilled managers
as.integer(organization_assets) == 2 & as.integer(skills) == 2 ~ 8,  # 8. Skilled supervisors
as.integer(organization_assets) == 3 & as.integer(skills) == 2 ~ 9,  # 9. Skilled workers
as.integer(organization_assets) == 1 & as.integer(skills) == 3 ~ 10, # 10. Nonskilled managers
as.integer(organization_assets) == 2 & as.integer(skills) == 3 ~ 11, # 11. Nonskilled supervisors
as.integer(organization_assets) == 3 & as.integer(skills) == 3 ~ 12  # 12. Nonskilled workers
),
wrightclass1_original = factor(
wrightclass1_original,
levels = 1:12,
labels = c(
"1. Employers",
"2. Small employers",
"3. Petty bourgeoisie",
"4. Expert managers",
"5. Expert supervisors",
"6. Experts",
"7. Skilled managers",
"8. Skilled supervisors",
"9. Skilled workers",
"10. Nonskilled managers",
"11. Nonskilled supervisors",
"12. Nonskilled workers"
)
)
) %>%
set_variable_labels(wrightclass1_original = "Wright Class Typology")
frq(data$wrightclass1_original)
# base survey
data_svy <- as_survey_design(data, weights = rake_wb2)
# Tabla de frecuencias ponderadas
wright_freq <- data_svy %>%
group_by(wrightclass1_original) %>%
summarise(
freq = survey_mean(vartype = NULL, na.rm = TRUE),
n_unweighted = unweighted(n())
) %>%
mutate(
freq_pct = freq * 100
)
wright_freq %>%
print(n = Inf)
data <- data %>%
mutate(
wrightclass2_capitalists = case_when(
as.integer(owners2) == 3 ~ 1,  # 1. Capitalists
as.integer(owners2) == 2 ~ 2,  # 2. Small employers
as.integer(owners2) == 1 ~ 3,  # 3. Petty bourgeoisie
as.integer(organization_assets) == 1 & as.integer(skills) == 1 ~ 4,  # 4. Expert managers
as.integer(organization_assets) == 2 & as.integer(skills) == 1 ~ 5,  # 5. Expert supervisors
as.integer(organization_assets) == 3 & as.integer(skills) == 1 ~ 6,  # 6. Experts
as.integer(organization_assets) == 1 & as.integer(skills) == 2 ~ 7,  # 7. Skilled managers
as.integer(organization_assets) == 2 & as.integer(skills) == 2 ~ 8,  # 8. Skilled supervisors
as.integer(organization_assets) == 3 & as.integer(skills) == 2 ~ 9,  # 9. Skilled workers
as.integer(organization_assets) == 1 & as.integer(skills) == 3 ~ 10, # 10. Nonskilled managers
as.integer(organization_assets) == 2 & as.integer(skills) == 3 ~ 11, # 11. Nonskilled supervisors
as.integer(organization_assets) == 3 & as.integer(skills) == 3 ~ 12  # 12. Nonskilled workers
),
wrightclass2_capitalists = factor(
wrightclass2_capitalists,
levels = 1:12,
labels = c(
"1. Capitalists",
"2. Small employers",
"3. Petty bourgeoisie",
"4. Expert managers",
"5. Expert supervisors",
"6. Experts",
"7. Skilled managers",
"8. Skilled supervisors",
"9. Skilled workers",
"10. Nonskilled managers",
"11. Nonskilled supervisors",
"12. Nonskilled workers"
)
)
) %>%
set_variable_labels(wrightclass2_capitalists = "Wright Class Typology (2)")
frq(data$wrightclass2_capitalists)
# base survey
data_svy <- as_survey_design(data, weights = rake_wb2)
# Tabla de frecuencias ponderadas
wright_freq_2 <- data_svy %>%
group_by(wrightclass2_capitalists) %>%
summarise(
freq = survey_mean(vartype = NULL, na.rm = TRUE),
n_unweighted = unweighted(n())
) %>%
mutate(
freq_pct = freq * 100
)
wright_freq_2 %>%
print(n = Inf)
data <- data %>%
mutate(
wrightclass1_informal = case_when(
as.integer(owners) == 3 ~ 1,  # 1. Employers
as.integer(owners) == 2 ~ 2,  # 2. Small employers
as.integer(owners) == 1 & a06_boleta == 1 ~ 3,   # 3. Petty bourgeoisie
as.integer(owners) == 1 & a06_boleta == 0 ~ 4,   # 4. Informal self-employed
as.integer(organization_assets) == 1 & as.integer(skills) == 1 ~ 5,  # 5. Expert managers
as.integer(organization_assets) == 2 & as.integer(skills) == 1 ~ 6,  # 6. Expert supervisors
as.integer(organization_assets) == 3 & as.integer(skills) == 1 ~ 7,  # 7. Experts
as.integer(organization_assets) == 1 & as.integer(skills) == 2 ~ 8,  # 8. Skilled managers
as.integer(organization_assets) == 2 & as.integer(skills) == 2 ~ 9,  # 9. skilled supervisors
as.integer(organization_assets) == 1 & as.integer(skills) == 3 ~ 10, # 10. Nonskilled managers
as.integer(organization_assets) == 2 & as.integer(skills) == 3 ~ 11, # 11. Nonskilled supervisors
as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18_contrato == 1 ~ 12, # 12. Formal workers
as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18_contrato == 0 ~ 13  # 13. Informal workers
),
wrightclass1_informal = factor(
wrightclass1_informal,
levels = 1:13,
labels = c(
"1. Employers",
"2. Small employers",
"3. Petty bourgeoisie",
"4. Informal self-employed",
"5. Expert managers",
"6. Expert supervisors",
"7. Experts",
"8. Skilled managers",
"9. Skilled supervisors",
"10. Nonskilled managers",
"11. Nonskilled supervisors",
"12. Formal workers",
"13. Informal workers"
)
)
) %>%
set_variable_labels(wrightclass1_informal = "Wright Class Typology + Informal (3)")
frq(data$wrightclass1_informal)
# base survey
data_svy <- as_survey_design(data, weights = rake_wb2)
# Tabla de frecuencias ponderadas
wright_freq_3 <- data_svy %>%
group_by(wrightclass1_informal) %>%
summarise(
freq = survey_mean(vartype = NULL, na.rm = TRUE),
n_unweighted = unweighted(n())
) %>%
mutate(
freq_pct = freq * 100
)
wright_freq_3 %>%
print(n = Inf)
data <- data %>%
mutate(
wrightclass2_informal = case_when(
as.integer(owners2) == 3 ~ 1,  # 1. Capitalists
as.integer(owners2) == 2 ~ 2,  # 2. Small employers
as.integer(owners2) == 1 & a06_boleta == 1 ~ 3,   # 3. Petty bourgeoisie
as.integer(owners2) == 1 & a06_boleta == 0 ~ 4,   # 4. Informal self-employed
as.integer(organization_assets) == 1 & as.integer(skills) == 1 ~ 5,  # 5. Expert managers
as.integer(organization_assets) == 2 & as.integer(skills) == 1 ~ 6,  # 6. Expert supervisors
as.integer(organization_assets) == 3 & as.integer(skills) == 1 ~ 7,  # 7. Experts
as.integer(organization_assets) == 1 & as.integer(skills) == 2 ~ 8,  # 8. Skilled managers
as.integer(organization_assets) == 2 & as.integer(skills) == 2 ~ 9,  # 9. skilled supervisors
as.integer(organization_assets) == 1 & as.integer(skills) == 3 ~ 10, # 10. Nonskilled managers
as.integer(organization_assets) == 2 & as.integer(skills) == 3 ~ 11, # 11. Nonskilled supervisors
as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18_contrato == 1 ~ 12, # 12. Formal workers
as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18_contrato == 0 ~ 13  # 13. Informal workers
),
wrightclass2_informal = factor(
wrightclass2_informal,
levels = 1:13,
labels = c(
"1. Capitalists",
"2. Small employers",
"3. Petty bourgeoisie",
"4. Informal self-employed",
"5. Expert managers",
"6. Expert supervisors",
"7. Experts",
"8. Skilled managers",
"9. Skilled supervisors",
"10. Nonskilled managers",
"11. Nonskilled supervisors",
"12. Formal workers",
"13. Informal workers"
)
)
) %>%
set_variable_labels(wrightclass2_informal = "Wright Class Typology + Informal (4)")
frq(data$wrightclass2_informal)
# base survey
data_svy <- as_survey_design(data, weights = rake_wb2)
# Tabla de frecuencias ponderadas
wright_freq_4 <- data_svy %>%
group_by(wrightclass2_informal) %>%
summarise(
freq = survey_mean(vartype = NULL, na.rm = TRUE),
n_unweighted = unweighted(n())
) %>%
mutate(
freq_pct = freq * 100
)
wright_freq_4 %>%
print(n = Inf)
data <- data %>%
mutate(
wrightclass1_reduced = case_when(
as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18_contrato == 1 ~ 1,  # 1. Formal workers
as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18_contrato == 0 ~ 2,  # 2. Informal workers
as.integer(owners) == 1 & a06_boleta == 0 ~ 3,                                                   # 3. Informal self-employed
as.integer(organization_assets) == 3 & as.integer(skills) == 1 ~ 4,                              # 4. Experts
as.integer(organization_assets) == 2 & as.integer(skills) %in% c(1, 2, 3) ~ 5,                   # 5. Supervisors
as.integer(organization_assets) == 1 & as.integer(skills) %in% c(1, 2, 3) ~ 6,                   # 6. Managers
as.integer(owners) == 1 & a06_boleta == 1 ~ 7,                                                   # 7. Petty bourgeoisie
as.integer(owners) == 2 ~ 8,                                                                     # 8. Small employers
as.integer(owners) == 3 ~ 9                                                                      # 9. Employers
),
wrightclass1_reduced = factor(
wrightclass1_reduced,
levels = 1:9,
labels = c(
"1. Formal workers",
"2. Informal workers",
"3. Informal self-employed",
"4. Experts",
"5. Supervisors",
"6. Managers",
"7. Petty bourgeoisie",
"8. Small employers",
"9. Employers"
)
)
) %>%
set_variable_labels(wrightclass1_reduced = "Wright Class Typology  Reduced (5)")
frq(data$wrightclass1_reduced)
# base survey
data_svy <- as_survey_design(data, weights = rake_wb2)
# Tabla de frecuencias ponderadas
wright_freq_5 <- data_svy %>%
group_by(wrightclass1_reduced) %>%
summarise(
freq = survey_mean(vartype = NULL, na.rm = TRUE),
n_unweighted = unweighted(n())
) %>%
mutate(
freq_pct = freq * 100
)
wright_freq_5 %>%
print(n = Inf)
data <- data %>%
mutate(
wrightclass2_reduced = case_when(
as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18 == 1 ~ 1,                  # 1. Formal workers
as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18 %in% c(2, 3, 4, -999) ~ 2, # 2. Informal workers
as.integer(owners2) == 1 & a06_boleta == 0 ~ 3,                                                         # 3. Informal self-employed
as.integer(organization_assets) == 3 & as.integer(skills) == 1 ~ 4,                                     # 4. Experts
as.integer(organization_assets) == 2 & as.integer(skills) %in% c(1, 2, 3) ~ 5,                          # 5. Supervisors
as.integer(organization_assets) == 1 & as.integer(skills) %in% c(1, 2, 3) ~ 6,                          # 6. Managers
as.integer(owners2) == 1 & a06_boleta == 1 ~ 7,                                                         # 7. Petty bourgeoisie
as.integer(owners2) == 2 ~ 8,                                                                           # 8. Small employers
as.integer(owners2) == 3 ~ 9                                                                            # 9. Capitalists
),
wrightclass2_reduced = factor(
wrightclass2_reduced,
levels = 1:9,
labels = c(
"1. Formal workers",
"2. Informal workers",
"3. Informal self-employed",
"4. Experts",
"5. Supervisors",
"6. Managers",
"7. Petty bourgeoisie",
"8. Small employers",
"9. Capitalists"
)
)
) %>%
set_variable_labels(wrightclass2_reduced = "Wright Class Typology Reduced + Informal (6)")
frq(data$wrightclass2_reduced)
# base survey
data_svy <- as_survey_design(data, weights = rake_wb2)
# Tabla de frecuencias ponderadas
wright_freq_6 <- data_svy %>%
group_by(wrightclass2_reduced) %>%
summarise(
freq = survey_mean(vartype = NULL, na.rm = TRUE),
n_unweighted = unweighted(n())
) %>%
mutate(
freq_pct = freq * 100
)
wright_freq_6 %>%
print(n = Inf)
frq(data$c01_01)
data <- data %>%
mutate(
c01_01 = case_when(
c01_01 %in% c(-888, -999) ~ NA_real_,
TRUE ~ as.numeric(c01_01)
)
) %>%
set_variable_labels(c01_01 = "Importance of unions: in achieving better wages (c01_01)")
frq(data$c01_01)
frq(data$c01_02)
data <- data %>%
mutate(
c01_02 = case_when(
c01_02 %in% c(-888, -999) ~ NA_real_,
TRUE ~ as.numeric(c01_02)
)
) %>%
set_variable_labels(c01_02 = "Importance of unions: in achieving reducing inequality (c01_02)")
frq(data$c01_02)
frq(data$c01_03)
data <- data %>%
mutate(
c01_03 = case_when(
c01_03 %in% c(-888, -999) ~ NA_real_,
TRUE ~ as.numeric(c01_03)
)
) %>%
set_variable_labels(c01_03 = "Importance of unions: in protecting women workers' rights (c01_03)")
frq(data$c01_03)
frq(data$c01_04)
data <- data %>%
mutate(
c01_04 = case_when(
c01_04 %in% c(-888, -999) ~ NA_real_,
TRUE ~ as.numeric(c01_04)
)
) %>%
set_variable_labels(c01_04 = "Importance of unions: in protecting informal workers' rights (c01_04)")
frq(data$c01_04)
frq(data$c01_05)
data <- data %>%
mutate(
c01_05 = case_when(
c01_05 %in% c(-888, -999) ~ NA_real_,
TRUE ~ as.numeric(c01_05)
)
) %>%
set_variable_labels(c01_05 = "Importance of unions: in protecting women workers' rights (c01_05)")
frq(data$c01_05)
frq(data$c01_06)
data <- data %>%
mutate(
c01_06 = case_when(
c01_06 %in% c(-888, -999) ~ NA_real_,
TRUE ~ as.numeric(c01_06)
)
) %>%
set_variable_labels(c01_06 = "Importance of unions: in helping family-work arrangements (c01_06)")
frq(data$c01_06)
frq(data$c07_03)
data <- data %>%
mutate(
c07_03_dummy = case_when(
c07_03 %in% c(4, 5) ~ 1,
c07_03 %in% c(1, 2, 3, -888, -999) ~ 0
))%>%
set_variable_labels(c07_03_dummy = "Level of agreement: Implement laws to give unions more bargaining power (1 = agree)") %>%
set_value_labels(c07_03_dummy = c(
"Agree" = 1,
"Disagree" = 0
))
frq(data$c07_03_dummy)
frq(data$b29)
data <- data %>%
mutate(
b29_dummy = case_when(
b29 %in% c(3, 4, 5) ~ 1,
b29 %in% c(1, 2, -888, -999) ~ 0
))%>%
set_variable_labels(b29_dummy = "Possibility of joining a union (1 = yes)") %>%
set_value_labels(b29_dummy = c(
"Yes" = 1,
"No" = 0
))
frq(data$b29_dummy)
frq(data$sexo)
data <- data %>%
mutate(
female = case_when(
sexo == 1 ~ 0,
sexo == 2 ~ 1
)
) %>%
set_variable_labels(female = "Gender (1 = female)") %>%
set_value_labels(female = c(
"Female" = 1,
"Male" = 0
))
frq(data$female)
descr(data$edad)
data <- data %>%
mutate(
age = case_when(
edad %in% c(-888, -999) ~ NA_real_,
TRUE ~ as.numeric(edad)
)
) %>%
set_variable_labels(age = "Age")
descr(data$age)
frq(data$a07)
data <- data %>%
mutate(
sector=case_when(
as.numeric(a07) %in% c(1, 2, 5, 6, 7, 9) ~ 1,
as.numeric(a07) %in% c(3, 4, 8) ~ 0
))%>%
set_variable_labels(sector = "Sector (1 = private)") %>%
set_value_labels(sector = c(
"Private" = 1,
"Public" = 0
))
frq(data$sector)
frq(data$a25) # 19 + 46 NS/NR y 603 otro
frq(data$a25_esp_rec) # 603 válidos
data$rama <- ifelse(data$a25 == 22,
data$a25_esp_rec,  # Usar el valor de "a25_esp" si la categoría es 22
data$a25)      # En los demás casos, mantener el valor original de "a25"
frq(data$rama)
data <- data %>%
mutate(
rama = factor(
case_when(
rama==1~"A",
rama==2|rama==3~"BC",
rama==4|rama==5|rama==6~"DEF",
rama==7|rama==8~"GI",
rama==9~"H",
rama==10|rama==11|rama==12|rama==13|rama==14~"JKLMN",
rama==15~"O",
rama==16|rama==17~"PQ",
rama==18|rama==19|rama==20~"RSU",
rama==21~"T"
)
)
) %>%
set_variable_labels(rama = "Rama")
frq(data$rama)
frq(data$b19)
# Sindicatos en empresas
data <- data %>%
mutate(
unions=case_when(
as.numeric(relation_mop) %in% c(1, 2) ~ NA_real_,
as.numeric(relation_mop) == 3 & b19 == 1 ~ 1,
as.numeric(relation_mop) == 3 & b19 %in% c(2, -888, -999) ~ 0,
TRUE ~ NA_real_
)
) %>%
set_variable_labels(unions = "Unions in company (1 = yes)") %>%
set_value_labels(unions = c(
"Yes" = 1,
"No" = 0
))
frq(data$unions)
frq(data$b21)
# Afiliación sindical
data <- data %>%
mutate(
union_member = case_when(
as.numeric(relation_mop) %in% c(1, 2) ~ NA_real_,
as.numeric(relation_mop) == 3 & b21 %in% c(1, 2) ~ 1,
as.numeric(relation_mop) == 3 & b21 %in% c(3, -888, -999) ~ 0,
unions == 0 ~ 0,
TRUE ~ NA_real_
)
) %>%
set_variable_labels(union_member = "Union membership (1 = yes)") %>%
set_value_labels(union_member = c(
"Yes" = 1,
"No" = 0
))
frq(data$union_member)
frq(data$c08)
data <- data %>%
mutate(
pol_id = case_when(
c08 %in% c(0, 1, 2, 3) ~ 1,
c08 %in% c(4, 5, 6) ~ 2,
c08 %in% c(7, 8, 9, 10) ~ 3,
c08 %in% c(11, 12, -888, -999) ~ 4,
TRUE ~ NA_real_
),
pol_id = factor(
pol_id,
levels = 1:4,
labels = c(
"Left",
"Center",
"Right",
"Not identified"
)
)
) %>%
set_variable_labels(pol_id = "Political identification")
frq(data$pol_id)
