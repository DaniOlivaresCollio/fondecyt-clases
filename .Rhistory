)
)
) %>%
set_variable_labels(wrightclass2_capitalists = "Wright Class Typology (2)")
frq(data_arg$wrightclass2_capitalists)
# # base survey
# data_arg_svy <- as_survey_design(data_arg, weights = rake_wb2)
#
# # Tabla de frecuencias ponderadas
# wright_freq_2 <- data_arg_svy %>%
#   group_by(wrightclass2_capitalists) %>%
#   summarise(
#     freq = survey_mean(vartype = NULL, na.rm = TRUE),
#     n_unweighted = unweighted(n())
#   ) %>%
#   mutate(
#     freq_pct = freq * 100
#   )
#
# wright_freq_2 %>%
#   print(n = Inf)
data_arg <- data_arg %>%
mutate(
wrightclass1_informal = case_when(
as.integer(owners) == 3 ~ 1,  # 1. Employers
as.integer(owners) == 2 ~ 2,  # 2. Small employers
as.integer(owners) == 1 & educ >= 9 ~ 3,   # 3. Petty bourgeoisie
as.integer(owners) == 1 & educ <= 8 ~ 4,   # 4. Informal self-employed
as.integer(organization_assets) == 1 & as.integer(skills) == 1 ~ 5,  # 5. Expert managers
as.integer(organization_assets) == 2 & as.integer(skills) == 1 ~ 6,  # 6. Expert supervisors
as.integer(organization_assets) == 3 & as.integer(skills) == 1 ~ 7,  # 7. Experts
as.integer(organization_assets) == 1 & as.integer(skills) == 2 ~ 8,  # 8. Skilled managers
as.integer(organization_assets) == 2 & as.integer(skills) == 2 ~ 9,  # 9. skilled supervisors
as.integer(organization_assets) == 1 & as.integer(skills) == 3 ~ 10, # 10. Nonskilled managers
as.integer(organization_assets) == 2 & as.integer(skills) == 3 ~ 11, # 11. Nonskilled supervisors
as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18_contrato == 1 ~ 12, # 12. Formal workers
as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18_contrato == 0 ~ 13  # 13. Informal workers
),
wrightclass1_informal = factor(
wrightclass1_informal,
levels = 1:13,
labels = c(
"1. Employers",
"2. Small employers",
"3. Petty bourgeoisie",
"4. Informal self-employed",
"5. Expert managers",
"6. Expert supervisors",
"7. Experts",
"8. Skilled managers",
"9. Skilled supervisors",
"10. Nonskilled managers",
"11. Nonskilled supervisors",
"12. Formal workers",
"13. Informal workers"
)
)
) %>%
set_variable_labels(wrightclass1_informal = "Wright Class Typology + Informal (3)")
frq(data_arg$wrightclass1_informal)
# # base survey
# data_arg_svy <- as_survey_design(data_arg, weights = rake_wb2)
#
# # Tabla de frecuencias ponderadas
# wright_freq_3 <- data_arg_svy %>%
#   group_by(wrightclass1_informal) %>%
#   summarise(
#     freq = survey_mean(vartype = NULL, na.rm = TRUE),
#     n_unweighted = unweighted(n())
#   ) %>%
#   mutate(
#     freq_pct = freq * 100
#   )
#
# wright_freq_3 %>%
#   print(n = Inf)
data_arg <- data_arg %>%
mutate(
wrightclass2_informal = case_when(
as.integer(owners2) == 3 ~ 1,  # 1. Capitalists
as.integer(owners2) == 2 ~ 2,  # 2. Small employers
as.integer(owners) == 1 & educ >= 9 ~ 3,   # 3. Petty bourgeoisie
as.integer(owners) == 1 & educ <= 8 ~ 4,   # 4. Informal self-employed
as.integer(organization_assets) == 1 & as.integer(skills) == 1 ~ 5,  # 5. Expert managers
as.integer(organization_assets) == 2 & as.integer(skills) == 1 ~ 6,  # 6. Expert supervisors
as.integer(organization_assets) == 3 & as.integer(skills) == 1 ~ 7,  # 7. Experts
as.integer(organization_assets) == 1 & as.integer(skills) == 2 ~ 8,  # 8. Skilled managers
as.integer(organization_assets) == 2 & as.integer(skills) == 2 ~ 9,  # 9. skilled supervisors
as.integer(organization_assets) == 1 & as.integer(skills) == 3 ~ 10, # 10. Nonskilled managers
as.integer(organization_assets) == 2 & as.integer(skills) == 3 ~ 11, # 11. Nonskilled supervisors
as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18_contrato == 1 ~ 12, # 12. Formal workers
as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18_contrato == 0 ~ 13  # 13. Informal workers
),
wrightclass2_informal = factor(
wrightclass2_informal,
levels = 1:13,
labels = c(
"1. Capitalists",
"2. Small employers",
"3. Petty bourgeoisie",
"4. Informal self-employed",
"5. Expert managers",
"6. Expert supervisors",
"7. Experts",
"8. Skilled managers",
"9. Skilled supervisors",
"10. Nonskilled managers",
"11. Nonskilled supervisors",
"12. Formal workers",
"13. Informal workers"
)
)
) %>%
set_variable_labels(wrightclass2_informal = "Wright Class Typology + Informal (4)")
frq(data_arg$wrightclass2_informal)
# # base survey
# data_arg_svy <- as_survey_design(data_arg, weights = rake_wb2)
#
# # Tabla de frecuencias ponderadas
# wright_freq_4 <- data_arg_svy %>%
#   group_by(wrightclass2_informal) %>%
#   summarise(
#     freq = survey_mean(vartype = NULL, na.rm = TRUE),
#     n_unweighted = unweighted(n())
#   ) %>%
#   mutate(
#     freq_pct = freq * 100
#   )
#
# wright_freq_4 %>%
#   print(n = Inf)
data_arg <- data_arg %>%
mutate(
wrightclass1_reduced = case_when(
as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18_contrato == 1 ~ 1,  # 1. Formal workers
as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18_contrato == 0 ~ 2,  # 2. Informal workers
as.integer(owners) == 1 & educ <= 8 == 0 ~ 3,                                                    # 3. Informal self-employed
data_arg <- data_arg %>%
mutate(
wrightclass1_reduced = case_when(
as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18_contrato == 1 ~ 1,  # 1. Formal workers
as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18_contrato == 0 ~ 2,  # 2. Informal workers
as.integer(owners) == 1 & educ <= 8 ~ 3,                                                         # 3. Informal self-employed
as.integer(organization_assets) == 3 & as.integer(skills) == 1 ~ 4,                              # 4. Experts
as.integer(organization_assets) == 2 & as.integer(skills) %in% c(1, 2, 3) ~ 5,                   # 5. Supervisors
as.integer(organization_assets) == 1 & as.integer(skills) %in% c(1, 2, 3) ~ 6,                   # 6. Managers
as.integer(owners) == 1 & educ >= 9 ~ 7,                                                         # 7. Petty bourgeoisie
as.integer(owners) == 2 ~ 8,                                                                     # 8. Small employers
as.integer(owners) == 3 ~ 9                                                                      # 9. Employers
),
wrightclass1_reduced = factor(
wrightclass1_reduced,
levels = 1:9,
labels = c(
"1. Formal workers",
"2. Informal workers",
"3. Informal self-employed",
"4. Experts",
"5. Supervisors",
"6. Managers",
"7. Petty bourgeoisie",
"8. Small employers",
"9. Employers"
)
)
) %>%
set_variable_labels(wrightclass1_reduced = "Wright Class Typology  Reduced (5)")
frq(data_arg$wrightclass1_reduced)
# # base survey
# data_arg_svy <- as_survey_design(data_arg, weights = rake_wb2)
#
# # Tabla de frecuencias ponderadas
# wright_freq_5 <- data_arg_svy %>%
#   group_by(wrightclass1_reduced) %>%
#   summarise(
#     freq = survey_mean(vartype = NULL, na.rm = TRUE),
#     n_unweighted = unweighted(n())
#   ) %>%
#   mutate(
#     freq_pct = freq * 100
#   )
#
# wright_freq_5 %>%
#   print(n = Inf)
data_arg <- data_arg %>%
mutate(
wrightclass2_reduced = case_when(
as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18 == 1 ~ 1,                  # 1. Formal workers
as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18 %in% c(2, 3, 4, -999) ~ 2, # 2. Informal workers
as.integer(owners2) == 1 & educ <= 8 ~ 3,                                                               # 3. Informal self-employed
as.integer(organization_assets) == 3 & as.integer(skills) == 1 ~ 4,                                     # 4. Experts
as.integer(organization_assets) == 2 & as.integer(skills) %in% c(1, 2, 3) ~ 5,                          # 5. Supervisors
as.integer(organization_assets) == 1 & as.integer(skills) %in% c(1, 2, 3) ~ 6,                          # 6. Managers
as.integer(owners2) == 1 & educ >= 9 ~ 7,                                                               # 7. Petty bourgeoisie
as.integer(owners2) == 2 ~ 8,                                                                           # 8. Small employers
as.integer(owners2) == 3 ~ 9                                                                            # 9. Capitalists
),
wrightclass2_reduced = factor(
wrightclass2_reduced,
levels = 1:9,
labels = c(
"1. Formal workers",
"2. Informal workers",
"3. Informal self-employed",
"4. Experts",
"5. Supervisors",
"6. Managers",
"7. Petty bourgeoisie",
"8. Small employers",
"9. Capitalists"
)
)
) %>%
set_variable_labels(wrightclass2_reduced = "Wright Class Typology Reduced + Informal (6)")
frq(data_arg$wrightclass2_reduced)
# # base survey
# data_arg_svy <- as_survey_design(data_arg, weights = rake_wb2)
#
# # Tabla de frecuencias ponderadas
# wright_freq_6 <- data_arg_svy %>%
#   group_by(wrightclass2_reduced) %>%
#   summarise(
#     freq = survey_mean(vartype = NULL, na.rm = TRUE),
#     n_unweighted = unweighted(n())
#   ) %>%
#   mutate(
#     freq_pct = freq * 100
#   )
#
# wright_freq_6 %>%
#   print(n = Inf)
data_arg <- data_arg %>%
mutate(
wrightclass1_reduced2 = case_when(
as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18_contrato == 1 ~ 1,  # 1. Formal workers
as.integer(organization_assets) == 3 & as.integer(skills) %in% c(2, 3) & a18_contrato == 0 ~ 2,  # 2. Informal workers
as.integer(owners) == 1 & educ <= 8 ~ 3,                                                         # 3. Informal self-employed
as.integer(organization_assets) == 3 & as.integer(skills) == 1 ~ 4,                              # 4. Experts
as.integer(organization_assets) == 2 & as.integer(skills) %in% c(1, 2, 3) ~ 5,                   # 5. Supervisors
as.integer(organization_assets) == 1 & as.integer(skills) %in% c(1, 2, 3) ~ 6,                   # 6. Managers
as.integer(owners) == 1 & educ >= 9 ~ 7,                                                         # 7. Petty bourgeoisie
as.integer(owners) %in% c(2, 3) ~ 8                                                              # 8. Employers
),
wrightclass1_reduced2 = factor(
wrightclass1_reduced2,
levels = 1:8,
labels = c(
"1. Formal workers",
"2. Informal workers",
"3. Informal self-employed",
"4. Experts",
"5. Supervisors",
"6. Managers",
"7. Petty bourgeoisie",
"8. Employers"
)
)
) %>%
set_variable_labels(wrightclass1_reduced2 = "Wright Class Typology  Reduced (7)")
frq(data_arg$wrightclass1_reduced2)
# # base survey
# data_svy <- as_survey_design(data, weights = rake_wb2)
#
# # Tabla de frecuencias ponderadas
# wright_freq_7 <- data_svy %>%
#   group_by(wrightclass1_reduced2) %>%
#   summarise(
#     freq = survey_mean(vartype = NULL, na.rm = TRUE),
#     n_unweighted = unweighted(n())
#   ) %>%
#   mutate(
#     freq_pct = freq * 100
#   )
#
# wright_freq_7 %>%
#   print(n = Inf)
frq(data_arg$c01_01)
531-486
frq(data_arg$c01_02)
frq(data_arg$c01_03)
frq(data_arg$c01_04)
frq(data_arg$c01_05)
frq(data_arg$c01_06)
data_arg <- data_arg %>%
mutate(
c01_06 = case_when(
c01_06 %in% c(-888, -999) ~ NA_real_,
TRUE ~ as.numeric(c01_06)
)
) %>%
set_variable_labels(c01_06 = "Importance of unions: in helping the economy grow (c01_06)")
frq(data_arg$c01_06)
data_arg <- data_arg %>%
mutate(
c01_05 = case_when(
c01_05 %in% c(-888, -999) ~ NA_real_,
TRUE ~ as.numeric(c01_05)
)
) %>%
set_variable_labels(c01_05 = "Importance of unions: in helping work-family balance (c01_05)")
frq(data_arg$c01_05)
data_arg <- data_arg %>%
mutate(
c01_04 = case_when(
c01_04 %in% c(-888, -999) ~ NA_real_,
TRUE ~ as.numeric(c01_04)
)
) %>%
set_variable_labels(c01_04 = "Importance of unions: in protecting informal workers' rights (c01_04)")
frq(data_arg$c01_04)
data_arg <- data_arg %>%
mutate(
c01_03 = case_when(
c01_03 %in% c(-888, -999) ~ NA_real_,
TRUE ~ as.numeric(c01_03)
)
) %>%
set_variable_labels(c01_03 = "Importance of unions: in protecting women workers' rights (c01_03)")
frq(data_arg$c01_03)
data_arg <- data_arg %>%
mutate(
c01_02 = case_when(
c01_02 %in% c(-888, -999) ~ NA_real_,
TRUE ~ as.numeric(c01_02)
)
) %>%
set_variable_labels(c01_02 = "Importance of unions: in reducing inequality (c01_02)")
frq(data_arg$c01_02)
data_arg <- data_arg %>%
mutate(
c01_01 = case_when(
c01_01 %in% c(-888, -999) ~ NA_real_,
TRUE ~ as.numeric(c01_01)
)
) %>%
set_variable_labels(c01_01 = "Importance of unions: in achieving better wages (c01_01)")
frq(data_arg$c01_01)
frq(data_arg$c07_03)
data_arg <- data_arg %>%
mutate(
c07_03_dummy = case_when(
c07_03 %in% c(4, 5) ~ 1,
c07_03 %in% c(1, 2, 3, -888, -999) ~ 0
))%>%
set_variable_labels(c07_03_dummy = "Level of agreement: Implement laws to give unions more bargaining power (1 = agree)") %>%
set_value_labels(c07_03_dummy = c(
"Agree" = 1,
"Disagree" = 0
))
frq(data_arg$c07_03_dummy)
data_arg <- data_arg %>%
mutate(
c07_03_dummy = case_when(
c07_03 %in% c(4, 5) ~ 1,
c07_03 %in% c(1, 2, 3, NA) ~ 0
))%>%
set_variable_labels(c07_03_dummy = "Level of agreement: Implement laws to give unions more bargaining power (1 = agree)") %>%
set_value_labels(c07_03_dummy = c(
"Agree" = 1,
"Disagree" = 0
))
frq(data_arg$c07_03_dummy)
frq(data_arg$b29)
data_arg <- data_arg %>%
mutate(
b29_dummy = case_when(
b29 %in% c(3, 4, 5) ~ 1,
b29 %in% c(1, 2, 6, 7) ~ 0
))%>%
set_variable_labels(b29_dummy = "Possibility of joining a union (1 = yes)") %>%
set_value_labels(b29_dummy = c(
"Yes" = 1,
"No" = 0
))
frq(data_arg$b29_dummy)
data_arg <- data_arg %>%
mutate(
b29_dummy2 = case_when(
b29 %in% c(4, 5) ~ 1,
b29 %in% c(1, 2, 3, 6, 7) ~ 0
))%>%
set_variable_labels(b29_dummy2 = "Possibility of joining a union (1 = yes) (2)") %>%
set_value_labels(b29_dummy2 = c(
"Yes" = 1,
"No" = 0
))
frq(data_arg$b29_dummy2)
frq(data_arg$sexo)
data_arg <- data_arg %>%
mutate(
female = case_when(
sexo == 1 ~ 0,
sexo == 2 ~ 1
)
) %>%
set_variable_labels(female = "Gender (1 = female)") %>%
set_value_labels(female = c(
"Female" = 1,
"Male" = 0
))
frq(data_arg$female)
descr(data_arg$edad)
frq(data_arg$edad)
descr(data_arg$age)
data_arg <- data_arg %>%
mutate(
age = case_when(
edad %in% c(-888, -999) ~ NA_real_,
TRUE ~ as.numeric(edad)
)
) %>%
set_variable_labels(age = "Age")
descr(data_arg$age)
frq(data_arg$a07)
data_arg <- data_arg %>%
mutate(
sector=case_when(
as.numeric(a07) %in% c(1, 2, 4, 5, 7) ~ 1,
as.numeric(a07) %in% c(3, 6) ~ 0
))%>%
set_variable_labels(sector = "Sector (1 = private)") %>%
set_value_labels(sector = c(
"Private" = 1,
"Public" = 0
))
frq(data_arg$sector)
frq(data_arg$a25) # 19 + 46 NS/NR y 603 otro
data_arg$rama <- data_arg$a25
frq(data_arg$rama)
data_arg <- data_arg %>%
mutate(
rama = factor(
case_when(
rama==1~"A",
rama==2|rama==3~"BC",
rama==4|rama==5|rama==6~"DEF",
rama==7|rama==8~"GI",
rama==9~"H",
rama==10|rama==11|rama==12|rama==13|rama==14~"JKLMN",
rama==15~"O",
rama==16|rama==17~"PQ",
rama==18|rama==19|rama==20~"RSU",
rama==21~"T"
)
)
) %>%
set_variable_labels(rama = "Rama")
frq(data_arg$rama)
frq(data_arg$b19)
frq(data_arg$b21)
# Afiliación sindical
data_arg <- data_arg %>%
mutate(
union_member = case_when(
as.numeric(relation_mop) %in% c(1, 2) ~ 0,
as.numeric(relation_mop) == 3 & b21 %in% c(1, 2) ~ 1,
as.numeric(relation_mop) == 3 & b21 %in% c(3, 4, 5) ~ 0,
# unions == 0 ~ 0,
TRUE ~ NA_real_
)
) %>%
set_variable_labels(union_member = "Union membership (1 = yes)") %>%
set_value_labels(union_member = c(
"Yes" = 1,
"No" = 0
))
frq(data_arg$union_member)
frq(data_arg$b21)
frq(data_arg$b21)
# Afiliación sindical
data_arg <- data_arg %>%
mutate(
union_member = case_when(
as.numeric(relation_mop) %in% c(1, 2) ~ 0,
as.numeric(relation_mop) == 3 & b21 %in% c(1, 2) ~ 1,
as.numeric(relation_mop) == 3 & b21 %in% c(3, 4, 5, NA) ~ 0,
# unions == 0 ~ 0,
TRUE ~ NA_real_
)
) %>%
set_variable_labels(union_member = "Union membership (1 = yes)") %>%
set_value_labels(union_member = c(
"Yes" = 1,
"No" = 0
))
frq(data_arg$union_member)
frq(data_arg$c08)
data_arg <- data_arg %>%
mutate(
pol_id = case_when(
c08 %in% c(0, 1, 2, 3) ~ 1,
c08 %in% c(4, 5, 6) ~ 2,
c08 %in% c(7, 8, 9, 10) ~ 3,
c08 %in% c(11, 12, 888) ~ 4,
TRUE ~ NA_real_
),
pol_id = factor(
pol_id,
levels = 1:4,
labels = c(
"Left",
"Center",
"Right",
"Not identified"
)
)
) %>%
set_variable_labels(pol_id = "Political identification")
frq(data_arg$pol_id)
save(data_arg, file="output/data_arg/datos-clases.Rdata")
save(data_arg, file="output/data/datos-clases-arg.Rdata")
saveRDS(data_arg, file="output/data/datos-clases-arg.rds")
