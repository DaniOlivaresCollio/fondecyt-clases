[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Fondecyt Paper 2",
    "section": "",
    "text": "Presentación\nEste libro corresponde al repositorio de procesamiento y análisis de la base de datos de la Encuesta CONCLAT aplicada en Chile, para realizar la construcción de clases de Erik Olin Wright.\nLa Encuesta Conclat se aplica en el marco del Proyecto CONCLAT, que busca estudiar cómo se percibe el conflicto laboral y político en Argentina y Chile. Particularmente, analiza cómo las personas de distintas clases y con distinto estatus sindical (por ejemplo, afiliados/as y no afiliados/as a sindicatos) perciben el conflicto dentro y fuera del lugar de trabajo.\nCONCLAT es el Proyecto FONDECYT Regular (No 1230056) “Clases sociales, movimientos sindicales y conflicto en tiempos de crisis: un estudio comparativo de Argentina y Chile”. Patrocinado por la Universidad de Chile y el Centro de Estudios de Conflicto y Cohesión Social (COES). Tiene como propósito contribuir a la investigación internacional sobre clases, trabajo y conflicto produciendo datos cuantitativos originales y un instrumento de investigación comparable a nivel internacional."
  },
  {
    "objectID": "01-proce-data-conclat.html#cargar-datos",
    "href": "01-proce-data-conclat.html#cargar-datos",
    "title": "1  Procesamiento Data Conclat",
    "section": "1.1 Cargar datos",
    "text": "1.1 Cargar datos\n\nload(\"input/data/datos-conclat.Rdata\")\ndata_raw &lt;- data"
  },
  {
    "objectID": "01-proce-data-conclat.html#variables",
    "href": "01-proce-data-conclat.html#variables",
    "title": "1  Procesamiento Data Conclat",
    "section": "1.2 Variables",
    "text": "1.2 Variables\n\ndata &lt;- data_raw %&gt;% \n  select(id,\n         rake_wb2,\n         # Relación con los medios de producción\n         a07,\n         a25, a25_esp, a25_esp_rec,\n         a26,\n         a27,\n         # Skills\n         a02,a02_rec,a03,a03_rec,\n         ciuo08_clio = ciuo08,\n         e05,\n         # Autoridad / orgnización\n         a15,\n         a16,\n         a17_01,a17_02,a17_03,a17_04,a17_05,a17_06)# %&gt;% \n  #sjlabelled::set_na(.,na=c(-999,-888,-777))"
  },
  {
    "objectID": "01-proce-data-conclat.html#procesamiento",
    "href": "01-proce-data-conclat.html#procesamiento",
    "title": "1  Procesamiento Data Conclat",
    "section": "1.3 Procesamiento",
    "text": "1.3 Procesamiento\n\n1.3.1 relation_mop\n\n# Situación empleo\ndata &lt;- data %&gt;%\n  mutate(\n    a07 = factor(\n      as.numeric(a07),\n      levels = 1:9,\n      labels = c(\n        \"1. Patrón(a) o empleador(a)\",\n        \"2. Trabajador(a) por cuenta propia\",\n        \"3. Empleado(a) u obrero(a) del sector público (Gobierno Central o Municipal)\",\n        \"4. Empleado(a) u obrero(a) de empresas públicas\",\n        \"5. Empleado(a) u obrero(a) del sector privado\",\n        \"6. Servicio doméstico puertas adentro\",\n        \"7. Servicio doméstico puertas afuera\",\n        \"8. FF.AA. y del Orden\",\n        \"9. Familiar no remunerado\"\n      )\n    )\n  ) %&gt;%\n  set_variable_labels(a07 = \"Employment situation (a07)\")\n\nfrq(data$a07)\n\nEmployment situation (a07) (x) &lt;categorical&gt; \n# total N=3048 valid N=3048 mean=3.79 sd=1.67\n\nValue                                                                        |    N | Raw % | Valid % | Cum. %\n--------------------------------------------------------------------------------------------------------------\n1. Patrón(a) o empleador(a)                                                  |  345 | 11.32 |   11.32 |  11.32\n2. Trabajador(a) por cuenta propia                                           |  598 | 19.62 |   19.62 |  30.94\n3. Empleado(a) u obrero(a) del sector público (Gobierno Central o Municipal) |  251 |  8.23 |    8.23 |  39.17\n4. Empleado(a) u obrero(a) de empresas públicas                              |  337 | 11.06 |   11.06 |  50.23\n5. Empleado(a) u obrero(a) del sector privado                                | 1370 | 44.95 |   44.95 |  95.18\n6. Servicio doméstico puertas adentro                                        |   21 |  0.69 |    0.69 |  95.87\n7. Servicio doméstico puertas afuera                                         |  101 |  3.31 |    3.31 |  99.18\n8. FF.AA. y del Orden                                                        |   13 |  0.43 |    0.43 |  99.61\n9. Familiar no remunerado                                                    |   12 |  0.39 |    0.39 | 100.00\n&lt;NA&gt;                                                                         |    0 |  0.00 |    &lt;NA&gt; |   &lt;NA&gt;\n\ndata &lt;- data %&gt;%\n  mutate(\n    relation_mop = case_when(\n      as_numeric(a07) == 1 ~ 1,\n      as_numeric(a07) == 2 ~ 2,\n      as_numeric(a07) &gt;= 3 ~ 3,\n      TRUE ~ NA_real_\n      ),\n    relation_mop = factor(\n      relation_mop,\n      levels = 1:3,\n      labels = c(\n        \"1. Employers\",\n        \"2. Self-Employed\",\n        \"3. Salaried\"\n      )\n    )\n  ) %&gt;%\n  set_variable_labels(relation_mop = \"Relation with Means of Production\")\n\nfrq(data$relation_mop)\n\nRelation with Means of Production (x) &lt;categorical&gt; \n# total N=3048 valid N=3048 mean=2.58 sd=0.69\n\nValue            |    N | Raw % | Valid % | Cum. %\n--------------------------------------------------\n1. Employers     |  345 | 11.32 |   11.32 |  11.32\n2. Self-Employed |  598 | 19.62 |   19.62 |  30.94\n3. Salaried      | 2105 | 69.06 |   69.06 | 100.00\n&lt;NA&gt;             |    0 |  0.00 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n\n1.3.2 company_size\n\nfrq(data$a26)\n\nx &lt;numeric&gt; \n# total N=3048 valid N=3048 mean=-73.62 sd=251.41\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n -999 |   8 |  0.26 |    0.26 |   0.26\n -888 | 255 |  8.37 |    8.37 |   8.63\n    1 | 783 | 25.69 |   25.69 |  34.32\n    2 | 486 | 15.94 |   15.94 |  50.26\n    3 | 277 |  9.09 |    9.09 |  59.35\n    4 | 316 | 10.37 |   10.37 |  69.72\n    5 | 291 |  9.55 |    9.55 |  79.27\n    6 | 183 |  6.00 |    6.00 |  85.27\n    7 | 150 |  4.92 |    4.92 |  90.19\n    8 | 113 |  3.71 |    3.71 |  93.90\n    9 | 186 |  6.10 |    6.10 | 100.00\n &lt;NA&gt; |   0 |  0.00 |    &lt;NA&gt; |   &lt;NA&gt;\n\ndata &lt;- data %&gt;%\n  mutate(\n    company_size = case_when(\n      a26 %in% c(1) ~ 1,\n      a26 %in% c(2, 3) ~ 2,\n      a26 %in% c(4, 5) ~ 3,\n      a26 %in% c(6, 7) ~ 4,\n      a26 %in% c(8, 9) ~ 5,\n      TRUE ~ NA_real_\n    ),\n    company_size = factor(\n      company_size, \n      levels = 1:5, \n      labels = c(\n        \"Solo\",\n        \"2-9\",\n        \"10-49\",\n        \"50-199\",\n        \"200 or more\"),\n      ordered = TRUE\n    )\n  ) %&gt;%\n  set_variable_labels(company_size = \"Company Size\")\n\nfrq(data$company_size)\n\nCompany Size (x) &lt;ordinal&gt; \n# total N=3048 valid N=2785 mean=2.50 sd=1.30\n\nValue       |   N | Raw % | Valid % | Cum. %\n--------------------------------------------\nSolo        | 783 | 25.69 |   28.11 |  28.11\n2-9         | 763 | 25.03 |   27.40 |  55.51\n10-49       | 607 | 19.91 |   21.80 |  77.31\n50-199      | 333 | 10.93 |   11.96 |  89.26\n200 or more | 299 |  9.81 |   10.74 | 100.00\n&lt;NA&gt;        | 263 |  8.63 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n\n1.3.3 workplace_size\n\nfrq(data$a27)\n\nx &lt;numeric&gt; \n# total N=3048 valid N=3048 mean=-15.76 sd=129.92\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n -999 |   8 |  0.26 |    0.26 |   0.26\n -888 |  56 |  1.84 |    1.84 |   2.10\n    1 | 851 | 27.92 |   27.92 |  30.02\n    2 | 590 | 19.36 |   19.36 |  49.38\n    3 | 353 | 11.58 |   11.58 |  60.96\n    4 | 358 | 11.75 |   11.75 |  72.70\n    5 | 341 | 11.19 |   11.19 |  83.89\n    6 | 198 |  6.50 |    6.50 |  90.39\n    7 | 154 |  5.05 |    5.05 |  95.44\n    8 |  71 |  2.33 |    2.33 |  97.77\n    9 |  68 |  2.23 |    2.23 | 100.00\n &lt;NA&gt; |   0 |  0.00 |    &lt;NA&gt; |   &lt;NA&gt;\n\ndata &lt;- data %&gt;%\n  mutate(\n    workplace_size = case_when(\n      a27 %in% c(1) ~ 1,\n      a27 %in% c(2, 3) ~ 2,\n      a27 %in% c(4, 5) ~ 3,\n      a27 %in% c(6, 7) ~ 4,\n      a27 %in% c(8, 9) ~ 5,\n      TRUE ~ NA_real_\n    ),\n    workplace_size = factor(\n      workplace_size, \n      levels = 1:5, \n      labels = c(\n        \"Solo\",\n        \"2-9\",\n        \"10-49\",\n        \"50-199\",\n        \"200 or more\"),\n      ordered = TRUE\n    )\n  ) %&gt;%\n  set_variable_labels(workplace_size = \"Workplace Size\")\n\nfrq(data$workplace_size)\n\nWorkplace Size (x) &lt;ordinal&gt; \n# total N=3048 valid N=2984 mean=2.32 sd=1.14\n\nValue       |   N | Raw % | Valid % | Cum. %\n--------------------------------------------\nSolo        | 851 | 27.92 |   28.52 |  28.52\n2-9         | 943 | 30.94 |   31.60 |  60.12\n10-49       | 699 | 22.93 |   23.42 |  83.55\n50-199      | 352 | 11.55 |   11.80 |  95.34\n200 or more | 139 |  4.56 |    4.66 | 100.00\n&lt;NA&gt;        |  64 |  2.10 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n\n1.3.4 owners\n\n1 == employers o self employed sin empleados\n2 == employers o self employed con 2-9 empleados\n3 == employers o self employed com &gt;= 10 empleados\n\n\ntable(data$relation_mop,data$company_size)\n\n                  \n                   Solo 2-9 10-49 50-199 200 or more\n  1. Employers      141 128    47     12          11\n  2. Self-Employed  402 140    20      4           9\n  3. Salaried       240 495   540    317         279\n\ntable(data$relation_mop,data$workplace_size)\n\n                  \n                   Solo 2-9 10-49 50-199 200 or more\n  1. Employers      144 131    48     13           4\n  2. Self-Employed  411 151    22      7           2\n  3. Salaried       296 661   629    332         133\n\ndata &lt;- data %&gt;%\n  mutate(\n    owners = case_when(\n      as.numeric(relation_mop) %in% 1:2 & (as.numeric(company_size) == 1 | (is.na(company_size) & as.numeric(workplace_size) == 1)) ~ 1,\n      as.numeric(relation_mop) %in% 1:2 & (as.numeric(company_size) == 2 | (is.na(company_size) & as.numeric(workplace_size) == 2)) ~ 2,\n      as.numeric(relation_mop) %in% 1:2 & (as.numeric(company_size) &gt;= 3 | (is.na(company_size) & as.numeric(workplace_size) &gt;= 3)) ~ 3,\n      TRUE ~ NA_real_\n    ),\n    owners = factor(\n      owners,\n      levels = 1:3,\n      labels = c(\n        \"1. Solo Self-Employed\",\n        \"2. Small employers\",\n        \"3. Employers\"\n      )\n    )\n  ) %&gt;%\n  set_variable_labels(owners = \"Owners\")\n\nfrq(data$owners)\n\nOwners (x) &lt;categorical&gt; \n# total N=3048 valid N=935 mean=1.53 sd=0.69\n\nValue                 |    N | Raw % | Valid % | Cum. %\n-------------------------------------------------------\n1. Solo Self-Employed |  551 | 18.08 |   58.93 |  58.93\n2. Small employers    |  276 |  9.06 |   29.52 |  88.45\n3. Employers          |  108 |  3.54 |   11.55 | 100.00\n&lt;NA&gt;                  | 2113 | 69.32 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n\n1.3.5 owners2\n\n1 == employers o self employed sin empleados\n2 == employers o self employed con 2-49 empleados\n3 == employers o self employed com &gt;= 50 empleados\n\n\ndata &lt;- data %&gt;%\n  mutate(\n    owners2 = case_when(\n      as.numeric(relation_mop) %in% 1:2 & (as.numeric(company_size) == 1 | (is.na(company_size) & as.numeric(workplace_size) == 1)) ~ 1,\n      as.numeric(relation_mop) %in% 1:2 & (as.numeric(company_size) %in% 2:3 | (is.na(company_size) & as.numeric(workplace_size) %in% 2:3)) ~ 2,\n      as.numeric(relation_mop) %in% 1:2 & (as.numeric(company_size) &gt;= 4 | (is.na(company_size) & as.numeric(workplace_size) &gt;= 4)) ~ 3,\n      TRUE ~ NA_real_\n    ),\n    owners2 = factor(\n      owners2,\n      levels = 1:3,\n      labels = c(\n        \"1. Solo Self-Employed\",\n        \"2. Small employers\",\n        \"3. Employers\"\n      )\n    )\n  ) %&gt;%\n  set_variable_labels(owners2 = \"Owners 2\")\n\nfrq(data$owners2)\n\nOwners 2 (x) &lt;categorical&gt; \n# total N=3048 valid N=935 mean=1.45 sd=0.57\n\nValue                 |    N | Raw % | Valid % | Cum. %\n-------------------------------------------------------\n1. Solo Self-Employed |  551 | 18.08 |   58.93 |  58.93\n2. Small employers    |  348 | 11.42 |   37.22 |  96.15\n3. Employers          |   36 |  1.18 |    3.85 | 100.00\n&lt;NA&gt;                  | 2113 | 69.32 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n\n1.3.6 educ\n\nfrq(data$e05)\n\nx &lt;numeric&gt; \n# total N=3048 valid N=3048 mean=-2.37 sd=88.97\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n -999 |   13 |  0.43 |    0.43 |   0.43\n -888 |   14 |  0.46 |    0.46 |   0.89\n    1 |   28 |  0.92 |    0.92 |   1.80\n    2 |   95 |  3.12 |    3.12 |   4.92\n    3 |  215 |  7.05 |    7.05 |  11.98\n    4 |  201 |  6.59 |    6.59 |  18.57\n    5 | 1062 | 34.84 |   34.84 |  53.41\n    6 |  178 |  5.84 |    5.84 |  59.25\n    7 |  440 | 14.44 |   14.44 |  73.69\n    8 |  205 |  6.73 |    6.73 |  80.41\n    9 |  531 | 17.42 |   17.42 |  97.83\n   10 |   66 |  2.17 |    2.17 | 100.00\n &lt;NA&gt; |    0 |  0.00 |    &lt;NA&gt; |   &lt;NA&gt;\n\ndata &lt;- data %&gt;%\n  mutate(\n    educ = ifelse(e05 %in% c(-999, -888), NA, e05)\n  ) %&gt;%\n  set_variable_labels(educ = \"Educational level\")\n\nfrq(data$educ)\n\nEducational level (x) &lt;numeric&gt; \n# total N=3048 valid N=3021 mean=6.03 sd=2.08\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n    1 |   28 |  0.92 |    0.93 |   0.93\n    2 |   95 |  3.12 |    3.14 |   4.07\n    3 |  215 |  7.05 |    7.12 |  11.19\n    4 |  201 |  6.59 |    6.65 |  17.84\n    5 | 1062 | 34.84 |   35.15 |  53.00\n    6 |  178 |  5.84 |    5.89 |  58.89\n    7 |  440 | 14.44 |   14.56 |  73.45\n    8 |  205 |  6.73 |    6.79 |  80.24\n    9 |  531 | 17.42 |   17.58 |  97.82\n   10 |   66 |  2.17 |    2.18 | 100.00\n &lt;NA&gt; |   27 |  0.89 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n\n1.3.7 ciuo08_clio_2d\n\n# Preparar variables necesarias\n\n## Crear la glosa concatenada\ndata$glosa_ciuo08 &lt;- paste(data$a02, data$a03, sep = \" \")\n\n## Crear isco a 2 dígitos\ndata &lt;- data %&gt;%\n  mutate(\n    ciuo08_clio_2d = as.numeric(substr(ciuo08_clio, 1, 2))\n  ) %&gt;%\n  set_variable_labels(ciuo08_clio_2d = \"ISCO-08: 2 digits\")\n\nfrq(data$ciuo08_clio_2d)\n\nISCO-08: 2 digits (x) &lt;numeric&gt; \n# total N=3048 valid N=3048 mean=54.09 sd=26.33\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n   -9 |  42 |  1.38 |    1.38 |   1.38\n    1 |  12 |  0.39 |    0.39 |   1.77\n   11 |  20 |  0.66 |    0.66 |   2.43\n   12 |  28 |  0.92 |    0.92 |   3.35\n   13 |  44 |  1.44 |    1.44 |   4.79\n   14 |  11 |  0.36 |    0.36 |   5.15\n   21 |  62 |  2.03 |    2.03 |   7.19\n   22 | 200 |  6.56 |    6.56 |  13.75\n   23 | 140 |  4.59 |    4.59 |  18.34\n   24 |  37 |  1.21 |    1.21 |  19.55\n   25 |  12 |  0.39 |    0.39 |  19.95\n   26 | 114 |  3.74 |    3.74 |  23.69\n   31 |  28 |  0.92 |    0.92 |  24.61\n   32 |  27 |  0.89 |    0.89 |  25.49\n   33 | 116 |  3.81 |    3.81 |  29.30\n   34 |  34 |  1.12 |    1.12 |  30.41\n   35 |   6 |  0.20 |    0.20 |  30.61\n   36 |  11 |  0.36 |    0.36 |  30.97\n   41 |   2 |  0.07 |    0.07 |  31.04\n   42 |  13 |  0.43 |    0.43 |  31.46\n   43 |  39 |  1.28 |    1.28 |  32.74\n   44 |   4 |  0.13 |    0.13 |  32.87\n   51 | 189 |  6.20 |    6.20 |  39.07\n   52 | 590 | 19.36 |   19.36 |  58.43\n   53 |  57 |  1.87 |    1.87 |  60.30\n   54 | 153 |  5.02 |    5.02 |  65.32\n   55 |   2 |  0.07 |    0.07 |  65.39\n   61 |  28 |  0.92 |    0.92 |  66.31\n   62 |   1 |  0.03 |    0.03 |  66.34\n   63 |   3 |  0.10 |    0.10 |  66.44\n   71 |  60 |  1.97 |    1.97 |  68.41\n   72 | 107 |  3.51 |    3.51 |  71.92\n   73 |  17 |  0.56 |    0.56 |  72.47\n   74 |  16 |  0.52 |    0.52 |  73.00\n   75 |  58 |  1.90 |    1.90 |  74.90\n   81 |  25 |  0.82 |    0.82 |  75.72\n   83 | 186 |  6.10 |    6.10 |  81.82\n   91 | 202 |  6.63 |    6.63 |  88.45\n   92 |  91 |  2.99 |    2.99 |  91.44\n   93 | 153 |  5.02 |    5.02 |  96.46\n   94 |  82 |  2.69 |    2.69 |  99.15\n   95 |   1 |  0.03 |    0.03 |  99.18\n   96 |  25 |  0.82 |    0.82 | 100.00\n &lt;NA&gt; |   0 |  0.00 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n# Revisar los NA\n\n## Armar tabla filtrando a los NA\ntabla_ciuo08_999 &lt;- data %&gt;%\n  filter(as.numeric(ciuo08_clio_2d) &lt; 1) %&gt;%\n  select(ciuo08_clio,\n         ciuo08_clio_2d,\n         glosa_ciuo08, \n         a03,\n         supervisa = a16, \n         educ = e05, \n         rama = a25, \n         a25_esp, \n         rama_esp = a25_esp_rec)\n\n## Pasar tabla a word\ntabla_ft &lt;- flextable(tabla_ciuo08_999)\nread_docx() %&gt;%\n  body_add_flextable(value = tabla_ft) %&gt;%\n  print(target = \"output/tabla_ciuo08_999.docx\")\n\n## Revisar NA con API del INE\n## Enviar la consulta al servidor\nrequest &lt;-  httr::POST(\"https://rapps.ine.cl:9292/predict\", \n                       encode = \"json\",\n                       body =  list(text = tabla_ciuo08_999$glosa_ciuo08,\n                                    classification = \"ciuo\",\n                                    digits = 2))\n\n## Extraer el contenido\nciuo08_ine_999 &lt;- httr::content(request)\n\n## Agregar como nueva columna a la base original\ntabla_ciuo08_999$ciuo08_ine_999 &lt;- unlist(ciuo08_ine_999$cod_final)\n\n## Armar tabla filtrando a los NA con ciuo08 ine 999\ntabla_ciuo08_999_ine &lt;- tabla_ciuo08_999 %&gt;%\n  select(ciuo08_clio,\n         ciuo08_clio_2d,\n         ciuo08_ine_999,\n         glosa_ciuo08, \n         a03,\n         supervisa, \n         educ, \n         rama, \n         rama_esp)\n\n## Pasar tabla a word\ntabla_ft &lt;- flextable(tabla_ciuo08_999_ine)\nread_docx() %&gt;%\n  body_add_flextable(value = tabla_ft) %&gt;%\n  print(target = \"output/tabla_ciuo08_999_ine.docx\")\n\n\n# Recuperar algunos NA\n\n## Recodificar ciuo08 de NA recuperados\ndata &lt;- data %&gt;%\n  mutate(\n    ciuo08_clio = case_when(\n      ciuo08_clio == \"-999\" & a03 == \"tejer\" ~ \"7318\", # Artesanos de los tejidos, el cuero y materiales similares\n      ciuo08_clio == \"-999\" & a03 == \"mantención\" ~ \"3121\",\n      ciuo08_clio == \"-999\" & a03 == \"aseo limpieza\" ~ \"9111\",\n      ciuo08_clio == \"-999\" & a03 == \"casa\" ~ \"9111\",\n      ciuo08_clio == \"-999\" & a03 == \"supervisar trabajos\" ~ \"3121\",\n      ciuo08_clio == \"-999\" & a03 == \"maquina pesada\" ~ \"8332\",\n      ciuo08_clio == \"-999\" & a03 == \"no responde\" ~ \"9111\",\n      ciuo08_clio == \"-999\" & a03 == \"Independiente\" ~ \"5212\",\n      ciuo08_clio == \"-999\" & a03 == \"estaba en la casa por permiso administrativo\" ~ \"9331\",\n      ciuo08_clio == \"-999\" & a03 == \"no trabja por ahoravendedor\" ~ \"5211\",\n      ciuo08_clio == \"-999\" & a03 == \"organizar y ordenar ropa\" ~ \"5242\",\n      ciuo08_clio == \"-999\" & a03 == \"ordenar y organizar ropa\" ~ \"5242\",\n      ciuo08_clio == \"-999\" & a03 == \"stripper\" ~ \"5249\",\n      TRUE ~ ciuo08_clio\n    )\n  )\n\n## Volver a crear ciuo08 con 2 dígitos y pasar -999 a NA\ndata &lt;- data %&gt;%\n  mutate(\n    ciuo08_clio_2d = as.numeric(substr(ciuo08_clio, 1, 2)),\n    ciuo08_clio_2d = ifelse(ciuo08_clio_2d==-9, NA,ciuo08_clio_2d)\n  ) %&gt;%\n  set_variable_labels(ciuo08_clio_2d = \"ISCO-08: 2 digits\")\n\nfrq(data$ciuo08_clio_2d)\n\nISCO-08: 2 digits (x) &lt;numeric&gt; \n# total N=3048 valid N=3019 mean=55.01 sd=25.42\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    1 |  12 |  0.39 |    0.40 |   0.40\n   11 |  20 |  0.66 |    0.66 |   1.06\n   12 |  28 |  0.92 |    0.93 |   1.99\n   13 |  44 |  1.44 |    1.46 |   3.44\n   14 |  11 |  0.36 |    0.36 |   3.81\n   21 |  62 |  2.03 |    2.05 |   5.86\n   22 | 200 |  6.56 |    6.62 |  12.49\n   23 | 140 |  4.59 |    4.64 |  17.12\n   24 |  37 |  1.21 |    1.23 |  18.35\n   25 |  12 |  0.39 |    0.40 |  18.75\n   26 | 114 |  3.74 |    3.78 |  22.52\n   31 |  30 |  0.98 |    0.99 |  23.52\n   32 |  27 |  0.89 |    0.89 |  24.41\n   33 | 116 |  3.81 |    3.84 |  28.25\n   34 |  34 |  1.12 |    1.13 |  29.38\n   35 |   6 |  0.20 |    0.20 |  29.58\n   36 |  11 |  0.36 |    0.36 |  29.94\n   41 |   2 |  0.07 |    0.07 |  30.01\n   42 |  13 |  0.43 |    0.43 |  30.44\n   43 |  39 |  1.28 |    1.29 |  31.73\n   44 |   4 |  0.13 |    0.13 |  31.86\n   51 | 189 |  6.20 |    6.26 |  38.13\n   52 | 595 | 19.52 |   19.71 |  57.83\n   53 |  57 |  1.87 |    1.89 |  59.72\n   54 | 153 |  5.02 |    5.07 |  64.79\n   55 |   2 |  0.07 |    0.07 |  64.86\n   61 |  28 |  0.92 |    0.93 |  65.78\n   62 |   1 |  0.03 |    0.03 |  65.82\n   63 |   3 |  0.10 |    0.10 |  65.92\n   71 |  60 |  1.97 |    1.99 |  67.90\n   72 | 107 |  3.51 |    3.54 |  71.45\n   73 |  18 |  0.59 |    0.60 |  72.04\n   74 |  16 |  0.52 |    0.53 |  72.57\n   75 |  58 |  1.90 |    1.92 |  74.49\n   81 |  25 |  0.82 |    0.83 |  75.32\n   83 | 187 |  6.14 |    6.19 |  81.52\n   91 | 205 |  6.73 |    6.79 |  88.31\n   92 |  91 |  2.99 |    3.01 |  91.32\n   93 | 154 |  5.05 |    5.10 |  96.42\n   94 |  82 |  2.69 |    2.72 |  99.14\n   95 |   1 |  0.03 |    0.03 |  99.17\n   96 |  25 |  0.82 |    0.83 | 100.00\n &lt;NA&gt; |  29 |  0.95 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n# Chequeo códigos no existentes ciuo clio = 36, 55\n\n## Armar tabla\ntabla_ciuo08_36_55 &lt;- data %&gt;%\n  filter(as.numeric(ciuo08_clio_2d) %in% c(36, 55)) %&gt;%\n  select(ciuo08_clio,\n         ciuo08_clio_2d,\n         glosa_ciuo08,\n         id,\n         supervisa = a16, \n         educ = e05, \n         rama = a25, \n         rama_esp = a25_esp_rec)\n\n## Pasar tabla a word\ntabla_ft &lt;- flextable(tabla_ciuo08_36_55)\nread_docx() %&gt;%\n  body_add_flextable(value = tabla_ft) %&gt;%\n  print(target = \"output/tabla_ciuo08_36_55.docx\")\n\n## Revisar 36 y 55 con API del INE\n## Enviar la consulta al servidor\nrequest &lt;-  httr::POST(\"https://rapps.ine.cl:9292/predict\", \n                       encode = \"json\",\n                       body =  list(text = tabla_ciuo08_36_55$glosa_ciuo08,\n                                    classification = \"ciuo\",\n                                    digits = 2))\n\n## Extraer el contenido\nciuo08_ine_36_55 &lt;- httr::content(request)\n\n## Agregar como nueva columna a la base original\ntabla_ciuo08_36_55$ciuo08_ine_36_55 &lt;- unlist(ciuo08_ine_36_55$cod_final)\n\n## Armar tabla filtrando a los NA con ciuo08 ine 999\ntabla_ciuo08_36_55_ine &lt;- tabla_ciuo08_36_55 %&gt;%\n  select(ciuo08_clio,\n         ciuo08_clio_2d,\n         ciuo08_ine_36_55,\n         glosa_ciuo08, \n         id,\n         supervisa, \n         educ, \n         rama, \n         rama_esp)\n\n## Pasar tabla a word\ntabla_ft &lt;- flextable(tabla_ciuo08_36_55_ine)\nread_docx() %&gt;%\n  body_add_flextable(value = tabla_ft) %&gt;%\n  print(target = \"output/tabla_ciuo08_36_55_ine.docx\")\n\n\n# Recuperar algunos códigos no existentes\n\n## Recodificar ciuo08 de 36 55 recuperados\ndata &lt;- data %&gt;%\n  mutate(\n    ciuo08_clio = case_when(\n      ciuo08_clio == \"5522\" & id == \"var_223\" ~ \"3343\",\n      ciuo08_clio == \"5521\" & id == \"var_2536\" ~ \"7322\",\n      TRUE ~ ciuo08_clio\n    )\n  )\n\n## Volver a crear ciuo08 con 2 dígitos\ndata &lt;- data %&gt;%\n  mutate(\n    ciuo08_clio_2d = as.numeric(substr(ciuo08_clio, 1, 2)),\n    ciuo08_clio_2d = ifelse(ciuo08_clio_2d==-9, NA,ciuo08_clio_2d)\n  ) %&gt;%\n  set_variable_labels(ciuo08_clio_2d = \"ISCO-08: 2 digits\")\n\nfrq(data$ciuo08_clio_2d)\n\nISCO-08: 2 digits (x) &lt;numeric&gt; \n# total N=3048 valid N=3019 mean=55.01 sd=25.42\n\nValue |   N | Raw % | Valid % | Cum. %\n--------------------------------------\n    1 |  12 |  0.39 |    0.40 |   0.40\n   11 |  20 |  0.66 |    0.66 |   1.06\n   12 |  28 |  0.92 |    0.93 |   1.99\n   13 |  44 |  1.44 |    1.46 |   3.44\n   14 |  11 |  0.36 |    0.36 |   3.81\n   21 |  62 |  2.03 |    2.05 |   5.86\n   22 | 200 |  6.56 |    6.62 |  12.49\n   23 | 140 |  4.59 |    4.64 |  17.12\n   24 |  37 |  1.21 |    1.23 |  18.35\n   25 |  12 |  0.39 |    0.40 |  18.75\n   26 | 114 |  3.74 |    3.78 |  22.52\n   31 |  30 |  0.98 |    0.99 |  23.52\n   32 |  27 |  0.89 |    0.89 |  24.41\n   33 | 117 |  3.84 |    3.88 |  28.29\n   34 |  34 |  1.12 |    1.13 |  29.41\n   35 |   6 |  0.20 |    0.20 |  29.61\n   36 |  11 |  0.36 |    0.36 |  29.98\n   41 |   2 |  0.07 |    0.07 |  30.04\n   42 |  13 |  0.43 |    0.43 |  30.47\n   43 |  39 |  1.28 |    1.29 |  31.77\n   44 |   4 |  0.13 |    0.13 |  31.90\n   51 | 189 |  6.20 |    6.26 |  38.16\n   52 | 595 | 19.52 |   19.71 |  57.87\n   53 |  57 |  1.87 |    1.89 |  59.75\n   54 | 153 |  5.02 |    5.07 |  64.82\n   61 |  28 |  0.92 |    0.93 |  65.75\n   62 |   1 |  0.03 |    0.03 |  65.78\n   63 |   3 |  0.10 |    0.10 |  65.88\n   71 |  60 |  1.97 |    1.99 |  67.87\n   72 | 107 |  3.51 |    3.54 |  71.41\n   73 |  19 |  0.62 |    0.63 |  72.04\n   74 |  16 |  0.52 |    0.53 |  72.57\n   75 |  58 |  1.90 |    1.92 |  74.49\n   81 |  25 |  0.82 |    0.83 |  75.32\n   83 | 187 |  6.14 |    6.19 |  81.52\n   91 | 205 |  6.73 |    6.79 |  88.31\n   92 |  91 |  2.99 |    3.01 |  91.32\n   93 | 154 |  5.05 |    5.10 |  96.42\n   94 |  82 |  2.69 |    2.72 |  99.14\n   95 |   1 |  0.03 |    0.03 |  99.17\n   96 |  25 |  0.82 |    0.83 | 100.00\n &lt;NA&gt; |  29 |  0.95 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n# Chequeo COMPLETO de códigos ciuo08 con api INE\n\n## Enviar la consulta al servidor\nrequest &lt;-  httr::POST(\"https://rapps.ine.cl:9292/predict\", \n                       encode = \"json\",\n                       body =  list(text = data$glosa_ciuo08,\n                                    classification = \"ciuo\",\n                                    digits = 2))\n\n## Extraer el contenido\nciuo08_ine &lt;- httr::content(request)\n\n## Agregar como nueva columna a la base original\ndata$ciuo08_ine &lt;- unlist(ciuo08_ine$cod_final)\n\n## Volver NA en ciuo08_ine los NA de ciuo08_clio_2d\ndata &lt;- data %&gt;%\n  mutate(\n    ciuo08_ine = ifelse(is.na(ciuo08_clio_2d), NA, ciuo08_ine)\n  )\n\n## Buscar los códigos diferentes\ndiferente_ciuo &lt;- data %&gt;%\n  filter(ciuo08_ine != ciuo08_clio_2d | (is.na(ciuo08_ine) != is.na(ciuo08_clio_2d))) %&gt;%\n  select(glosa_ciuo08, ciuo08_clio_2d, ciuo08_ine)\n\ndiferente_ciuo\n\n# A tibble: 845 × 3\n   glosa_ciuo08                                        ciuo08_clio_2d ciuo08_ine\n   &lt;chr&gt;                                                        &lt;dbl&gt; &lt;chr&gt;     \n 1 isabel antonia castillo venegas vendedora de flores             75 52        \n 2 trabajar manipular alimentos                                    94 51        \n 3 Funcionario Público Remuneración                                43 33        \n 4 adminustrativa de salud atender clientes                        33 22        \n 5 dueña de casa aseo                                              51 91        \n 6 empresa paisajismo areas verdes cuidamos el medio …             21 61        \n 7 tens cuidados adulto mayores                                    22 32        \n 8 minera cocina                                                   21 81        \n 9 Atención público Cajera, atención. Trabajo con niñ…             52 42        \n10 repartidor de encomienda dejar encomiendas en resp…             96 83        \n# ℹ 835 more rows\n\n\n\n\n1.3.8 skills\n\nExperts -&gt; ciuo08_2d == 11 a 34 con universitaria completa o más (educ &gt;= 9) —&gt; experts\nSkilled -&gt; ciuo08_2d == 11 a 34 con universitaria incompleta o menos (educ &lt; 9), y\nSkilled -&gt; ciuo08_2d == 35,36,41:44,53, y\nSkilled -&gt; ciuo08_2d == 51,54,61,62,71:75,81 con media completa o más (educ &gt;= 5).\nUnskilled -&gt; ciuo08_2d == 51,54,61,62,71:75,81 con media incompleta o menos, y\nUnskilled -&gt; ciuo08_2d == 52,63,82,83,90+\n61 62 71:75 –&gt; skilled\n51,54,81 –&gt; unskilled\n\nlos que no tienen educación dejar solo como ciuo\n\ndata &lt;- data %&gt;% \n  mutate(\n    skills = case_when(\n      ciuo08_ine &lt;= 34 & educ &gt;= 9 ~ 1,\n      ciuo08_ine &lt;= 34 & is.na(educ)~ 1,  \n      \n      ciuo08_ine &lt;= 34 & educ &lt; 9 ~ 2,\n      ciuo08_ine %in% c(35, 36, 41:44, 53) ~ 2,\n      ciuo08_ine %in% c(51, 54, 61, 62, 71:75, 81) & educ &gt;= 5 ~ 2,\n      ciuo08_ine %in% c(61, 62, 71:75) & is.na(educ) ~ 2,\n      \n      ciuo08_ine %in% c(51, 54, 61, 62, 71:75, 81) & educ &lt;= 4 ~ 3,\n      ciuo08_ine %in% c(52, 63, 82, 83, 91:99) ~ 3,\n      ciuo08_ine %in% c(51, 54, 81) & is.na(educ) ~ 3     \n    ),\n    skills = factor(\n      skills, \n      levels = 1:3,\n      labels = c(\n        \"1. Experts\",\n        \"2. Skilled\",\n        \"3. Unskilled\"\n      )\n    )\n  ) %&gt;%\n  set_variable_labels(skills = \"Skills\")\n\n\nfrq(data$skills)\n\nSkills (x) &lt;categorical&gt; \n# total N=3048 valid N=3019 mean=2.29 sd=0.72\n\nValue        |    N | Raw % | Valid % | Cum. %\n----------------------------------------------\n1. Experts   |  469 | 15.39 |   15.53 |  15.53\n2. Skilled   | 1198 | 39.30 |   39.68 |  55.22\n3. Unskilled | 1352 | 44.36 |   44.78 | 100.00\n&lt;NA&gt;         |   29 |  0.95 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n\n1.3.9 formal_position_auth\n\nfrq(data$a15)\n\nx &lt;numeric&gt; \n# total N=3048 valid N=2107 mean=3.76 sd=0.63\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n    1 |   41 |  1.35 |    1.95 |   1.95\n    2 |  102 |  3.35 |    4.84 |   6.79\n    3 |  188 |  6.17 |    8.92 |  15.71\n    4 | 1776 | 58.27 |   84.29 | 100.00\n &lt;NA&gt; |  941 | 30.87 |    &lt;NA&gt; |   &lt;NA&gt;\n\ndata &lt;- data %&gt;%\n  mutate(\n    formal_position_auth = case_when(\n      as.numeric(relation_mop) %in% c(1, 2) ~ NA_real_,\n      TRUE ~ as.numeric(a15)\n    ),\n    formal_position_auth = factor(\n      formal_position_auth,\n      levels = 1:4,\n      labels = c(\n        \"1. Senior manager or executive\",\n        \"2. Middle manager (e.g., sector, office or branch head)\",\n        \"3. Supervisor or foreperson\",\n        \"4. Regular employee or worker (no supervisory role)\"\n      )\n    )\n  ) %&gt;%\n  set_variable_labels(formal_position_auth = \"Formal position of authority (a15)\")\n\nfrq(data$formal_position_auth)\n\nFormal position of authority (a15) (x) &lt;categorical&gt; \n# total N=3048 valid N=2105 mean=3.76 sd=0.63\n\nValue                                                   |    N | Raw % | Valid % | Cum. %\n-----------------------------------------------------------------------------------------\n1. Senior manager or executive                          |   41 |  1.35 |    1.95 |   1.95\n2. Middle manager (e.g., sector, office or branch head) |  102 |  3.35 |    4.85 |   6.79\n3. Supervisor or foreperson                             |  188 |  6.17 |    8.93 |  15.72\n4. Regular employee or worker (no supervisory role)     | 1774 | 58.20 |   84.28 | 100.00\n&lt;NA&gt;                                                    |  943 | 30.94 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n\n1.3.10 supervision\n\nfrq(data$a16)\n\nx &lt;numeric&gt; \n# total N=3048 valid N=2105 mean=-12.08 sd=112.46\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n -999 |    8 |  0.26 |    0.38 |   0.38\n -888 |   24 |  0.79 |    1.14 |   1.52\n    1 |  280 |  9.19 |   13.30 |  14.82\n    2 | 1793 | 58.83 |   85.18 | 100.00\n &lt;NA&gt; |  943 | 30.94 |    &lt;NA&gt; |   &lt;NA&gt;\n\ndata &lt;- data %&gt;%\n  mutate(\n    supervision = case_when(\n      a16 == 1 ~ 1,\n      a16 %in% c(2, -888, -999) ~ 0,\n      TRUE ~ NA_real_\n    )\n  ) %&gt;%\n  set_variable_labels(supervision = \"Supervises other workers (a16)\")\n\nfrq(data$supervision)\n\nSupervises other workers (a16) (x) &lt;numeric&gt; \n# total N=3048 valid N=2105 mean=0.13 sd=0.34\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n    0 | 1825 | 59.88 |   86.70 |  86.70\n    1 |  280 |  9.19 |   13.30 | 100.00\n &lt;NA&gt; |  943 | 30.94 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n\n1.3.11 decisionmaking_typology\n\nfrq(data$a17_01)\n\nx &lt;numeric&gt; \n# total N=3048 valid N=2105 mean=-19.16 sd=140.62\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n -999 |   14 |  0.46 |    0.67 |   0.67\n -888 |   36 |  1.18 |    1.71 |   2.38\n    1 |  101 |  3.31 |    4.80 |   7.17\n    2 |  338 | 11.09 |   16.06 |  23.23\n    3 | 1616 | 53.02 |   76.77 | 100.00\n &lt;NA&gt; |  943 | 30.94 |    &lt;NA&gt; |   &lt;NA&gt;\n\nfrq(data$a17_02)\n\nx &lt;numeric&gt; \n# total N=3048 valid N=2105 mean=-16.73 sd=132.62\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n -999 |   10 |  0.33 |    0.48 |   0.48\n -888 |   35 |  1.15 |    1.66 |   2.14\n    1 |   55 |  1.80 |    2.61 |   4.75\n    2 |  223 |  7.32 |   10.59 |  15.34\n    3 | 1782 | 58.46 |   84.66 | 100.00\n &lt;NA&gt; |  943 | 30.94 |    &lt;NA&gt; |   &lt;NA&gt;\n\nfrq(data$a17_03)\n\nx &lt;numeric&gt; \n# total N=3048 valid N=2105 mean=-12.16 sd=117.04\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n -999 |   11 |  0.36 |    0.52 |   0.52\n -888 |   23 |  0.75 |    1.09 |   1.62\n    1 |   71 |  2.33 |    3.37 |   4.99\n    2 |  249 |  8.17 |   11.83 |  16.82\n    3 | 1751 | 57.45 |   83.18 | 100.00\n &lt;NA&gt; |  943 | 30.94 |    &lt;NA&gt; |   &lt;NA&gt;\n\nfrq(data$a17_04)\n\nx &lt;numeric&gt; \n# total N=3048 valid N=2105 mean=-12.57 sd=118.59\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n -999 |   11 |  0.36 |    0.52 |   0.52\n -888 |   24 |  0.79 |    1.14 |   1.66\n    1 |   56 |  1.84 |    2.66 |   4.32\n    2 |  259 |  8.50 |   12.30 |  16.63\n    3 | 1755 | 57.58 |   83.37 | 100.00\n &lt;NA&gt; |  943 | 30.94 |    &lt;NA&gt; |   &lt;NA&gt;\n\nfrq(data$a17_05)\n\nx &lt;numeric&gt; \n# total N=3048 valid N=2105 mean=-9.96 sd=107.12\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n -999 |    7 |  0.23 |    0.33 |   0.33\n -888 |   22 |  0.72 |    1.05 |   1.38\n    1 |  120 |  3.94 |    5.70 |   7.08\n    2 |  418 | 13.71 |   19.86 |  26.94\n    3 | 1538 | 50.46 |   73.06 | 100.00\n &lt;NA&gt; |  943 | 30.94 |    &lt;NA&gt; |   &lt;NA&gt;\n\nfrq(data$a17_06)\n\nx &lt;numeric&gt; \n# total N=3048 valid N=2105 mean=-20.39 sd=143.27\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n -999 |    7 |  0.23 |    0.33 |   0.33\n -888 |   47 |  1.54 |    2.23 |   2.57\n    1 |   63 |  2.07 |    2.99 |   5.56\n    2 |  211 |  6.92 |   10.02 |  15.58\n    3 | 1777 | 58.30 |   84.42 | 100.00\n &lt;NA&gt; |  943 | 30.94 |    &lt;NA&gt; |   &lt;NA&gt;\n\ndata &lt;- data %&gt;%\n  mutate(\n    decisionmaking_typology = if_else(\n      is.na(a17_01),\n      NA_real_,\n      rowSums(across(a17_01:a17_06, ~ case_when(\n        .x == 1 ~ 3,\n        .x == 2 ~ 2,\n        .x == 3 ~ 1,\n        .x %in% c(-888, -999) ~ 1,  \n        TRUE ~ NA_real_\n      )), na.rm = TRUE)\n    ),\n    decisionmaking_typology_mean = if_else(\n      is.na(a17_01),\n      NA_real_,\n      rowMeans(across(a17_01:a17_06, ~ case_when(\n        .x == 1 ~ 3,\n        .x == 2 ~ 2,\n        .x == 3 ~ 1,\n        .x %in% c(-888, -999) ~ 1,\n        TRUE ~ NA_real_\n      )), na.rm = TRUE)\n    )\n  ) %&gt;%\n  set_variable_labels(\n    decisionmaking_typology = \"Decision-making typology (sum, inverted)\",\n    decisionmaking_typology_mean = \"Decision-making typology (mean, inverted)\"\n  )\n\nfrq(data$decisionmaking_typology)\n\nDecision-making typology (sum, inverted) (x) &lt;numeric&gt; \n# total N=3048 valid N=2105 mean=7.25 sd=2.38\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n    6 | 1363 | 44.72 |   64.75 |  64.75\n    7 |  228 |  7.48 |   10.83 |  75.58\n    8 |  139 |  4.56 |    6.60 |  82.19\n    9 |   79 |  2.59 |    3.75 |  85.94\n   10 |   67 |  2.20 |    3.18 |  89.12\n   11 |   61 |  2.00 |    2.90 |  92.02\n   12 |   78 |  2.56 |    3.71 |  95.72\n   13 |   27 |  0.89 |    1.28 |  97.01\n   14 |   11 |  0.36 |    0.52 |  97.53\n   15 |   10 |  0.33 |    0.48 |  98.00\n   16 |   10 |  0.33 |    0.48 |  98.48\n   17 |    5 |  0.16 |    0.24 |  98.72\n   18 |   27 |  0.89 |    1.28 | 100.00\n &lt;NA&gt; |  943 | 30.94 |    &lt;NA&gt; |   &lt;NA&gt;\n\nfrq(data$decisionmaking_typology_mean)\n\nDecision-making typology (mean, inverted) (x) &lt;numeric&gt; \n# total N=3048 valid N=2105 mean=1.21 sd=0.40\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n 1.00 | 1363 | 44.72 |   64.75 |  64.75\n 1.17 |  228 |  7.48 |   10.83 |  75.58\n 1.33 |  139 |  4.56 |    6.60 |  82.19\n 1.50 |   79 |  2.59 |    3.75 |  85.94\n 1.67 |   67 |  2.20 |    3.18 |  89.12\n 1.83 |   61 |  2.00 |    2.90 |  92.02\n 2.00 |   78 |  2.56 |    3.71 |  95.72\n 2.17 |   27 |  0.89 |    1.28 |  97.01\n 2.33 |   11 |  0.36 |    0.52 |  97.53\n 2.50 |   10 |  0.33 |    0.48 |  98.00\n 2.67 |   10 |  0.33 |    0.48 |  98.48\n 2.83 |    5 |  0.16 |    0.24 |  98.72\n 3.00 |   27 |  0.89 |    1.28 | 100.00\n &lt;NA&gt; |  943 | 30.94 |    &lt;NA&gt; |   &lt;NA&gt;\n\n# Crear variable con 3 categorías\ndata &lt;- data %&gt;%\n  mutate(\n    decisionmaking_typology_cat = case_when(\n      decisionmaking_typology_mean == 1 ~ 1,\n      decisionmaking_typology_mean &gt; 1 & decisionmaking_typology_mean &lt; 3 ~ 2,\n      decisionmaking_typology_mean == 3 ~ 3\n    ),\n    decisionmaking_typology_cat = factor(\n      decisionmaking_typology_cat,\n      levels = 1:3\n    )\n  ) %&gt;%\n  set_variable_labels(\n    decisionmaking_typology_cat = \"Decision-making typology (recoded 3 categories)\"\n  )\n\nfrq(data$decisionmaking_typology_cat)\n\nDecision-making typology (recoded 3 categories) (x) &lt;categorical&gt; \n# total N=3048 valid N=2105 mean=1.37 sd=0.51\n\nValue |    N | Raw % | Valid % | Cum. %\n---------------------------------------\n    1 | 1363 | 44.72 |   64.75 |  64.75\n    2 |  715 | 23.46 |   33.97 |  98.72\n    3 |   27 |  0.89 |    1.28 | 100.00\n &lt;NA&gt; |  943 | 30.94 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n\n1.3.12 managerial_location_typology\n\ndata &lt;- data %&gt;%\n  mutate(\n    managerial_location_typology = case_when(\n      as.integer(decisionmaking_typology_cat) == 3 & supervision == 1 & as.integer(formal_position_auth) %in% 1:3 ~ 1,\n      as.integer(decisionmaking_typology_cat) == 3 & supervision == 1 & as.integer(formal_position_auth) == 4 ~ 2,\n      as.integer(decisionmaking_typology_cat) == 3 & supervision == 0 & as.integer(formal_position_auth) %in% 1:3 ~ 3,\n      as.integer(decisionmaking_typology_cat) == 3 & supervision == 0 & as.integer(formal_position_auth) == 4 ~ 4,\n      as.integer(decisionmaking_typology_cat) == 2 & supervision == 1 & as.integer(formal_position_auth) %in% 1:3 ~ 5,\n      as.integer(decisionmaking_typology_cat) == 2 & supervision == 1 & as.integer(formal_position_auth) == 4 ~ 6,\n      as.integer(decisionmaking_typology_cat) == 2 & supervision == 0 & as.integer(formal_position_auth) %in% 1:3 ~ 7,\n      as.integer(decisionmaking_typology_cat) == 2 & supervision == 0 & as.integer(formal_position_auth) == 4 ~ 8,\n      as.integer(decisionmaking_typology_cat) == 1 & supervision == 1 & as.integer(formal_position_auth) %in% 1:3 ~ 9,\n      as.integer(decisionmaking_typology_cat) == 1 & supervision == 1 & as.integer(formal_position_auth) == 4 ~ 10,\n      as.integer(decisionmaking_typology_cat) == 1 & supervision == 0 & as.integer(formal_position_auth) %in% 1:3 ~ 11,\n      as.integer(decisionmaking_typology_cat) == 1 & supervision == 0 & as.integer(formal_position_auth) == 4 ~ 12\n    ),\n    managerial_location_typology = factor(\n      managerial_location_typology,\n      levels = 1:12,\n      labels = c(\n        \"1. Manager on all criteria\",\n        \"2. Manager not in formal hierarchy\",\n        \"3. Non-supervisory manager\",\n        \"4. Non-supervisory decision-maker not in formal hierarchy\",\n        \"5. Advisor-manager on all criteria\",\n        \"6. Advisor not in hierarchy\",\n        \"7. Non-supervisory advisor\",\n        \"8. Non-supervisory advisor not in formal hierarchy\",\n        \"9. Sanctioning / task supervisor in hierarchy\",\n        \"10. Sanctioning / task supervisor not in hierarchy\",\n        \"11. Not subordinates but in hierarchy\",\n        \"12. Non-supervisor / non manager on all criteria\"\n      )\n    ),\n    organization_assets = case_when(\n      as.integer(managerial_location_typology) %in% c(1, 2, 3, 5) ~ 1,\n      as.integer(managerial_location_typology) %in% c(6, 7, 9, 10) ~ 2,\n      as.integer(managerial_location_typology) %in% c(4, 8, 11, 12) ~ 3\n    ),\n    organization_assets = factor(\n      organization_assets,\n      levels = 1:3,\n      labels = c(\n        \"1. Manager\",\n        \"2. Supervisor\",\n        \"3. Non-managerial worker\"\n      )\n    )\n  ) %&gt;%\n  set_variable_labels(\n    managerial_location_typology = \"Managerial Location Typology\",\n    organization_assets = \"Organizational Assets\"\n  )\n\nfrq(data$managerial_location_typology)\n\nManagerial Location Typology (x) &lt;categorical&gt; \n# total N=3048 valid N=2105 mean=10.12 sd=2.66\n\nValue                                                     |    N | Raw % | Valid % | Cum. %\n-------------------------------------------------------------------------------------------\n1. Manager on all criteria                                |   18 |  0.59 |    0.86 |   0.86\n2. Manager not in formal hierarchy                        |    4 |  0.13 |    0.19 |   1.05\n3. Non-supervisory manager                                |    4 |  0.13 |    0.19 |   1.24\n4. Non-supervisory decision-maker not in formal hierarchy |    1 |  0.03 |    0.05 |   1.28\n5. Advisor-manager on all criteria                        |  174 |  5.71 |    8.27 |   9.55\n6. Advisor not in hierarchy                               |   67 |  2.20 |    3.18 |  12.73\n7. Non-supervisory advisor                                |   86 |  2.82 |    4.09 |  16.82\n8. Non-supervisory advisor not in formal hierarchy        |  388 | 12.73 |   18.43 |  35.25\n9. Sanctioning / task supervisor in hierarchy             |    7 |  0.23 |    0.33 |  35.58\n10. Sanctioning / task supervisor not in hierarchy        |   10 |  0.33 |    0.48 |  36.06\n11. Not subordinates but in hierarchy                     |   42 |  1.38 |    2.00 |  38.05\n12. Non-supervisor / non manager on all criteria          | 1304 | 42.78 |   61.95 | 100.00\n&lt;NA&gt;                                                      |  943 | 30.94 |    &lt;NA&gt; |   &lt;NA&gt;\n\nfrq(data$organization_assets)\n\nOrganizational Assets (x) &lt;categorical&gt; \n# total N=3048 valid N=2105 mean=2.73 sd=0.62\n\nValue                    |    N | Raw % | Valid % | Cum. %\n----------------------------------------------------------\n1. Manager               |  200 |  6.56 |    9.50 |   9.50\n2. Supervisor            |  170 |  5.58 |    8.08 |  17.58\n3. Non-managerial worker | 1735 | 56.92 |   82.42 | 100.00\n&lt;NA&gt;                     |  943 | 30.94 |    &lt;NA&gt; |   &lt;NA&gt;\n\n\n\n\n1.3.13 class\n\norganizational assets con skills\nprimera propuesta\n\n\ncapitalists: employers 50 o más trabajadores\nsmall employers: employers 1-49 trabajadores\npetty bourgeoisie: solo self employed\nexpert managers: expert y manager\nexpert supervisor: expert y supervisor\nexperts: experts sin autoridad\nskilled managers:\nskilled supervisors\nskilled workers\nnonskilled managers\nnonskilled supervisors\nnonskilled workers\n\n\nsegunda propuesta\n\n\nemployers: employers 10 o más trabajadores\nsmall employers: employers 1-9 trabajadores\npetty bourgeoisie: solo self employed\nexpert managers: expert y manager\nexpert supervisor: expert y supervisor\nexperts: experts sin autoridad\nskilled managers\nskilled supervisors\nskilled workers\nnonskilled managers\nnonskilled supervisors\nnonskilled workers\n\nclases informales\na06 boletas a10 incio actividades a18 contrato escrito"
  }
]